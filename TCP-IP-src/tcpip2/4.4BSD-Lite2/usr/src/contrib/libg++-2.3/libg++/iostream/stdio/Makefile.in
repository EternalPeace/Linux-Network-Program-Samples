
srcdir = .

prefix = /usr/local

exec_prefix = $(prefix)
bindir = $(exec_prefix)/bin
libdir = $(exec_prefix)/lib

datadir = $(prefix)/lib
mandir = $(prefix)/man
man1dir = $(mandir)/man1
man2dir = $(mandir)/man2
man3dir = $(mandir)/man3
man4dir = $(mandir)/man4
man5dir = $(mandir)/man5
man6dir = $(mandir)/man6
man7dir = $(mandir)/man7
man8dir = $(mandir)/man8
man9dir = $(mandir)/man9
infodir = $(prefix)/info
includedir = $(prefix)/include
docdir = $(datadir)/doc

SHELL = /bin/sh

INSTALL = install -c
INSTALL_PROGRAM = $(INSTALL)
INSTALL_DATA = $(INSTALL)

AR = `if [ -f ../../../binutils/ar ] ; \
	then echo ../../../binutils/ar ; \
	else echo ar ; fi`

AR_FLAGS = qc
RANLIB = `if [ -f ../../../binutils/ranlib ] ; \
	then echo ../../../binutils/ranlib ; \
	else echo ranlib ; fi`

MAKEINFO = `if [ -f ../../../texinfo/C/makeinfo ] ; \
	then echo ../../../texinfo/C/makeinfo ; \
	else echo makeinfo ; fi`

STDIO_CFILES = clearerr.C emulate.C fclose.C fdopen.C feof.C \
  ferror.C fflush.C fgetc.C fgetpos.C fgets.C fileno.C fopen.C \
  fprintf.C fputc.C fputs.C fread.C freopen.C fscanf.C fseek.C \
  fsetpos.C ftell.C fwrite.C gets.C perror.C popen.C printf.C puts.C \
  remove.C rename.C rewind.C  scanf.C setbuf.C setbuffer.C \
  setlinebuf.C setvbuf.C sprintf.C sscanf.C stdio.C tmpfile.C \
  tmpnam.C vfprintf.C vfscanf.C vprintf.C vsprintf.C vscanf.C \
  vsscanf.C ungetc.C

STDIO_FILES = $(STDIO_CFILES) stdio.h Makefile

STDIO_OBJECTS = clearerr.o emulate.o fclose.o fdopen.o feof.o \
  ferror.o fflush.o fgetc.o fgetpos.o fgets.o fileno.o fopen.o \
  fprintf.o fputc.o fputs.o fread.o freopen.o fscanf.o fseek.o \
  fsetpos.o ftell.o fwrite.o gets.o perror.o popen.o printf.o puts.o \
  remove.o rename.o rewind.o  scanf.o setbuf.o setbuffer.o \
  setlinebuf.o setvbuf.o sprintf.o sscanf.o stdio.o tmpfile.o \
  tmpnam.o vfprintf.o vfscanf.o vprintf.o vsprintf.o vscanf.o \
  vsscanf.o ungetc.o

DEPEND_SOURCES = $(srcdir)/*.C

TARGETLIB = libstdio++.a

# IO_DIR is used in 'depend' rules generated by ../../utils/gendepend.
IO_DIR = iostream

CC = `if [ -f ../../../gcc/gcc ] ; \
	then echo ../../../gcc/gcc -B../../../gcc/ ; \
	else echo cc ; fi`
CXX = `if [ -f ../../../gcc/gcc ] ; \
	then echo ../../../gcc/gcc -B../../../gcc/ ; \
	else echo gcc ; fi`

CFLAGS = -g
CXXFLAGS = -g -O
XTRAFLAGS = `if [ -f ../../../gcc/gcc ] ; \
	then echo -I../../../gcc/include ; \
	else echo ; fi`

WRAP_C_INCLUDES = -I$(srcdir)/../../g++-include

#### Host and target-dependent makefile fragments come in here.
##

.SUFFIXES: .o .C .c .cc

.C.o:
	$(CXX) $(CXXFLAGS) $(NOSTDINC) -I../.. -I$(srcdir) -I$(srcdir)/.. $(WRAP_C_INCLUDES) -c $(XTRAFLAGS) $<
.c.o:
	$(CC) $(CFLAGS) $(NOSTDINC) -I../.. -I$(srcdir) -I$(srcdir)/.. $(WRAP_C_INCLUDES) -c $(XTRAFLAGS) $<

.PHONY: all
all: $(TARGETLIB)
.PHONY: info
info:
.PHONY: clean-info
clean-info:
.PHONY: install-info
install-info:

.PHONY: check
check:

$(TARGETLIB): $(STDIO_OBJECTS)
	-rm -f $(TARGETLIB)
	$(AR) $(AR_FLAGS) $(TARGETLIB) $(STDIO_OBJECTS)
	$(RANLIB) $(TARGETLIB)	

.PHONY: install
install:
	-parent=`echo $(libdir)|sed -e 's@/[^/]*$$@@'`; \
	if [ -d $$parent ] ; then true ; else mkdir $$parent ; fi
	-if [ -d $(libdir) ] ; then true ; else mkdir $(libdir) ; fi
	-rm -f $(libdir)/$(TARGETLIB)
	$(INSTALL_DATA) $(TARGETLIB) $(libdir)/$(TARGETLIB)
	$(RANLIB) $(libdir)/$(TARGETLIB)

.PHONY: mostlyclean clean distclean realclean
mostlyclean:
	rm -f *.o \#* core
clean: mostlyclean
	rm -f *.a
distclean: clean
	rm -f *~ config.status Makefile
realclean: distclean
	rm -f depend

force:

# with the gnu make, this is done automatically.

Makefile: $(srcdir)/Makefile.in $(host_makefile_frag) $(target_makefile_frag)
	$(SHELL) ./config.status

.NOEXPORT:
