%!PS-Adobe-1.0
%%Creator: vangogh.CS.Berkeley.EDU:mckusick (Kirk &,1614 Oxford St. Berkeley CA 94709-1608,510-642-7780,510-843-9542)
%%Title: stdin (ditroff)
%%CreationDate: Thu Jun 22 17:48:28 1995
%%EndComments
%	@(#)psdit.pro	1.6 11/6/90
% lib/psdit.pro -- prolog for psdit (ditroff) files
% Copyright (c) 1984, 1985 Adobe Systems Incorporated. All Rights Reserved.
% last edit: shore Sat Nov 23 20:28:03 1985
% RCSID: $Header: psdit.pro,v 2.1 85/11/24 12:19:43 shore Rel $

% Changed by Edward Wang (edward@ucbarpa.berkeley.edu) to handle graphics,
% 17 Feb, 87.

/$DITroff 140 dict def $DITroff begin
/fontnum 1 def /fontsize 10 def /fontheight 10 def /fontslant 0 def
/xi{0 72 11 mul translate 72 resolution div dup neg scale 0 0 moveto
 /fontnum 1 def /fontsize 10 def /fontheight 10 def /fontslant 0 def F}def
/PB{save /psv exch def currentpoint translate 
 resolution 72 div dup neg scale 0 0 moveto}def
/PE{psv restore}def
/arctoobig 90 def /arctoosmall .05 def
/m1 matrix def /m2 matrix def /m3 matrix def /oldmat matrix def
/tan{dup sin exch cos div}def
/point{resolution 72 div mul}def
/dround	{transform round exch round exch itransform}def
/xT{/devname exch def}def
/xr{/mh exch def /my exch def /resolution exch def}def
/xp{}def
/xs{docsave restore end}def
/xt{}def
/xf{/fontname exch def /slotno exch def fontnames slotno get fontname eq not
 {fonts slotno fontname findfont put fontnames slotno fontname put}if}def
/xH{/fontheight exch def F}def
/xS{/fontslant exch def F}def
/s{/fontsize exch def /fontheight fontsize def F}def
/f{/fontnum exch def F}def
/F{fontheight 0 le{/fontheight fontsize def}if
 fonts fontnum get fontsize point 0 0 fontheight point neg 0 0 m1 astore
 fontslant 0 ne{1 0 fontslant tan 1 0 0 m2 astore m3 concatmatrix}if
 makefont setfont .04 fontsize point mul 0 dround pop setlinewidth}def
/X{exch currentpoint exch pop moveto show}def
/N{3 1 roll moveto show}def
/Y{exch currentpoint pop exch moveto show}def
/S{show}def
/ditpush{}def/ditpop{}def
/AX{3 -1 roll currentpoint exch pop moveto 0 exch ashow}def
/AN{4 2 roll moveto 0 exch ashow}def
/AY{3 -1 roll currentpoint pop exch moveto 0 exch ashow}def
/AS{0 exch ashow}def
/MX{currentpoint exch pop moveto}def
/MY{currentpoint pop exch moveto}def
/MXY{moveto}def
/cb{pop}def	% action on unknown char -- nothing for now
/n{}def/w{}def
/p{pop showpage xi}def
/Dt{/Dlinewidth exch def}def 1 Dt
/Ds{/Ddash exch def}def -1 Ds
/i{/Dstipple exch def}def 1 i
/Dsetlinewidth{2 Dlinewidth mul setlinewidth}def
/Dsetdash{Ddash 4 eq{[8 12]}{Ddash 16 eq{[32 36]}
 {Ddash 20 eq{[32 12 8 12]}{[]}ifelse}ifelse}ifelse 0 setdash}def
/Dstroke{gsave Dsetlinewidth Dsetdash 1 setlinecap stroke grestore
 currentpoint newpath moveto}def
/Dl{rlineto Dstroke}def
/arcellipse{/diamv exch def /diamh exch def oldmat currentmatrix pop
 currentpoint translate 1 diamv diamh div scale /rad diamh 2 div def
 currentpoint exch rad add exch rad -180 180 arc oldmat setmatrix}def
/Dc{dup arcellipse Dstroke}def
/De{arcellipse Dstroke}def
/Da{/endv exch def /endh exch def /centerv exch def /centerh exch def
 /cradius centerv centerv mul centerh centerh mul add sqrt def
 /eradius endv endv mul endh endh mul add sqrt def
 /endang endv endh atan def
 /startang centerv neg centerh neg atan def
 /sweep startang endang sub dup 0 lt{360 add}if def
 sweep arctoobig gt
 {/midang startang sweep 2 div sub def /midrad cradius eradius add 2 div def
  /midh midang cos midrad mul def /midv midang sin midrad mul def
  midh neg midv neg endh endv centerh centerv midh midv Da
  Da}
 {sweep arctoosmall ge
  {/controldelt 1 sweep 2 div cos sub 3 sweep 2 div sin mul div 4 mul def
   centerv neg controldelt mul centerh controldelt mul
   endv neg controldelt mul centerh add endh add
   endh controldelt mul centerv add endv add
   centerh endh add centerv endv add rcurveto Dstroke}
  {centerh endh add centerv endv add rlineto Dstroke}
  ifelse}
 ifelse}def
/Dpatterns[
[%cf[widthbits]
[8<0000000000000010>]
[8<0411040040114000>]
[8<0204081020408001>]
[8<0000103810000000>]
[8<6699996666999966>]
[8<0000800100001008>]
[8<81c36666c3810000>]
[8<0f0e0c0800000000>]
[8<0000000000000010>]
[8<0411040040114000>]
[8<0204081020408001>]
[8<0000001038100000>]
[8<6699996666999966>]
[8<0000800100001008>]
[8<81c36666c3810000>]
[8<0f0e0c0800000000>]
[8<0042660000246600>]
[8<0000990000990000>]
[8<0804020180402010>]
[8<2418814242811824>]
[8<6699996666999966>]
[8<8000000008000000>]
[8<00001c3e363e1c00>]
[8<0000000000000000>]
[32<00000040000000c00000004000000040000000e0000000000000000000000000>]
[32<00000000000060000000900000002000000040000000f0000000000000000000>]
[32<000000000000000000e0000000100000006000000010000000e0000000000000>]
[32<00000000000000002000000060000000a0000000f00000002000000000000000>]
[32<0000000e0000000000000000000000000000000f000000080000000e00000001>]
[32<0000090000000600000000000000000000000000000007000000080000000e00>]
[32<00010000000200000004000000040000000000000000000000000000000f0000>]
[32<0900000006000000090000000600000000000000000000000000000006000000>]]
[%ug
[8<0000020000000000>]
[8<0000020000002000>]
[8<0004020000002000>]
[8<0004020000402000>]
[8<0004060000402000>]
[8<0004060000406000>]
[8<0006060000406000>]
[8<0006060000606000>]
[8<00060e0000606000>]
[8<00060e000060e000>]
[8<00070e000060e000>]
[8<00070e000070e000>]
[8<00070e020070e000>]
[8<00070e020070e020>]
[8<04070e020070e020>]
[8<04070e024070e020>]
[8<04070e064070e020>]
[8<04070e064070e060>]
[8<06070e064070e060>]
[8<06070e066070e060>]
[8<06070f066070e060>]
[8<06070f066070f060>]
[8<060f0f066070f060>]
[8<060f0f0660f0f060>]
[8<060f0f0760f0f060>]
[8<060f0f0760f0f070>]
[8<0e0f0f0760f0f070>]
[8<0e0f0f07e0f0f070>]
[8<0e0f0f0fe0f0f070>]
[8<0e0f0f0fe0f0f0f0>]
[8<0f0f0f0fe0f0f0f0>]
[8<0f0f0f0ff0f0f0f0>]
[8<1f0f0f0ff0f0f0f0>]
[8<1f0f0f0ff1f0f0f0>]
[8<1f0f0f8ff1f0f0f0>]
[8<1f0f0f8ff1f0f0f8>]
[8<9f0f0f8ff1f0f0f8>]
[8<9f0f0f8ff9f0f0f8>]
[8<9f0f0f9ff9f0f0f8>]
[8<9f0f0f9ff9f0f0f9>]
[8<9f8f0f9ff9f0f0f9>]
[8<9f8f0f9ff9f8f0f9>]
[8<9f8f1f9ff9f8f0f9>]
[8<9f8f1f9ff9f8f1f9>]
[8<bf8f1f9ff9f8f1f9>]
[8<bf8f1f9ffbf8f1f9>]
[8<bf8f1fdffbf8f1f9>]
[8<bf8f1fdffbf8f1fd>]
[8<ff8f1fdffbf8f1fd>]
[8<ff8f1fdffff8f1fd>]
[8<ff8f1ffffff8f1fd>]
[8<ff8f1ffffff8f1ff>]
[8<ff9f1ffffff8f1ff>]
[8<ff9f1ffffff9f1ff>]
[8<ff9f9ffffff9f1ff>]
[8<ff9f9ffffff9f9ff>]
[8<ffbf9ffffff9f9ff>]
[8<ffbf9ffffffbf9ff>]
[8<ffbfdffffffbf9ff>]
[8<ffbfdffffffbfdff>]
[8<ffffdffffffbfdff>]
[8<ffffdffffffffdff>]
[8<fffffffffffffdff>]
[8<ffffffffffffffff>]]
[%mg
[8<8000000000000000>]
[8<0822080080228000>]
[8<0204081020408001>]
[8<40e0400000000000>]
[8<66999966>]
[8<8001000010080000>]
[8<81c36666c3810000>]
[8<f0e0c08000000000>]
[16<07c00f801f003e007c00f800f001e003c007800f001f003e007c00f801f003e0>]
[16<1f000f8007c003e001f000f8007c003e001f800fc007e003f001f8007c003e00>]
[8<c3c300000000c3c3>]
[16<0040008001000200040008001000200040008000000100020004000800100020>]
[16<0040002000100008000400020001800040002000100008000400020001000080>]
[16<1fc03fe07df0f8f8f07de03fc01f800fc01fe03ff07df8f87df03fe01fc00f80>]
[8<80>]
[8<8040201000000000>]
[8<84cc000048cc0000>]
[8<9900009900000000>]
[8<08040201804020100800020180002010>]
[8<2418814242811824>]
[8<66999966>]
[8<8000000008000000>]
[8<70f8d8f870000000>]
[8<0814224180402010>]
[8<aa00440a11a04400>]
[8<018245aa45820100>]
[8<221c224180808041>]
[8<88000000>]
[8<0855800080550800>]
[8<2844004482440044>]
[8<0810204080412214>]
[8<00>]]]def
/Dfill{
 save 6 1 roll
 transform /maxy exch def /maxx exch def
 transform /miny exch def /minx exch def
 minx maxx gt{/minx maxx /maxx minx def def}if
 miny maxy gt{/miny maxy /maxy miny def def}if
 Dpatterns Dstipple 1 sub get exch 1 sub get
 aload pop /stip exch def /stipw exch def /stiph 128 def
 /imatrix[stipw 0 0 stiph 0 0]def
 /tmatrix[stipw 0 0 stiph 0 0]def
 /minx minx cvi stiph idiv stiph mul def
 /miny miny cvi stipw idiv stipw mul def
 eoclip 0 setgray
 miny stiph maxy{
  tmatrix exch 5 exch put
  minx stipw maxx{
   tmatrix exch 4 exch put tmatrix setmatrix
   stipw stiph true imatrix {stip} imagemask
  }for
 }for
 restore
}def
/Dp{Dfill Dstroke}def
/DP{Dfill currentpoint newpath moveto}def
end

/ditstart{$DITroff begin
 /nfonts 60 def			% NFONTS makedev/ditroff dependent!
 /fonts[nfonts{0}repeat]def
 /fontnames[nfonts{()}repeat]def
/docsave save def
}def

% character outcalls
/oc{
 /pswid exch def /cc exch def /name exch def
 /ditwid pswid fontsize mul resolution mul 72000 div def
 /ditsiz fontsize resolution mul 72 div def
 ocprocs name known{ocprocs name get exec}{name cb}ifelse
}def
/fractm [.65 0 0 .6 0 0] def
/fraction{
 /fden exch def /fnum exch def gsave /cf currentfont def
 cf fractm makefont setfont 0 .3 dm 2 copy neg rmoveto
 fnum show rmoveto currentfont cf setfont(\244)show setfont fden show 
 grestore ditwid 0 rmoveto
}def
/oce{grestore ditwid 0 rmoveto}def
/dm{ditsiz mul}def
/ocprocs 50 dict def ocprocs begin
(14){(1)(4)fraction}def
(12){(1)(2)fraction}def
(34){(3)(4)fraction}def
(13){(1)(3)fraction}def
(23){(2)(3)fraction}def
(18){(1)(8)fraction}def
(38){(3)(8)fraction}def
(58){(5)(8)fraction}def
(78){(7)(8)fraction}def
(sr){gsave 0 .06 dm rmoveto(\326)show oce}def
(is){gsave 0 .15 dm rmoveto(\362)show oce}def
(->){gsave 0 .02 dm rmoveto(\256)show oce}def
(<-){gsave 0 .02 dm rmoveto(\254)show oce}def
(==){gsave 0 .05 dm rmoveto(\272)show oce}def
(uc){gsave currentpoint 400 .009 dm mul add translate
     8 -8 scale ucseal oce}def
end

% an attempt at a PostScript FONT to implement ditroff special chars
% this will enable us to 
%	cache the little buggers
%	generate faster, more compact PS out of psdit
%	confuse everyone (including myself)!
50 dict dup begin
/FontType 3 def
/FontName /DIThacks def
/FontMatrix [.001 0 0 .001 0 0] def
/FontBBox [-260 -260 900 900] def% a lie but ...
/Encoding 256 array def
0 1 255{Encoding exch /.notdef put}for
Encoding
 dup 8#040/space put %space
 dup 8#110/rc put %right ceil
 dup 8#111/lt put %left  top curl
 dup 8#112/bv put %bold vert
 dup 8#113/lk put %left  mid curl
 dup 8#114/lb put %left  bot curl
 dup 8#115/rt put %right top curl
 dup 8#116/rk put %right mid curl
 dup 8#117/rb put %right bot curl
 dup 8#120/rf put %right floor
 dup 8#121/lf put %left  floor
 dup 8#122/lc put %left  ceil
 dup 8#140/sq put %square
 dup 8#141/bx put %box
 dup 8#142/ci put %circle
 dup 8#143/br put %box rule
 dup 8#144/rn put %root extender
 dup 8#145/vr put %vertical rule
 dup 8#146/ob put %outline bullet
 dup 8#147/bu put %bullet
 dup 8#150/ru put %rule
 dup 8#151/ul put %underline
 pop
/DITfd 100 dict def
/BuildChar{0 begin
 /cc exch def /fd exch def
 /charname fd /Encoding get cc get def
 /charwid fd /Metrics get charname get def
 /charproc fd /CharProcs get charname get def
 charwid 0 fd /FontBBox get aload pop setcachedevice
 2 setlinejoin 40 setlinewidth
 newpath 0 0 moveto gsave charproc grestore
 end}def
/BuildChar load 0 DITfd put
/CharProcs 50 dict def
CharProcs begin
/space{}def
/.notdef{}def
/ru{500 0 rls}def
/rn{0 840 moveto 500 0 rls}def
/vr{0 800 moveto 0 -770 rls}def
/bv{0 800 moveto 0 -1000 rls}def
/br{0 840 moveto 0 -1000 rls}def
/ul{0 -140 moveto 500 0 rls}def
/ob{200 250 rmoveto currentpoint newpath 200 0 360 arc closepath stroke}def
/bu{200 250 rmoveto currentpoint newpath 200 0 360 arc closepath fill}def
/sq{80 0 rmoveto currentpoint dround newpath moveto
    640 0 rlineto 0 640 rlineto -640 0 rlineto closepath stroke}def
/bx{80 0 rmoveto currentpoint dround newpath moveto
    640 0 rlineto 0 640 rlineto -640 0 rlineto closepath fill}def
/ci{500 360 rmoveto currentpoint newpath 333 0 360 arc
    50 setlinewidth stroke}def

/lt{0 -200 moveto 0 550 rlineto currx 800 2cx s4 add exch s4 a4p stroke}def
/lb{0 800 moveto 0 -550 rlineto currx -200 2cx s4 add exch s4 a4p stroke}def
/rt{0 -200 moveto 0 550 rlineto currx 800 2cx s4 sub exch s4 a4p stroke}def
/rb{0 800 moveto 0 -500 rlineto currx -200 2cx s4 sub exch s4 a4p stroke}def
/lk{0 800 moveto 0 300 -300 300 s4 arcto pop pop 1000 sub
    0 300 4 2 roll s4 a4p 0 -200 lineto stroke}def
/rk{0 800 moveto 0 300 s2 300 s4 arcto pop pop 1000 sub
    0 300 4 2 roll s4 a4p 0 -200 lineto stroke}def
/lf{0 800 moveto 0 -1000 rlineto s4 0 rls}def
/rf{0 800 moveto 0 -1000 rlineto s4 neg 0 rls}def
/lc{0 -200 moveto 0 1000 rlineto s4 0 rls}def
/rc{0 -200 moveto 0 1000 rlineto s4 neg 0 rls}def
end

/Metrics 50 dict def Metrics begin
/.notdef 0 def
/space 500 def
/ru 500 def
/br 0 def
/lt 416 def
/lb 416 def
/rt 416 def
/rb 416 def
/lk 416 def
/rk 416 def
/rc 416 def
/lc 416 def
/rf 416 def
/lf 416 def
/bv 416 def
/ob 350 def
/bu 350 def
/ci 750 def
/bx 750 def
/sq 750 def
/rn 500 def
/ul 500 def
/vr 0 def
end

DITfd begin
/s2 500 def /s4 250 def /s3 333 def
/a4p{arcto pop pop pop pop}def
/2cx{2 copy exch}def
/rls{rlineto stroke}def
/currx{currentpoint pop}def
/dround{transform round exch round exch itransform} def
end
end
/DIThacks exch definefont pop
ditstart
(psc)xT
576 1 1 xr
1(Times-Roman)xf 1 f
2(Times-Italic)xf 2 f
3(Times-Bold)xf 3 f
4(Times-BoldItalic)xf 4 f
5(Helvetica)xf 5 f
6(Helvetica-Bold)xf 6 f
7(Courier)xf 7 f
8(Courier-Bold)xf 8 f
9(Symbol)xf 9 f
10(DIThacks)xf 10 f
10 s
1 f
xi
%%EndProlog

%%Page: 1 1
10 s 10 xH 0 xS 1 f 1 i
8 s
3 f
12 s
1067 984(An)N
1213(Advanced)X
1647(4.4BSD)X
1977(Interprocess)X
2513(Communication)X
3198(Tutorial)X
2 f
10 s
2033 1176(Samuel)N
2289(J.)X
2365(Lef\257er)X
2047 1320(Robert)N
2285(S.)X
2365(Fabry)X
2065 1464(William)N
2338(N.)X
2431(Joy)X
2103 1608(Phil)N
2256(Lapsley)X
1 f
1731 1752(Computer)N
2071(Systems)X
2357(Research)X
2672(Group)X
1328 1848(Department)N
1727(of)X
1814(Electrical)X
2142(Engineering)X
2554(and)X
2690(Computer)X
3030(Science)X
1754 1944(University)N
2112(of)X
2199(California,)X
2564(Berkeley)X
1856 2040(Berkeley,)N
2186(California)X
2551(94720)X
2 f
2109 2328(Steve)N
2299(Miller)X
2112 2472(Chris)N
2309(Torek)X
1 f
1731 2616(Heterogeneous)N
2233(Systems)X
2519(Laboratory)X
1766 2712(Department)N
2165(of)X
2252(Computer)X
2592(Science)X
1697 2808(University)N
2055(of)X
2142(Maryland,)X
2494(College)X
2763(Park)X
1810 2904(College)N
2079(Park,)X
2266(Maryland)X
2598(20742)X
2 f
2115 3192(ABSTRACT)N
1 f
1064 3412(This)N
1232(document)X
1574(provides)X
1877(an)X
1980(introduction)X
2398(to)X
2487(the)X
2612(interprocess)X
3027(communication)X
3552(facili-)X
864 3508(ties)N
995(included)X
1291(in)X
1373(the)X
1491(4.4BSD)X
1766(release)X
2010(of)X
2097(the)X
2215(UNIX*)X
2476(system.)X
1064 3632(It)N
1141(discusses)X
1467(the)X
1593(overall)X
1844(model)X
2072(for)X
2194(interprocess)X
2611(communication)X
3138(and)X
3283(introduces)X
3646(the)X
864 3728(interprocess)N
1296(communication)X
1837(primitives)X
2204(which)X
2443(have)X
2638(been)X
2833(added)X
3068(to)X
3173(the)X
3314(system.)X
3619(The)X
864 3824(majority)N
1167(of)X
1266(the)X
1396(document)X
1744(considers)X
2079(the)X
2209(use)X
2348(of)X
2447(these)X
2644(primitives)X
3001(in)X
3096(developing)X
3485(applica-)X
864 3920(tions.)N
1092(The)X
1250(reader)X
1485(is)X
1571(expected)X
1890(to)X
1985(be)X
2094(familiar)X
2381(with)X
2556(the)X
2687(C)X
2773(programming)X
3242(language)X
3565(as)X
3664(all)X
864 4016(examples)N
1187(are)X
1306(written)X
1553(in)X
1635(C.)X
8 s
10 f
576 5584(hhhhhhhhhhhhhhhhhh)N
1 f
576 5664(*)N
6 s
620(UNIX)X
8 s
757(is)X
816(a)X
860(trademark)X
1134(of)X
1203(UNIX)X
1378(System)X
1583(Laboratories,)X
1937(Inc.)X
2066(in)X
2132(the)X
2226(US)X
2324(and)X
2432(some)X
2583(other)X
2730(countries.)X

2 p
%%Page: 2 2
8 s 8 xH 0 xS 1 f 1 i
10 s
576 384(PSD:21-2)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
3 f
12 s
1873 672(1.)N
1969(INTRODUCTION)X
1 f
10 s
576 960(One)N
731(of)X
819(the)X
938(most)X
1114(important)X
1446(additions)X
1760(to)X
1843(UNIX)X
2065(in)X
2148(4.2BSD)X
2425(was)X
2572(interprocess)X
2982(communication.)X
3542(These)X
3756(facilities)X
576 1056(were)N
754(the)X
873(result)X
1072(of)X
1159(more)X
1344(than)X
1502(two)X
1642(years)X
1832(of)X
1919(discussion)X
2272(and)X
2408(research.)X
2737(The)X
2882(facilities)X
3178(provided)X
3483(in)X
3565(4.2BSD)X
3840(incor-)X
576 1152(porated)N
840(many)X
1041(of)X
1131(the)X
1252(ideas)X
1440(from)X
1619(current)X
1870(research,)X
2182(while)X
2384(trying)X
2599(to)X
2685(maintain)X
2989(the)X
3111(UNIX)X
3336(philosophy)X
3715(of)X
3806(simpli-)X
576 1248(city)N
726(and)X
872(conciseness.)X
1321(The)X
1475(4.3BSD)X
1759(release)X
2012(of)X
2108(Berkeley)X
2427(UNIX)X
2657(improved)X
2993(upon)X
3182(some)X
3380(of)X
3476(the)X
3603(IPC)X
3756(facilities)X
576 1344(while)N
775(providing)X
1107(an)X
1204(upward-compatible)X
1849(interface.)X
2192(4.4BSD)X
2468(adds)X
2636(support)X
2897(for)X
3012(ISO)X
3162(protocols)X
3481(and)X
3619(IP)X
3712(multicast-)X
576 1440(ing.)N
738(The)X
883(BSD)X
1058(interprocess)X
1466(communication)X
1984(facilities)X
2280(have)X
2452(become)X
2722(a)X
2778(defacto)X
3035(standard)X
3327(for)X
3441(UNIX.)X
776 1564(UNIX)N
999(has)X
1128(previously)X
1488(been)X
1663(very)X
1829(weak)X
2022(in)X
2107(the)X
2228(area)X
2386(of)X
2476(interprocess)X
2887(communication.)X
3448(Prior)X
3631(to)X
3716(the)X
3837(4BSD)X
576 1660(facilities,)N
895(the)X
1016(only)X
1181(standard)X
1476(mechanism)X
1864(which)X
2083(allowed)X
2360(two)X
2503(processes)X
2834(to)X
2919(communicate)X
3373(were)X
3552(pipes)X
3743(\(the)X
3890(mpx)X
576 1756(\256les)N
731(which)X
949(were)X
1128(part)X
1275(of)X
1364(Version)X
1640(7)X
1702(were)X
1881(experimental\).)X
2389(Unfortunately,)X
2882(pipes)X
3074(are)X
3196(very)X
3362(restrictive)X
3706(in)X
3791(that)X
3934(the)X
576 1852(two)N
718(communicating)X
1238(processes)X
1568(must)X
1745(be)X
1843(related)X
2084(through)X
2355(a)X
2412(common)X
2713(ancestor.)X
3042(Further,)X
3319(the)X
3438(semantics)X
3775(of)X
3863(pipes)X
576 1948(makes)N
801(them)X
981(almost)X
1214(impossible)X
1580(to)X
1662(maintain)X
1962(in)X
2044(a)X
2100(distributed)X
2462(environment.)X
776 2072(Earlier)N
1016(attempts)X
1308(at)X
1387(extending)X
1724(the)X
1843(IPC)X
1988(facilities)X
2285(of)X
2373(UNIX)X
2595(have)X
2768(met)X
2909(with)X
3072(mixed)X
3293(reaction.)X
3614(The)X
3761(majority)X
576 2168(of)N
670(the)X
795(problems)X
1120(have)X
1299(been)X
1478(related)X
1723(to)X
1811(the)X
1935(fact)X
2082(that)X
2228(these)X
2419(facilities)X
2721(have)X
2899(been)X
3077(tied)X
3223(to)X
3311(the)X
3435(UNIX)X
3662(\256le)X
3790(system,)X
576 2264(either)N
797(through)X
1084(naming)X
1362(or)X
1467(implementation.)X
2047(Consequently,)X
2545(the)X
2681(IPC)X
2843(facilities)X
3157(provided)X
3480(in)X
3581(4.2BSD)X
3875(were)X
576 2360(designed)N
883(as)X
972(a)X
1030(totally)X
1256(independent)X
1670(subsystem.)X
2065(The)X
2212(BSD)X
2389(IPC)X
2535(allows)X
2766(processes)X
3095(to)X
3178(rendezvous)X
3565(in)X
3648(many)X
3847(ways.)X
576 2456(Processes)N
911(may)X
1072(rendezvous)X
1461(through)X
1733(a)X
1792(UNIX)X
2016(\256le)X
2141(system-like)X
2533(name)X
2730(space)X
2932(\(a)X
3018(space)X
3220(where)X
3440(all)X
3543(names)X
3771(are)X
3894(path)X
576 2552(names\))N
831(as)X
921(well)X
1082(as)X
1172(through)X
1444(a)X
1503(network)X
1789(name)X
1986(space.)X
2228(In)X
2318(fact,)X
2482(new)X
2638(name)X
2834(spaces)X
3066(may)X
3226(be)X
3324(added)X
3538(at)X
3618(a)X
3676(future)X
3890(time)X
576 2648(with)N
750(only)X
924(minor)X
1147(changes)X
1438(visible)X
1684(to)X
1779(users.)X
2017(Further,)X
2306(the)X
2437(communication)X
2968(facilities)X
3277(have)X
3462(been)X
3647(extended)X
3970(to)X
576 2744(include)N
840(more)X
1033(than)X
1199(the)X
1325(simple)X
1566(byte)X
1732(stream)X
1974(provided)X
2287(by)X
2395(a)X
2459(pipe.)X
2665(These)X
2885(extensions)X
3251(have)X
3431(resulted)X
3713(in)X
3803(a)X
3867(com-)X
576 2840(pletely)N
814(new)X
968(part)X
1113(of)X
1200(the)X
1318(system)X
1561(which)X
1778(users)X
1964(will)X
2109(need)X
2282(time)X
2445(to)X
2528(familiarize)X
2897(themselves)X
3274(with.)X
3477(It)X
3547(is)X
3621(likely)X
3824(that)X
3965(as)X
576 2936(more)N
761(use)X
888(is)X
961(made)X
1155(of)X
1242(these)X
1427(facilities)X
1723(they)X
1881(will)X
2025(be)X
2121(re\256ned;)X
2386(only)X
2548(time)X
2710(will)X
2854(tell.)X
776 3060(This)N
943(document)X
1284(provides)X
1585(a)X
1646(high-level)X
1996(description)X
2378(of)X
2471(the)X
2595(IPC)X
2745(facilities)X
3047(in)X
3135(4.4BSD)X
3416(and)X
3558(their)X
3731(use.)X
3904(It)X
3979(is)X
576 3156(designed)N
884(to)X
969(complement)X
1388(the)X
1509(manual)X
1768(pages)X
1974(for)X
2091(the)X
2212(IPC)X
2359(primitives)X
2705(by)X
2807(examples)X
3132(of)X
3221(their)X
3390(use.)X
3559(The)X
3706(remainder)X
576 3252(of)N
671(this)X
814(document)X
1158(is)X
1239(organized)X
1584(in)X
1674(four)X
1836(sections.)X
2142(Section)X
2410(2)X
2478(introduces)X
2840(the)X
2966(IPC-related)X
3364(system)X
3614(calls)X
3789(and)X
3934(the)X
576 3348(basic)N
764(model)X
987(of)X
1076(communication.)X
1636(Section)X
1898(3)X
1960(describes)X
2281(some)X
2472(of)X
2561(the)X
2681(supporting)X
3045(library)X
3281(routines)X
3561(users)X
3748(may)X
3908(\256nd)X
576 3444(useful)N
795(in)X
880(constructing)X
1299(distributed)X
1664(applications.)X
2114(Section)X
2377(4)X
2440(is)X
2516(concerned)X
2870(with)X
3035(the)X
3156(client/server)X
3576(model)X
3799(used)X
3970(in)X
576 3540(developing)N
962(applications)X
1379(and)X
1525(includes)X
1822(examples)X
2155(of)X
2252(the)X
2380(two)X
2529(major)X
2745(types)X
2943(of)X
3039(servers.)X
3336(Section)X
3605(5)X
3674(delves)X
3908(into)X
576 3636(advanced)N
900(topics)X
1111(which)X
1327(sophisticated)X
1765(users)X
1950(are)X
2069(likely)X
2271(to)X
2353(encounter)X
2690(when)X
2884(using)X
3077(the)X
3195(IPC)X
3339(facilities.)X
3 f
12 s
2083 3924(2.)N
2179(BASICS)X
1 f
10 s
776 4240(The)N
921(basic)X
1106(building)X
1392(block)X
1590(for)X
1704(communication)X
2222(is)X
2295(the)X
2 f
2413(socket)X
1 f
2614(.)X
2674(A)X
2752(socket)X
2977(is)X
3050(an)X
3146(endpoint)X
3446(of)X
3534(communication)X
576 4336(to)N
670(which)X
898(a)X
966(name)X
1172(may)X
1342(be)X
2 f
1450(bound)X
1 f
(.)S
1722(Each)X
1915(socket)X
2152(in)X
2246(use)X
2385(has)X
2523(a)X
2 f
2590(type)X
1 f
2755(and)X
2902(one)X
3049(or)X
3147(more)X
3343(associated)X
3704(processes.)X
576 4432(Sockets)N
857(exist)X
1040(within)X
2 f
1276(communication)X
1802(domains)X
1 f
2073(.)X
2125(A)X
2215(communication)X
2745(domain)X
3017(is)X
3102(an)X
3210(abstraction)X
3594(introduced)X
3970(to)X
576 4528(bundle)N
817(common)X
1120(properties)X
1464(of)X
1554(processes)X
1885(communicating)X
2406(through)X
2678(sockets.)X
2977(One)X
3133(such)X
3302(property)X
3596(is)X
3671(the)X
3791(scheme)X
576 4624(used)N
749(to)X
837(name)X
1038(sockets.)X
1341(For)X
1479(example,)X
1798(in)X
1887(the)X
2012(UNIX)X
2240(communication)X
2765(domain)X
3032(sockets)X
3295(are)X
3421(named)X
3662(with)X
3831(UNIX)X
576 4720(path)N
735(names;)X
983(e.g.)X
1120(a)X
1177(socket)X
1403(may)X
1562(be)X
1659(named)X
1894(``/dev/foo''.)X
2330(Sockets)X
2600(normally)X
2910(exchange)X
3235(data)X
3390(only)X
3552(with)X
3714(sockets)X
3970(in)X
576 4816(the)N
701(same)X
893(domain)X
1160(\(it)X
1259(may)X
1425(be)X
1529(possible)X
1819(to)X
1909(cross)X
2102(domain)X
2370(boundaries,)X
2770(but)X
2900(only)X
3070(if)X
3147(some)X
3344(translation)X
3710(process)X
3979(is)X
576 4912(performed\).)N
1002(The)X
1151(4.4BSD)X
1430(IPC)X
1578(facilities)X
1878(support)X
2142(four)X
2300(separate)X
2588(communication)X
3110(domains:)X
3427(the)X
3548(UNIX)X
3772(domain,)X
576 5008(for)N
694(on-system)X
1047(communication;)X
1591(the)X
1713(Internet)X
1987(domain,)X
2272(which)X
2493(is)X
2571(used)X
2743(by)X
2848(processes)X
3181(which)X
3402(communicate)X
3859(using)X
576 5104(the)N
704(Internet)X
984(standard)X
1286(communication)X
1814(protocols;)X
2164(the)X
2292(NS)X
2424(domain,)X
2713(which)X
2938(is)X
3020(used)X
3196(by)X
3305(processes)X
3642(which)X
3867(com-)X
576 5200(municate)N
896(using)X
1095(the)X
1219(Xerox)X
1446(standard)X
1744(communication)X
2269(protocols*;)X
2656(and)X
2799(the)X
2924(ISO)X
3080(OSI)X
3236(protocols,)X
3581(which)X
3804(are)X
3930(not)X
576 5296(documented)N
998(in)X
1090(this)X
1235(tutorial.)X
1536(The)X
1690(underlying)X
2066(communication)X
2593(facilities)X
2898(provided)X
3212(by)X
3321(these)X
3515(domains)X
3815(have)X
3996(a)X
576 5392(signi\256cant)N
943(in\257uence)X
1271(on)X
1385(the)X
1518(internal)X
1798(system)X
2055(implementation)X
2592(as)X
2694(well)X
2867(as)X
2969(the)X
3102(interface)X
3419(to)X
3516(socket)X
3756(facilities)X
8 s
10 f
576 5472(hhhhhhhhhhhhhhhhhh)N
1 f
576 5552(*)N
629(See)X
2 f
742(Internet)X
965(Transport)X
1243(Protocols)X
1 f
1492(,)X
1529(Xerox)X
1709(System)X
1919(Integration)X
2220(Standard)X
2468(\(XSIS\)028112)X
2862(for)X
2957(more)X
3109(information.)X
3464(This)X
3599(docu-)X
576 5632(ment)N
720(is)X
779(almost)X
966(a)X
1010(necessity)X
1260(for)X
1350(one)X
1458(trying)X
1627(to)X
1693(write)X
1840(NS)X
1938(applications.)X

3 p
%%Page: 3 3
8 s 8 xH 0 xS 1 f 1 i
10 s
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3717(PSD:21-3)X
576 672(available)N
889(to)X
974(a)X
1033(user.)X
1230(An)X
1351(example)X
1646(of)X
1736(the)X
1857(latter)X
2045(is)X
2121(that)X
2264(a)X
2323(socket)X
2551(``operating'')X
2985(in)X
3070(the)X
3191(UNIX)X
3415(domain)X
3678(sees)X
3835(a)X
3894(sub-)X
576 768(set)N
685(of)X
772(the)X
890(error)X
1067(conditions)X
1420(which)X
1636(are)X
1755(possible)X
2037(when)X
2231(operating)X
2554(in)X
2636(the)X
2754(Internet)X
3024(\(or)X
3138(NS\))X
3287(domain.)X
3 f
576 960(2.1.)N
736(Socket)X
983(types)X
1 f
776 1084(Sockets)N
1067(are)X
1209(typed)X
1430(according)X
1790(to)X
1895(the)X
2036(communication)X
2577(properties)X
2941(visible)X
3197(to)X
3302(a)X
3381(user.)X
3578(Processes)X
3933(are)X
576 1180(presumed)N
914(to)X
1002(communicate)X
1460(only)X
1628(between)X
1922(sockets)X
2184(of)X
2277(the)X
2401(same)X
2592(type,)X
2776(although)X
3082(there)X
3268(is)X
3346(nothing)X
3615(that)X
3760(prevents)X
576 1276(communication)N
1096(between)X
1386(sockets)X
1644(of)X
1733(different)X
2032(types)X
2223(should)X
2459(the)X
2580(underlying)X
2950(communication)X
3471(protocols)X
3792(support)X
576 1372(this.)N
776 1496(Four)N
957(types)X
1156(of)X
1253(sockets)X
1519(currently)X
1839(are)X
1968(available)X
2288(to)X
2380(a)X
2446(user.)X
2650(A)X
2 f
2738(stream)X
1 f
2986(socket)X
3221(provides)X
3528(for)X
3653(the)X
3782(bidirec-)X
576 1592(tional,)N
816(reliable,)X
1114(sequenced,)X
1506(and)X
1659(unduplicated)X
2110(\257ow)X
2289(of)X
2393(data)X
2564(without)X
2845(record)X
3088(boundaries.)X
3517(Aside)X
3741(from)X
3934(the)X
576 1688(bidirectionality)N
1093(of)X
1188(data)X
1350(\257ow,)X
1540(a)X
1604(pair)X
1757(of)X
1852(connected)X
2206(stream)X
2449(sockets)X
2714(provides)X
3019(an)X
3124(interface)X
3435(nearly)X
3665(identical)X
3970(to)X
576 1784(that)N
716(of)X
803(pipes\262.)X
776 1908(A)N
2 f
859(datagram)X
1 f
1195(socket)X
1425(supports)X
1722(bidirectional)X
2153(\257ow)X
2321(of)X
2414(data)X
2574(which)X
2796(is)X
2875(not)X
3003(promised)X
3327(to)X
3415(be)X
3517(sequenced,)X
3898(reli-)X
576 2004(able,)N
751(or)X
839(unduplicated.)X
1294(That)X
1462(is,)X
1556(a)X
1613(process)X
1874(receiving)X
2193(messages)X
2516(on)X
2616(a)X
2672(datagram)X
2991(socket)X
3216(may)X
3374(\256nd)X
3518(messages)X
3841(dupli-)X
576 2100(cated,)N
790(and,)X
950(possibly,)X
1260(in)X
1346(an)X
1447(order)X
1642(different)X
1944(from)X
2125(the)X
2248(order)X
2443(in)X
2530(which)X
2751(it)X
2820(was)X
2970(sent.)X
3144(An)X
3267(important)X
3603(characteristic)X
576 2196(of)N
668(a)X
729(datagram)X
1053(socket)X
1283(is)X
1361(that)X
1506(record)X
1737(boundaries)X
2114(in)X
2200(data)X
2358(are)X
2481(preserved.)X
2858(Datagram)X
3199(sockets)X
3459(closely)X
3710(model)X
3934(the)X
576 2292(facilities)N
872(found)X
1079(in)X
1161(many)X
1359(contemporary)X
1825(packet)X
2055(switched)X
2360(networks)X
2674(such)X
2841(as)X
2928(the)X
3046(Ethernet.)X
776 2416(A)N
2 f
855(raw)X
1 f
1000(socket)X
1226(provides)X
1523(users)X
1709(access)X
1936(to)X
2019(the)X
2138(underlying)X
2507(communication)X
3027(protocols)X
3347(which)X
3565(support)X
3827(socket)X
576 2512(abstractions.)N
1026(These)X
1245(sockets)X
1508(are)X
1634(normally)X
1950(datagram)X
2276(oriented,)X
2585(though)X
2833(their)X
3006(exact)X
3202(characteristics)X
3688(are)X
3813(depen-)X
576 2608(dent)N
743(on)X
852(the)X
979(interface)X
1290(provided)X
1604(by)X
1714(the)X
1842(protocol.)X
2179(Raw)X
2356(sockets)X
2622(are)X
2751(not)X
2883(intended)X
3189(for)X
3313(the)X
3441(general)X
3708(user;)X
3894(they)X
576 2704(have)N
750(been)X
924(provided)X
1231(mainly)X
1475(for)X
1591(those)X
1782(interested)X
2116(in)X
2199(developing)X
2576(new)X
2731(communication)X
3250(protocols,)X
3589(or)X
3677(for)X
3792(gaining)X
576 2800(access)N
804(to)X
888(some)X
1079(of)X
1168(the)X
1288(more)X
1475(esoteric)X
1747(facilities)X
2045(of)X
2134(an)X
2232(existing)X
2507(protocol.)X
2837(The)X
2985(use)X
3115(of)X
3205(raw)X
3349(sockets)X
3608(is)X
3684(considered)X
576 2896(in)N
658(section)X
905(5.)X
776 3020(A)N
2 f
861(sequenced)X
1223(packet)X
1 f
1460(socket)X
1692(is)X
1772(similar)X
2021(to)X
2110(a)X
2173(stream)X
2414(socket,)X
2666(with)X
2835(the)X
2960(exception)X
3299(that)X
3446(record)X
3680(boundaries)X
576 3116(are)N
697(preserved.)X
1071(This)X
1234(interface)X
1537(is)X
1611(provided)X
1917(only)X
2080(as)X
2168(part)X
2314(of)X
2402(the)X
2521(NS)X
2644(socket)X
2870(abstraction,)X
3263(and)X
3400(is)X
3474(very)X
3638(important)X
3970(in)X
576 3212(most)N
764(serious)X
1024(NS)X
1159(applications.)X
1619 0.2083(Sequenced-packet)AX
2237(sockets)X
2506(allow)X
2718(the)X
2850(user)X
3018(to)X
3114(manipulate)X
3504(the)X
3636(SPP)X
3802(or)X
3903(IDP)X
576 3308(headers)N
845(on)X
948(a)X
1007(packet)X
1240(or)X
1330(a)X
1389(group)X
1599(of)X
1689(packets)X
1953(either)X
2159(by)X
2262(writing)X
2516(a)X
2575(prototype)X
2905(header)X
3142(along)X
3342(with)X
3506(whatever)X
3823(data)X
3979(is)X
576 3404(to)N
670(be)X
778(sent,)X
959(or)X
1058(by)X
1170(specifying)X
1536(a)X
1604(default)X
1859(header)X
2106(to)X
2200(be)X
2309(used)X
2489(with)X
2664(all)X
2777(outgoing)X
3094(data,)X
3281(and)X
3430(allows)X
3672(the)X
3803(user)X
3970(to)X
576 3500(receive)N
829(the)X
947(headers)X
1213(on)X
1313(incoming)X
1635(packets.)X
1936(The)X
2081(use)X
2208(of)X
2295(these)X
2480(options)X
2735(is)X
2808(considered)X
3176(in)X
3258(section)X
3505(5.)X
776 3624(Another)N
1075(potential)X
1391(socket)X
1632(type)X
1806(which)X
2038(has)X
2181(interesting)X
2555(properties)X
2913(is)X
3003(the)X
2 f
3138(reliably)X
3424(delivered)X
3760(message)X
1 f
576 3720(socket.)N
842(The)X
988(reliably)X
1254(delivered)X
1574(message)X
1867(socket)X
2093(has)X
2221(similar)X
2464(properties)X
2805(to)X
2887(a)X
2943(datagram)X
3262(socket,)X
3507(but)X
3629(with)X
3791(reliable)X
576 3816(delivery.)N
906(There)X
1121(is)X
1201(currently)X
1518(no)X
1625(support)X
1892(for)X
2014(this)X
2157(type)X
2323(of)X
2418(socket,)X
2671(but)X
2801(a)X
2865(reliably)X
3138(delivered)X
3465(message)X
3765(protocol)X
576 3912(similar)N
821(to)X
906(Xerox's)X
1188(Packet)X
1425(Exchange)X
1765(Protocol)X
2059(\(PEX\))X
2287(may)X
2448(be)X
2547(simulated)X
2881(at)X
2962(the)X
3083(user)X
3240(level.)X
3458(More)X
3654(information)X
576 4008(on)N
676(this)X
811(topic)X
991(can)X
1123(be)X
1219(found)X
1426(in)X
1508(section)X
1755(5.)X
3 f
576 4200(2.2.)N
736(Socket)X
983(creation)X
1 f
776 4324(To)N
885(create)X
1098(a)X
1154(socket)X
1379(the)X
2 f
1497(socket)X
1 f
1718(system)X
1960(call)X
2096(is)X
2169(used:)X
864 4468(s)N
915(=)X
980(socket\(domain,)X
1492(type,)X
1670(protocol\);)X
576 4612(This)N
741(call)X
880(requests)X
1166(that)X
1309(the)X
1430(system)X
1675(create)X
1891(a)X
1950(socket)X
2179(in)X
2265(the)X
2387(speci\256ed)X
2 f
2696(domain)X
1 f
2960(and)X
3100(of)X
3191(the)X
3313(speci\256ed)X
2 f
3622(type)X
1 f
3756(.)X
3820(A)X
3902(par-)X
576 4708(ticular)N
810(protocol)X
1106(may)X
1273(also)X
1431(be)X
1536(requested.)X
1913(If)X
1996(the)X
2123(protocol)X
2419(is)X
2501(left)X
2636(unspeci\256ed)X
3029(\(a)X
3120(value)X
3322(of)X
3417(0\),)X
3532(the)X
3658(system)X
3908(will)X
576 4804(select)N
782(an)X
881(appropriate)X
1270(protocol)X
1560(from)X
1739(those)X
1931(protocols)X
2252(which)X
2471(comprise)X
2788(the)X
2910(communication)X
3432(domain)X
3696(and)X
3836(which)X
576 4900(may)N
750(be)X
862(used)X
1045(to)X
1143(support)X
1419(the)X
1553(requested)X
1897(socket)X
2138(type.)X
2352(The)X
2513(user)X
2683(is)X
2772(returned)X
3076(a)X
3147(descriptor)X
3503(\(a)X
3601(small)X
3809(integer)X
576 4996(number\))N
869(which)X
1086(may)X
1245(be)X
1342(used)X
1510(in)X
1593(later)X
1757(system)X
2000(calls)X
2168(which)X
2385(operate)X
2643(on)X
2744(sockets.)X
3041(The)X
3187(domain)X
3448(is)X
3522(speci\256ed)X
3828(as)X
3916(one)X
576 5092(of)N
686(the)X
827(manifest)X
1146(constants)X
1487(de\256ned)X
1766(in)X
1871(the)X
2012(\256le)X
2157(<)X
2 f
2202(sys/socket.h)X
1 f
2583(>.)X
2711(For)X
2865(the)X
3005(UNIX)X
3248(domain)X
3530(the)X
3670(constant)X
3979(is)X
576 5188(AF_UNIX*;)N
1022(for)X
1137(the)X
1256(Internet)X
1527(domain)X
1788(AF_INET;)X
2156(and)X
2293(for)X
2408(the)X
2527(NS)X
2650(domain,)X
2931(AF_NS.)X
3217(The)X
3364(socket)X
3591(types)X
3782(are)X
3903(also)X
8 s
10 f
576 5268(hhhhhhhhhhhhhhhhhh)N
1 f
576 5348(\262)N
625(In)X
695(the)X
790(UNIX)X
966(domain,)X
1191(in)X
1258(fact,)X
1386(the)X
1481(semantics)X
1750(are)X
1844(identical)X
2081(and,)X
2206(as)X
2276(one)X
2385(might)X
2552(expect,)X
2751(pipes)X
2903(have)X
3040(been)X
3177(implemented)X
3528(internal-)X
576 5428(ly)N
642(as)X
711(simply)X
902(a)X
946(pair)X
1061(of)X
1130(connected)X
1404(stream)X
1590(sockets.)X
576 5508(*)N
624(The)X
739(manifest)X
975(constants)X
1229(are)X
1322(named)X
1508(AF_whatever)X
1871(as)X
1940(they)X
2066(indicate)X
2284(the)X
2378(``address)X
2627(format'')X
2855(to)X
2921(use)X
3022(in)X
3088(interpreting)X
3402(names.)X

4 p
%%Page: 4 4
8 s 8 xH 0 xS 1 f 1 i
10 s
576 384(PSD:21-4)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
576 672(de\256ned)N
833(in)X
916(this)X
1052(\256le)X
1175(and)X
1312(one)X
1449(of)X
1537(SOCK_STREAM,)X
2155(SOCK_DGRAM,)X
2747(SOCK_RAW,)X
3228(or)X
3317(SOCK_SEQPACKET)X
576 768(must)N
751(be)X
847(speci\256ed.)X
1192(To)X
1301(create)X
1514(a)X
1570(stream)X
1804(socket)X
2029(in)X
2111(the)X
2229(Internet)X
2499(domain)X
2759(the)X
2877(following)X
3208(call)X
3344(might)X
3550(be)X
3646(used:)X
864 912(s)N
915(=)X
980(socket\(AF_INET,)X
1577(SOCK_STREAM,)X
2194(0\);)X
576 1056(This)N
748(call)X
894(would)X
1124(result)X
1332(in)X
1424(a)X
1490(stream)X
1734(socket)X
1969(being)X
2177(created)X
2440(with)X
2612(the)X
2740(TCP)X
2916(protocol)X
3214(providing)X
3556(the)X
3685(underlying)X
576 1152(communication)N
1094(support.)X
1394(To)X
1503(create)X
1716(a)X
1772(datagram)X
2091(socket)X
2316(for)X
2430(on-machine)X
2829(use)X
2956(the)X
3074(call)X
3210(might)X
3416(be:)X
864 1296(s)N
915(=)X
980(socket\(AF_UNIX,)X
1595(SOCK_DGRAM,)X
2186(0\);)X
776 1468(The)N
925(default)X
1172(protocol)X
1463(\(used)X
1661(when)X
1859(the)X
2 f
1981(protocol)X
1 f
2276(argument)X
2603(to)X
2690(the)X
2 f
2813(socket)X
1 f
3039(call)X
3180(is)X
3258(0\))X
3350(should)X
3588(be)X
3689(correct)X
3938(for)X
576 1564(most)N
765(every)X
978(situation.)X
1327(However,)X
1676(it)X
1754(is)X
1841(possible)X
2137(to)X
2233(specify)X
2499(a)X
2569(protocol)X
2870(other)X
3069(than)X
3241(the)X
3373(default;)X
3651(this)X
3799(will)X
3956(be)X
576 1660(covered)N
851(in)X
933(section)X
1180(5.)X
776 1784(There)N
987(are)X
1109(several)X
1360(reasons)X
1624(a)X
1683(socket)X
1911(call)X
2051(may)X
2213(fail.)X
2384(Aside)X
2595(from)X
2775(the)X
2897(rare)X
3047 0.3611(occurrence)AX
3425(of)X
3516(lack)X
3674(of)X
3765(memory)X
576 1880(\(ENOBUFS\),)N
1050(a)X
1122(socket)X
1362(request)X
1629(may)X
1802(fail)X
1944(due)X
2095(to)X
2192(a)X
2263(request)X
2530(for)X
2659(an)X
2770(unknown)X
3103(protocol)X
3405(\(EPROTONOSUP-)X
576 1976(PORT\),)N
847(or)X
934(a)X
990(request)X
1242(for)X
1356(a)X
1412(type)X
1570(of)X
1657(socket)X
1882(for)X
1996(which)X
2212(there)X
2393(is)X
2466(no)X
2566(supporting)X
2928(protocol)X
3215(\(EPROTOTYPE\).)X
3 f
576 2168(2.3.)N
736(Binding)X
1025(local)X
1205(names)X
1 f
776 2292(A)N
861(socket)X
1093(is)X
1173(created)X
1433(without)X
1704(a)X
1768(name.)X
2010(Until)X
2202(a)X
2266(name)X
2468(is)X
2549(bound)X
2777(to)X
2867(a)X
2931(socket,)X
3184(processes)X
3520(have)X
3700(no)X
3808(way)X
3970(to)X
576 2388 0.4531(reference)AN
904(it)X
975(and,)X
1138(consequently,)X
1608(no)X
1715(messages)X
2045(may)X
2210(be)X
2313(received)X
2613(on)X
2720(it.)X
2831(Communicating)X
3373(processes)X
3707(are)X
3832(bound)X
576 2484(by)N
692(an)X
2 f
805(association)X
1 f
1169(.)X
1246(In)X
1350(the)X
1485(Internet)X
1772(and)X
1925(NS)X
2064(domains,)X
2392(an)X
2505(association)X
2898(is)X
2988(composed)X
3350(of)X
3454(local)X
3647(and)X
3800(foreign)X
576 2580(addresses,)N
927(and)X
1066(local)X
1245(and)X
1384(foreign)X
1639(ports,)X
1842(while)X
2042(in)X
2126(the)X
2246(UNIX)X
2469(domain,)X
2751(an)X
2849(association)X
3227(is)X
3302(composed)X
3649(of)X
3738(local)X
3916(and)X
576 2676(foreign)N
830(path)X
990(names)X
1217(\(the)X
1364(phrase)X
1596(``foreign)X
1904(pathname'')X
2292(means)X
2520(a)X
2579(pathname)X
2914(created)X
3170(by)X
3273(a)X
3332(foreign)X
3587(process,)X
3871(not)X
3996(a)X
576 2772(pathname)N
919(on)X
1030(a)X
1097(foreign)X
1360(system\).)X
1680(In)X
1778(most)X
1964(domains,)X
2286(associations)X
2704(must)X
2890(be)X
2997(unique.)X
3286(In)X
3384(the)X
3512(Internet)X
3792(domain)X
576 2868(there)N
768(may)X
937(never)X
1147(be)X
1254(duplicate)X
1580(<protocol,)X
1944(local)X
2132(address,)X
2425(local)X
2613(port,)X
2794(foreign)X
3058(address,)X
3351(foreign)X
3615(port>)X
3821(tuples.)X
576 2964(UNIX)N
800(domain)X
1063(sockets)X
1322(need)X
1497(not)X
1622(always)X
1868(be)X
1967(bound)X
2190(to)X
2275(a)X
2334(name,)X
2551(but)X
2676(when)X
2873(bound)X
3096(there)X
3279(may)X
3439(never)X
3640(be)X
3738(duplicate)X
576 3060(<protocol,)N
932(local)X
1112(pathname,)X
1468(foreign)X
1724(pathname>)X
2105(tuples.)X
2361(The)X
2511(pathnames)X
2879(may)X
3042(not)X
3169(refer)X
3347(to)X
3434(\256les)X
3592(already)X
3854(exist-)X
576 3156(ing)N
698(on)X
798(the)X
916(system)X
1158(in)X
1240(4.3;)X
1382(the)X
1500(situation)X
1795(may)X
1953(change)X
2201(in)X
2283(future)X
2495(releases.)X
776 3280(The)N
2 f
921(bind)X
1 f
1083(system)X
1325(call)X
1461(allows)X
1690(a)X
1746(process)X
2007(to)X
2089(specify)X
2341(half)X
2486(of)X
2573(an)X
2669(association,)X
3065(<local)X
3286(address,)X
3567(local)X
3743(port>)X
3938(\(or)X
576 3376(<local)N
797(pathname>\),)X
1221(while)X
1419(the)X
2 f
1537(connect)X
1 f
1807(and)X
2 f
1943(accept)X
1 f
2173(primitives)X
2517(are)X
2636(used)X
2803(to)X
2885(complete)X
3199(a)X
3255(socket's)X
3538(association.)X
776 3500(In)N
864(the)X
983(Internet)X
1254(domain,)X
1535(binding)X
1800(names)X
2026(to)X
2109(sockets)X
2366(can)X
2499(be)X
2596(fairly)X
2791(complex.)X
3128(Fortunately,)X
3538(it)X
3603(is)X
3677(usually)X
3930(not)X
576 3596(necessary)N
915(to)X
1003(speci\256cally)X
1394(bind)X
1562(an)X
1664(address)X
1931(and)X
2072(port)X
2226(number)X
2496(to)X
2583(a)X
2644(socket,)X
2894(because)X
3174(the)X
2 f
3297(connect)X
1 f
3572(and)X
2 f
3713(send)X
1 f
3885(calls)X
576 3692(will)N
728(automatically)X
1192(bind)X
1363(an)X
1468(appropriate)X
1863(address)X
2133(if)X
2211(they)X
2378(are)X
2506(used)X
2682(with)X
2853(an)X
2958(unbound)X
3267(socket.)X
3541(The)X
3695(process)X
3965(of)X
576 3788(binding)N
840(names)X
1065(to)X
1147(NS)X
1269(sockets)X
1525(is)X
1598(similar)X
1840(in)X
1922(most)X
2097(ways)X
2282(to)X
2364(that)X
2504(of)X
2591(binding)X
2855(names)X
3080(to)X
3162(Internet)X
3432(sockets.)X
776 3912(The)N
2 f
921(bind)X
1 f
1083(system)X
1325(call)X
1461(is)X
1534(used)X
1701(as)X
1788(follows:)X
864 4056(bind\(s,)N
1104(name,)X
1318(namelen\);)X
576 4200(The)N
732(bound)X
963(name)X
1168(is)X
1252(a)X
1319(variable)X
1609(length)X
1840(byte)X
2009(string)X
2222(which)X
2449(is)X
2533(interpreted)X
2912(by)X
3024(the)X
3154(supporting)X
3528(protocol\(s\).)X
3952(Its)X
576 4296(interpretation)N
1032(may)X
1194(vary)X
1361(from)X
1541(communication)X
2063(domain)X
2327(to)X
2413(communication)X
2935(domain)X
3199(\(this)X
3365(is)X
3442(one)X
3582(of)X
3673(the)X
3795(proper-)X
576 4392(ties)N
721(which)X
951(comprise)X
1279(the)X
1411(``domain''\).)X
1860(As)X
1983(mentioned,)X
2375(in)X
2471(the)X
2603(Internet)X
2887(domain)X
3161(names)X
3400(contain)X
3671(an)X
3782(Internet)X
576 4488(address)N
854(and)X
1007(port)X
1173(number.)X
1495(NS)X
1634(domain)X
1911(names)X
2153(contain)X
2426(an)X
2539(NS)X
2678(address)X
2956(and)X
3108(port)X
3273(number.)X
3594(In)X
3697(the)X
3831(UNIX)X
576 4584(domain,)N
861(names)X
1092(contain)X
1354(a)X
1416(path)X
1580(name)X
1780(and)X
1922(a)X
1984(family,)X
2239(which)X
2461(is)X
2540(always)X
2789(AF_UNIX.)X
3198(If)X
3278(one)X
3420(wanted)X
3678(to)X
3766(bind)X
3934(the)X
576 4680(name)N
770(``/tmp/foo'')X
1173(to)X
1255(a)X
1311(UNIX)X
1532(domain)X
1792(socket,)X
2037(the)X
2155(following)X
2486(code)X
2658(would)X
2878(be)X
2974(used*:)X
8 s
10 f
576 5312(hhhhhhhhhhhhhhhhhh)N
1 f
576 5392(*)N
627(Note)X
770(that,)X
901(although)X
1144(the)X
1241(tendency)X
1490(here)X
1618(is)X
1680(to)X
1749(call)X
1860(the)X
1957(``addr'')X
2173(structure)X
2416(``sun'',)X
2625(doing)X
2791(so)X
2868(would)X
3048(cause)X
3209(problems)X
3467(if)X
3526(the)X
3624(code)X
576 5472(were)N
715(ever)X
840(ported)X
1019(to)X
1085(a)X
1129(Sun)X
1245(workstation.)X

5 p
%%Page: 5 5
8 s 8 xH 0 xS 1 f 1 i
10 s
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3717(PSD:21-5)X
864 720(#include)N
1160(<sys/un.h>)X
884 816(...)N
864 912(struct)N
1062(sockaddr_un)X
1492(addr;)X
884 1008(...)N
864 1104(strcpy\(addr.sun_path,)N
1579("/tmp/foo"\);)X
864 1200(addr.sun_family)N
1407(=)X
1472(AF_UNIX;)X
864 1296(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&addr,)X
1971(strlen\(addr.sun_path\))X
2675(+)X
944 1392(sizeof)N
1156(\(addr.sun_len\))X
1642(+)X
1707(sizeof)X
1919(\(addr.sun_family\)\);)X
576 1536(Note)N
752(that)X
892(in)X
974(determining)X
1381(the)X
1499(size)X
1644(of)X
1731(a)X
1787(UNIX)X
2008(domain)X
2268(address)X
2529(null)X
2673(bytes)X
2862(are)X
2982(not)X
3105(counted,)X
3400(which)X
3617(is)X
3691(why)X
2 f
3850(strlen)X
1 f
576 1632(is)N
653(used.)X
864(In)X
955(the)X
1077(current)X
1329(implementation)X
1855(of)X
1946(UNIX)X
2170(domain)X
2433(IPC,)X
2600(the)X
2721(\256le)X
2846(name)X
3043(referred)X
3322(to)X
3407(in)X
2 f
3492(addr.sun_path)X
1 f
3979(is)X
576 1728(created)N
831(as)X
920(a)X
978(socket)X
1205(in)X
1289(the)X
1409(system)X
1653(\256le)X
1777(space.)X
2019(The)X
2167(caller)X
2369(must,)X
2567(therefore,)X
2901(have)X
3076(write)X
3264(permission)X
3638(in)X
3723(the)X
3844(direc-)X
576 1824(tory)N
736(where)X
2 f
964(addr.sun_path)X
1 f
1458(is)X
1541(to)X
1633(reside,)X
1875(and)X
2021(this)X
2166(\256le)X
2298(should)X
2541(be)X
2647(deleted)X
2909(by)X
3019(the)X
3147(caller)X
3356(when)X
3560(it)X
3634(is)X
3717(no)X
3827(longer)X
576 1920(needed.)N
864(Future)X
1093(versions)X
1380(of)X
1467(4BSD)X
1682(may)X
1840(not)X
1962(create)X
2175(this)X
2310(\256le.)X
776 2044(In)N
863(binding)X
1127(an)X
1223(Internet)X
1493(address)X
1754(things)X
1969(become)X
2239(more)X
2424(complicated.)X
2876(The)X
3021(actual)X
3233(call)X
3369(is)X
3442(similar,)X
864 2188(#include)N
1160(<sys/types.h>)X
864 2284(#include)N
1160(<netinet/in.h>)X
884 2380(...)N
864 2476(struct)N
1062(sockaddr_in)X
1474(sin;)X
884 2572(...)N
864 2668(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&sin,)X
1921(sizeof)X
2133(\(sin\)\);)X
576 2812(but)N
704(the)X
828(selection)X
1139(of)X
1232(what)X
1414(to)X
1502(place)X
1698(in)X
1786(the)X
1910(address)X
2 f
2177(sin)X
1 f
2296(requires)X
2581(some)X
2776(discussion.)X
3175(We)X
3314(will)X
3465(come)X
3666(back)X
3845(to)X
3934(the)X
576 2908(problem)N
871(of)X
966(formulating)X
1372(Internet)X
1650(addresses)X
1986(in)X
2075(section)X
2329(3)X
2396(when)X
2597(the)X
2722(library)X
2963(routines)X
3248(used)X
3422(in)X
3511(name)X
3712(resolution)X
576 3004(are)N
695(discussed.)X
776 3128(Binding)N
1053(an)X
1149(NS)X
1271(address)X
1532(to)X
1614(a)X
1670(socket)X
1895(is)X
1968(even)X
2141(more)X
2327(dif\256cult,)X
2621(especially)X
2963(since)X
3149(the)X
3268(Internet)X
3539(library)X
3774(routines)X
576 3224(do)N
676(not)X
798(work)X
983(with)X
1145(NS)X
1267(hostnames.)X
1665(The)X
1810(actual)X
2022(call)X
2158(is)X
2231(again)X
2425(similar:)X
864 3368(#include)N
1160(<sys/types.h>)X
864 3464(#include)N
1160(<netns/ns.h>)X
884 3560(...)N
864 3656(struct)N
1062(sockaddr_ns)X
1483(sns;)X
884 3752(...)N
864 3848(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&sns,)X
1930(sizeof)X
2142(\(sns\)\);)X
576 3992(Again,)N
812(discussion)X
1165(of)X
1252(what)X
1428(to)X
1510(place)X
1700(in)X
1782(a)X
1838(``struct)X
2090(sockaddr_ns'')X
2565(will)X
2709(be)X
2805(deferred)X
3094(to)X
3176(section)X
3423(3.)X
3 f
576 4184(2.4.)N
736(Connection)X
1147(establishment)X
1 f
776 4308(Connection)N
1186(establishment)X
1667(is)X
1761(usually)X
2033(asymmetric,)X
2468(with)X
2651(one)X
2808(process)X
3090(a)X
3167(``client'')X
3494(and)X
3651(the)X
3790(other)X
3996(a)X
576 4404 0.3125(``server''.)AN
942(The)X
1088(server,)X
1326(when)X
1521(willing)X
1768(to)X
1851(offer)X
2029(its)X
2125(advertised)X
2476(services,)X
2776(binds)X
2969(a)X
3025(socket)X
3250(to)X
3332(a)X
3388(well-known)X
3791(address)X
576 4500(associated)N
930(with)X
1096(the)X
1219(service)X
1472(and)X
1613(then)X
1776(passively)X
2099(``listens'')X
2436(on)X
2541(its)X
2641(socket.)X
2911(It)X
2985(is)X
3063(then)X
3226(possible)X
3513(for)X
3632(an)X
3733(unrelated)X
576 4596(process)N
838(to)X
920(rendezvous)X
1306(with)X
1468(the)X
1586(server.)X
1843(The)X
1988(client)X
2186(requests)X
2469(services)X
2748(from)X
2924(the)X
3042(server)X
3259(by)X
3359(initiating)X
3667(a)X
3723(``connec-)X
576 4692(tion'')N
777(to)X
862(the)X
983(server's)X
1261(socket.)X
1529(On)X
1650(the)X
1772(client)X
1974(side)X
2127(the)X
2 f
2249(connect)X
1 f
2523(call)X
2663(is)X
2740(used)X
2911(to)X
2997(initiate)X
3243(a)X
3303(connection.)X
3719(Using)X
3934(the)X
576 4788(UNIX)N
797(domain,)X
1077(this)X
1212(might)X
1418(appear)X
1653(as,)X
864 4932(struct)N
1062(sockaddr_un)X
1492(server;)X
884 5028(...)N
864 5124(connect\(s,)N
1212(\(struct)X
1437(sockaddr)X
1747(*\)&server,)X
2113(strlen\(server.sun_path\))X
2871(+)X
944 5220(sizeof)N
1156(\(server.sun_family\)\);)X
576 5364(while)N
774(in)X
856(the)X
974(Internet)X
1244(domain,)X

6 p
%%Page: 6 6
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-6)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
864 720(struct)N
1062(sockaddr_in)X
1474(server;)X
884 816(...)N
864 912(connect\(s,)N
1212(\(struct)X
1437(sockaddr)X
1747(*\)&server,)X
2113(sizeof)X
2325(\(server\)\);)X
576 1056(and)N
712(in)X
794(the)X
912(NS)X
1034(domain,)X
864 1200(struct)N
1062(sockaddr_ns)X
1483(server;)X
884 1296(...)N
864 1392(connect\(s,)N
1212(\(struct)X
1437(sockaddr)X
1747(*\)&server,)X
2113(sizeof)X
2325(\(server\)\);)X
576 1536(where)N
2 f
802(server)X
1 f
1032(in)X
1124(the)X
1252(example)X
1554(above)X
1776(would)X
2006(contain)X
2272(either)X
2485(the)X
2613(UNIX)X
2844(pathname,)X
3206(Internet)X
3486(address)X
3757(and)X
3903(port)X
576 1632(number,)N
868(or)X
962(NS)X
1091(address)X
1359(and)X
1502(port)X
1657(number)X
1928(of)X
2021(the)X
2145(server)X
2368(to)X
2456(which)X
2678(the)X
2802(client)X
3006(process)X
3273(wishes)X
3517(to)X
3605(speak.)X
3854(If)X
3934(the)X
576 1728(client)N
778(process's)X
1101(socket)X
1330(is)X
1407(unbound)X
1711(at)X
1793(the)X
1915(time)X
2081(of)X
2172(the)X
2294(connect)X
2568(call,)X
2728(the)X
2851(system)X
3098(will)X
3247(automatically)X
3708(select)X
3916(and)X
576 1824(bind)N
739(a)X
796(name)X
991(to)X
1074(the)X
1193(socket)X
1419(if)X
1488(necessary;)X
1843(c.f.)X
1966(section)X
2213(5.4.)X
2373(This)X
2535(is)X
2608(the)X
2726(usual)X
2915(way)X
3069(that)X
3209(local)X
3385(addresses)X
3713(are)X
3832(bound)X
576 1920(to)N
658(a)X
714(socket.)X
776 2044(An)N
899(error)X
1081(is)X
1159(returned)X
1452(if)X
1527(the)X
1651(connection)X
2029(was)X
2180(unsuccessful)X
2616(\(any)X
2785(name)X
2985(automatically)X
3447(bound)X
3673(by)X
3779(the)X
3903(sys-)X
576 2140(tem,)N
743(however,)X
1067(remains\).)X
1415(Otherwise,)X
1791(the)X
1915(socket)X
2146(is)X
2225(associated)X
2581(with)X
2749(the)X
2873(server)X
3096(and)X
3238(data)X
3398(transfer)X
3670(may)X
3834(begin.)X
576 2236(Some)N
778(of)X
865(the)X
983(more)X
1168(common)X
1468(errors)X
1676(returned)X
1964(when)X
2158(a)X
2214(connection)X
2586(attempt)X
2846(fails)X
3004(are:)X
576 2360(ETIMEDOUT)N
776 2456(After)N
969(failing)X
1201(to)X
1286(establish)X
1589(a)X
1648(connection)X
2023(for)X
2140(a)X
2199(period)X
2427(of)X
2517(time,)X
2702(the)X
2824(system)X
3070(decided)X
3344(there)X
3529(was)X
3678(no)X
3782(point)X
3970(in)X
776 2552(retrying)N
1053(the)X
1174(connection)X
1549(attempt)X
1812(any)X
1951(more.)X
2179(This)X
2344(usually)X
2598(occurs)X
2831(because)X
3109(the)X
3230(destination)X
3604(host)X
3759(is)X
3834(down,)X
776 2648(or)N
863(because)X
1138(problems)X
1456(in)X
1538(the)X
1656(network)X
1939(resulted)X
2213(in)X
2295(transmissions)X
2750(being)X
2948(lost.)X
576 2772(ECONNREFUSED)N
776 2868(The)N
921(host)X
1074(refused)X
1331(service)X
1579(for)X
1693(some)X
1882(reason.)X
2153(This)X
2316(is)X
2390(usually)X
2642(due)X
2779(to)X
2862(a)X
2919(server)X
3137(process)X
3399(not)X
3522(being)X
3721(present)X
3974(at)X
776 2964(the)N
894(requested)X
1222(name.)X
576 3088(ENETDOWN)N
1051(or)X
1138(EHOSTDOWN)X
776 3184(These)N
993(operational)X
1379(errors)X
1592(are)X
1716(returned)X
2009(based)X
2217(on)X
2322(status)X
2529(information)X
2932(delivered)X
3256(to)X
3343(the)X
3466(client)X
3669(host)X
3828(by)X
3934(the)X
776 3280(underlying)N
1143(communication)X
1661(services.)X
576 3404(ENETUNREACH)N
1188(or)X
1275(EHOSTUNREACH)X
776 3500(These)N
995(operational)X
1383(errors)X
1598(can)X
1737(occur)X
1943(either)X
2153(because)X
2436(the)X
2562(network)X
2853(or)X
2948(host)X
3109(is)X
3190(unknown)X
3516(\(no)X
3651(route)X
3844(to)X
3934(the)X
776 3596(network)N
1068(or)X
1164(host)X
1326(is)X
1408(present\),)X
1716(or)X
1811(because)X
2094(of)X
2189(status)X
2399(information)X
2805(returned)X
3101(by)X
3209(intermediate)X
3638(gateways)X
3965(or)X
776 3692(switching)N
1120(nodes.)X
1380(Many)X
1600(times)X
1806(the)X
1937(status)X
2152(returned)X
2453(is)X
2539(not)X
2675(suf\256cient)X
3007(to)X
3103(distinguish)X
3487(a)X
3557(network)X
3854(being)X
776 3788(down)N
974(from)X
1150(a)X
1206(host)X
1359(being)X
1557(down,)X
1775(in)X
1857(which)X
2073(case)X
2232(the)X
2350(system)X
2592(indicates)X
2897(the)X
3015(entire)X
3218(network)X
3501(is)X
3574(unreachable.)X
776 3912(For)N
907(the)X
1026(server)X
1244(to)X
1327(receive)X
1581(a)X
1638(client's)X
1895(connection)X
2268(it)X
2333(must)X
2509(perform)X
2789(two)X
2930(steps)X
3111(after)X
3280(binding)X
3545(its)X
3641(socket.)X
3907(The)X
576 4008(\256rst)N
720(is)X
793(to)X
875(indicate)X
1149(a)X
1205(willingness)X
1589(to)X
1671(listen)X
1864(for)X
1978(incoming)X
2300(connection)X
2672(requests:)X
864 4152(listen\(s,)N
1135(5\);)X
576 4296(The)N
727(second)X
976(parameter)X
1324(to)X
1413(the)X
2 f
1538(listen)X
1 f
1738(call)X
1881(speci\256es)X
2184(the)X
2309(maximum)X
2660(number)X
2932(of)X
3026(outstanding)X
3426(connections)X
3836(which)X
576 4392(may)N
747(be)X
856(queued)X
1121(awaiting)X
1430 0.3611(acceptance)AX
1817(by)X
1930(the)X
2061(server)X
2291(process;)X
2587(this)X
2735(number)X
3012(may)X
3182(be)X
3290(limited)X
3548(by)X
3660(the)X
3790(system.)X
576 4488(Should)N
824(a)X
882(connection)X
1256(be)X
1354(requested)X
1684(while)X
1885(the)X
2006(queue)X
2221(is)X
2297(full,)X
2451(the)X
2572(connection)X
2947(will)X
3094(not)X
3219(be)X
3318(refused,)X
3598(but)X
3723(rather)X
3934(the)X
576 4584(individual)N
924(messages)X
1251(which)X
1471(comprise)X
1789(the)X
1911(request)X
2167(will)X
2314(be)X
2413(ignored.)X
2721(This)X
2886(gives)X
3078(a)X
3137(harried)X
3388(server)X
3608(time)X
3773(to)X
3858(make)X
576 4680(room)N
770(in)X
857(its)X
957(pending)X
1241(connection)X
1619(queue)X
1837(while)X
2041(the)X
2165(client)X
2369(retries)X
2596(the)X
2720(connection)X
3098(request.)X
3396(Had)X
3556(the)X
3680(connection)X
576 4776(been)N
753(returned)X
1046(with)X
1213(the)X
1336(ECONNREFUSED)X
1992(error,)X
2194(the)X
2317(client)X
2520(would)X
2745(be)X
2846(unable)X
3084(to)X
3170(tell)X
3296(if)X
3369(the)X
3491(server)X
3712(was)X
3861(up)X
3965(or)X
576 4872(not.)N
741(As)X
853(it)X
920(is)X
996(now)X
1157(it)X
1224(is)X
1300(still)X
1442(possible)X
1727(to)X
1812(get)X
1933(the)X
2054(ETIMEDOUT)X
2545(error)X
2725(back,)X
2920(though)X
3165(this)X
3303(is)X
3379(unlikely.)X
3704(The)X
3853(back-)X
576 4968(log)N
703(\256gure)X
915(supplied)X
1211(with)X
1378(the)X
1501(listen)X
1699(call)X
1840(is)X
1918(currently)X
2233(limited)X
2484(by)X
2589(the)X
2712(system)X
2958(to)X
3044(a)X
3104(maximum)X
3452(of)X
3543(5)X
3607(pending)X
3889(con-)X
576 5064(nections)N
867(on)X
971(any)X
1111(one)X
1252(queue.)X
1509(This)X
1676(avoids)X
1910(the)X
2033(problem)X
2325(of)X
2417(processes)X
2750(hogging)X
3037(system)X
3284(resources)X
3613(by)X
3718(setting)X
3956(an)X
576 5160(in\256nite)N
822(backlog,)X
1116(then)X
1274(ignoring)X
1565(all)X
1665(connection)X
2037(requests.)X
776 5284(With)N
956(a)X
1012(socket)X
1237(marked)X
1498(as)X
1585(listening,)X
1900(a)X
1956(server)X
2173(may)X
2 f
2331(accept)X
1 f
2561(a)X
2617(connection:)X

7 p
%%Page: 7 7
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3717(PSD:21-7)X
864 720(struct)N
1062(sockaddr_in)X
1474(from;)X
884 816(...)N
864 912(fromlen)N
1138(=)X
1203(sizeof)X
1415(\(from\);)X
864 1008(newsock)N
1165(=)X
1230(accept\(s,)X
1534(\(struct)X
1759(sockaddr)X
2069(*\)&from,)X
2394(&fromlen\);)X
576 1152(\(For)N
744(the)X
872(UNIX)X
1103(domain,)X
2 f
1393(from)X
1 f
1574(would)X
1804(be)X
1910(declared)X
2213(as)X
2311(a)X
2 f
2378(struct)X
2591(sockaddr_un)X
1 f
3005(,)X
3056(and)X
3203(for)X
3328(the)X
3457(NS)X
3590(domain,)X
2 f
3881(from)X
1 f
576 1248(would)N
798(be)X
896(declared)X
1191(as)X
1279(a)X
2 f
1336(struct)X
1539(sockaddr_ns)X
1 f
1944(,)X
1985(but)X
2108(nothing)X
2373(different)X
2671(would)X
2892(need)X
3065(to)X
3148(be)X
3245(done)X
3422(as)X
3510(far)X
3621(as)X
2 f
3709(fromlen)X
1 f
3979(is)X
576 1344(concerned.)N
973(In)X
1066(the)X
1190(examples)X
1520(which)X
1743(follow,)X
1999(only)X
2168(Internet)X
2445(routines)X
2730(will)X
2881(be)X
2984(discussed.\))X
3385(A)X
3470(new)X
3631(descriptor)X
3979(is)X
576 1440(returned)N
875(on)X
986(receipt)X
1236(of)X
1334(a)X
1401(connection)X
1784(\(along)X
2020(with)X
2192(a)X
2258(new)X
2422(socket\).)X
2724(If)X
2808(the)X
2936(server)X
3163(wishes)X
3411(to)X
3503(\256nd)X
3657(out)X
3789(who)X
3957(its)X
576 1536(client)N
776(is,)X
871(it)X
938(may)X
1099(supply)X
1335(a)X
1394(buffer)X
1614(for)X
1731(the)X
1852(client)X
2053(socket's)X
2339(name.)X
2576(The)X
2724(value-result)X
3126(parameter)X
2 f
3471(fromlen)X
1 f
3743(is)X
3819(initial-)X
576 1632(ized)N
731(by)X
832(the)X
951(server)X
1169(to)X
1252(indicate)X
1526(how)X
1684(much)X
1882(space)X
2081(is)X
2154(associated)X
2504(with)X
2 f
2666(from)X
1 f
2817(,)X
2857(then)X
3015(modi\256ed)X
3319(on)X
3419(return)X
3631(to)X
3713(re\257ect)X
3934(the)X
576 1728(true)N
721(size)X
866(of)X
953(the)X
1071(name.)X
1305(If)X
1379(the)X
1497(client's)X
1753(name)X
1947(is)X
2020(not)X
2142(of)X
2229(interest,)X
2505(the)X
2623(second)X
2866(parameter)X
3208(may)X
3366(be)X
3462(a)X
3518(null)X
3662(pointer.)X
2 f
776 1852(Accept)N
1 f
1019(normally)X
1332(blocks.)X
1605(That)X
1776(is,)X
2 f
1873(accept)X
1 f
2107(will)X
2255(not)X
2381(return)X
2597(until)X
2767(a)X
2827(connection)X
3203(is)X
3280(available)X
3595(or)X
3687(the)X
3810(system)X
576 1948(call)N
714(is)X
788(interrupted)X
1161(by)X
1262(a)X
1319(signal)X
1531(to)X
1614(the)X
1733(process.)X
2035(Further,)X
2312(there)X
2494(is)X
2568(no)X
2669(way)X
2824(for)X
2939(a)X
2996(process)X
3258(to)X
3341(indicate)X
3616(it)X
3681(will)X
3826(accept)X
576 2044(connections)N
981(from)X
1159(only)X
1323(a)X
1381(speci\256c)X
1648(individual,)X
2014(or)X
2103(individuals.)X
2520(It)X
2591(is)X
2666(up)X
2768(to)X
2852(the)X
2972(user)X
3129(process)X
3393(to)X
3478(consider)X
3773(who)X
3934(the)X
576 2140(connection)N
951(is)X
1027(from)X
1206(and)X
1345(close)X
1533(down)X
1734(the)X
1855(connection)X
2230(if)X
2302(it)X
2369(does)X
2539(not)X
2664(wish)X
2838(to)X
2923(speak)X
3129(to)X
3214(the)X
3335(process.)X
3639(If)X
3715(the)X
3835(server)X
576 2236(process)N
846(wants)X
1062(to)X
1153(accept)X
1388(connections)X
1800(on)X
1909(more)X
2103(than)X
2270(one)X
2415(socket,)X
2669(or)X
2765(wants)X
2981(to)X
3072(avoid)X
3279(blocking)X
3588(on)X
3698(the)X
3826(accept)X
576 2332(call,)N
732(there)X
913(are)X
1032(alternatives;)X
1444(they)X
1602(will)X
1746(be)X
1842(considered)X
2210(in)X
2292(section)X
2539(5.)X
3 f
576 2524(2.5.)N
736(Data)X
921(transfer)X
1 f
776 2648(With)N
958(a)X
1016(connection)X
1390(established,)X
1788(data)X
1944(may)X
2104(begin)X
2304(to)X
2388(\257ow.)X
2592(To)X
2703(send)X
2872(and)X
3010(receive)X
3265(data)X
3422(there)X
3606(are)X
3728(a)X
3787(number)X
576 2744(of)N
669(possible)X
957(calls.)X
1170(With)X
1356(the)X
1479(peer)X
1643(entity)X
1850(at)X
1933(each)X
2106(end)X
2247(of)X
2339(a)X
2400(connection)X
2777(anchored,)X
3117(a)X
3178(user)X
3337(can)X
3474(send)X
3646(or)X
3738(receive)X
3996(a)X
576 2840(message)N
876(without)X
1148(specifying)X
1510(the)X
1636(peer.)X
1843(As)X
1960(one)X
2104(might)X
2318(expect,)X
2576(in)X
2666(this)X
2809(case,)X
2997(then)X
3164(the)X
3291(normal)X
2 f
3547(read)X
1 f
3723(and)X
2 f
3868(write)X
1 f
576 2936(system)N
818(calls)X
985(are)X
1104(usable,)X
864 3080(write\(s,)N
1127(buf,)X
1274(sizeof)X
1486(\(buf\)\);)X
864 3176(read\(s,)N
1101(buf,)X
1248(sizeof)X
1460(\(buf\)\);)X
576 3320(In)N
663(addition)X
945(to)X
2 f
1027(read)X
1 f
1194(and)X
2 f
1330(write)X
1 f
1494(,)X
1534(the)X
1652(new)X
1806(calls)X
2 f
1973(send)X
1 f
2140(and)X
2 f
2276(recv)X
1 f
2435(may)X
2593(be)X
2689(used:)X
864 3464(send\(s,)N
1109(buf,)X
1256(sizeof)X
1468(\(buf\),)X
1669(\257ags\);)X
864 3560(recv\(s,)N
1101(buf,)X
1248(sizeof)X
1460(\(buf\),)X
1661(\257ags\);)X
576 3704(While)N
2 f
799(send)X
1 f
973(and)X
2 f
1116(recv)X
1 f
1282(are)X
1408(virtually)X
1706(identical)X
2009(to)X
2 f
2098(read)X
1 f
2272(and)X
2 f
2415(write)X
1 f
2579(,)X
2626(the)X
2751(extra)X
2 f
2939(\257ags)X
1 f
3117(argument)X
3447(is)X
3528(important.)X
3907(The)X
576 3800(\257ags,)N
775(de\256ned)X
1039(in)X
2 f
1129(<sys/socket.h>)X
1 f
1618(,)X
1666(may)X
1831(be)X
1934(speci\256ed)X
2246(as)X
2340(a)X
2403(non-zero)X
2716(value)X
2917(if)X
2993(one)X
3136(or)X
3230(more)X
3422(of)X
3516(the)X
3641(following)X
3979(is)X
576 3896(required:)N
864 4088(MSG_OOB)N
1687(send/receive)X
2109(out)X
2231(of)X
2318(band)X
2494(data)X
864 4184(MSG_PEEK)N
1687(look)X
1849(at)X
1927(data)X
2081(without)X
2345(reading)X
864 4280(MSG_DONTROUTE)N
1687(send)X
1854(data)X
2008(without)X
2272(routing)X
2523(packets)X
576 4472(Out)N
722(of)X
815(band)X
997(data)X
1157(is)X
1236(a)X
1298(notion)X
1528(speci\256c)X
1799(to)X
1887(stream)X
2127(sockets,)X
2409(and)X
2551(one)X
2693(which)X
2915(we)X
3035(will)X
3185(not)X
3313(immediately)X
3740(consider.)X
576 4568(The)N
726(option)X
955(to)X
1042(have)X
1219(data)X
1378(sent)X
1532(without)X
1801(routing)X
2057(applied)X
2318(to)X
2405(the)X
2528(outgoing)X
2837(packets)X
3102(is)X
3179(currently)X
3493(used)X
3664(only)X
3830(by)X
3934(the)X
576 4664(routing)N
833(table)X
1015(management)X
1451(process,)X
1738(and)X
1880(is)X
1959(unlikely)X
2247(to)X
2335(be)X
2437(of)X
2530(interest)X
2792(to)X
2880(the)X
3004(casual)X
3231(user.)X
3431(The)X
3582(ability)X
3813(to)X
3902(pre-)X
576 4760(view)N
763(data)X
928(is,)X
1032(however,)X
1360(of)X
1458(interest.)X
1765(When)X
1988(MSG_PEEK)X
2432(is)X
2516(speci\256ed)X
2832(with)X
3005(a)X
2 f
3072(recv)X
1 f
3241(call,)X
3407(any)X
3553(data)X
3717(present)X
3979(is)X
576 4856(returned)N
867(to)X
952(the)X
1073(user,)X
1250(but)X
1375(treated)X
1617(as)X
1708(still)X
1851(``unread''.)X
2242(That)X
2413(is,)X
2510(the)X
2632(next)X
2 f
2794(read)X
1 f
2965(or)X
2 f
3056(recv)X
1 f
3219(call)X
3359(applied)X
3619(to)X
3705(the)X
3827(socket)X
576 4952(will)N
720(return)X
932(the)X
1050(data)X
1204(previously)X
1562(previewed.)X
3 f
576 5144(2.6.)N
736(Discarding)X
1129(sockets)X
1 f
776 5268(Once)N
966(a)X
1022(socket)X
1247(is)X
1320(no)X
1420(longer)X
1645(of)X
1732(interest,)X
2008(it)X
2072(may)X
2230(be)X
2326(discarded)X
2654(by)X
2754(applying)X
3054(a)X
2 f
3110(close)X
1 f
3295(to)X
3377(the)X
3495(descriptor,)X
864 5412(close\(s\);)N
576 5556(If)N
660(data)X
824(is)X
907(associated)X
1267(with)X
1439(a)X
1505(socket)X
1740(which)X
1966(promises)X
2285(reliable)X
2556(delivery)X
2849(\(e.g.)X
3022(a)X
3088(stream)X
3332(socket\))X
3595(when)X
3800(a)X
3867(close)X
576 5652(takes)N
765(place,)X
979(the)X
1101(system)X
1347(will)X
1495(continue)X
1795(to)X
1881(attempt)X
2145(to)X
2231(transfer)X
2501(the)X
2623(data.)X
2801(However,)X
3140(after)X
3312(a)X
3372(fairly)X
3570(long)X
3736(period)X
3965(of)X

8 p
%%Page: 8 8
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-8)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
576 672(time,)N
759(if)X
829(the)X
948(data)X
1103(is)X
1177(still)X
1317(undelivered,)X
1737(it)X
1802(will)X
1947(be)X
2044(discarded.)X
2413(Should)X
2660(a)X
2717(user)X
2873(have)X
3047(no)X
3149(use)X
3278(for)X
3394(any)X
3532(pending)X
3812(data,)X
3988(it)X
576 768(may)N
734(perform)X
1013(a)X
2 f
1069(shutdown)X
1 f
1395(on)X
1495(the)X
1613(socket)X
1838(prior)X
2014(to)X
2096(closing)X
2347(it.)X
2451(This)X
2613(call)X
2749(is)X
2822(of)X
2909(the)X
3027(form:)X
864 912(shutdown\(s,)N
1273(how\);)X
576 1056(where)N
2 f
796(how)X
1 f
952(is)X
1028(0)X
1091(if)X
1163(the)X
1284(user)X
1441(is)X
1517(no)X
1621(longer)X
1850(interested)X
2186(in)X
2272(reading)X
2537(data,)X
2715(1)X
2779(if)X
2852(no)X
2956(more)X
3145(data)X
3303(will)X
3451(be)X
3551(sent,)X
3724(or)X
3815(2)X
3879(if)X
3952(no)X
576 1152(data)N
730(is)X
803(to)X
885(be)X
981(sent)X
1130(or)X
1217(received.)X
3 f
576 1344(2.7.)N
736(Connectionless)X
1267(sockets)X
1 f
776 1468(To)N
901(this)X
1052(point)X
1252(we)X
1382(have)X
1570(been)X
1758(concerned)X
2125(mostly)X
2378(with)X
2556(sockets)X
2828(which)X
3061(follow)X
3307(a)X
3380(connection)X
3769(oriented)X
576 1564(model.)N
849(However,)X
1197(there)X
1391(is)X
1477(also)X
1638(support)X
1910(for)X
2036(connectionless)X
2540(interactions)X
2946(typical)X
3196(of)X
3295(the)X
3425(datagram)X
3756(facilities)X
576 1660(found)N
791(in)X
882(contemporary)X
1357(packet)X
1596(switched)X
1910(networks.)X
2273(A)X
2360(datagram)X
2688(socket)X
2922(provides)X
3227(a)X
3292(symmetric)X
3659(interface)X
3970(to)X
576 1756(data)N
734(exchange.)X
1102(While)X
1322(processes)X
1653(are)X
1775(still)X
1917(likely)X
2122(to)X
2207(be)X
2306(client)X
2507(and)X
2646(server,)X
2886(there)X
3070(is)X
3146(no)X
3249(requirement)X
3660(for)X
3777(connec-)X
576 1852(tion)N
720(establishment.)X
1220(Instead,)X
1492(each)X
1660(message)X
1952(includes)X
2239(the)X
2357(destination)X
2728(address.)X
776 1976(Datagram)N
1120(sockets)X
1384(are)X
1511(created)X
1772(as)X
1867(before.)X
2141(If)X
2223(a)X
2287(particular)X
2623(local)X
2807(address)X
3076(is)X
3157(needed,)X
3433(the)X
2 f
3559(bind)X
1 f
3729(operation)X
576 2072(must)N
754(precede)X
1028(the)X
1149(\256rst)X
1296(data)X
1453(transmission.)X
1920(Otherwise,)X
2293(the)X
2414(system)X
2659(will)X
2806(set)X
2918(the)X
3039(local)X
3217(address)X
3480(and/or)X
3707(port)X
3858(when)X
576 2168(data)N
730(is)X
803(\256rst)X
947(sent.)X
1136(To)X
1245(send)X
1412(data,)X
1586(the)X
2 f
1704(sendto)X
1 f
1933(primitive)X
2246(is)X
2319(used,)X
864 2312(sendto\(s,)N
1171(buf,)X
1318(bu\257en,)X
1558(\257ags,)X
1749(\(struct)X
1974(sockaddr)X
2284(*\)&to,)X
2515(tolen\);)X
576 2456(The)N
2 f
723(s)X
1 f
754(,)X
2 f
796(buf)X
1 f
898(,)X
2 f
940(bu\257en)X
1 f
1136(,)X
1178(and)X
2 f
1316(\257ags)X
1 f
1490(parameters)X
1866(are)X
1988(used)X
2158(as)X
2248(before.)X
2497(The)X
2 f
2645(to)X
1 f
2730(and)X
2 f
2869(tolen)X
1 f
3052(values)X
3280(are)X
3402(used)X
3572(to)X
3657(indicate)X
3934(the)X
576 2552(address)N
855(of)X
959(the)X
1094(intended)X
1407(recipient)X
1725(of)X
1829(the)X
1964(message.)X
2313(When)X
2542(using)X
2752(an)X
2865(unreliable)X
3223(datagram)X
3559(interface,)X
3898(it)X
3979(is)X
576 2648(unlikely)N
862(that)X
1006(any)X
1146(errors)X
1358(will)X
1506(be)X
1606(reported)X
1898(to)X
1984(the)X
2106(sender.)X
2380(When)X
2596(information)X
2998(is)X
3075(present)X
3331(locally)X
3573(to)X
3659(recognize)X
3996(a)X
576 2744(message)N
871(that)X
1014(can)X
1149(not)X
1273(be)X
1371(delivered)X
1692(\(for)X
1835(instance)X
2120(when)X
2316(a)X
2374(network)X
2659(is)X
2734(unreachable\),)X
3192(the)X
3312(call)X
3450(will)X
3596(return)X
9 f
3810(-)X
1 f
3854(1)X
3916(and)X
576 2840(the)N
694(global)X
914(value)X
2 f
1108(errno)X
1 f
1306(will)X
1450(contain)X
1706(an)X
1802(error)X
1979(number.)X
776 2964(To)N
885(receive)X
1138(messages)X
1461(on)X
1561(an)X
1657(unconnected)X
2083(datagram)X
2402(socket,)X
2647(the)X
2 f
2765(recvfrom)X
1 f
3075(primitive)X
3388(is)X
3461(provided:)X
864 3108(recvfrom\(s,)N
1257(buf,)X
1404(bu\257en,)X
1644(\257ags,)X
1835(\(struct)X
2060(sockaddr)X
2370(*\)&from,)X
2695(&fromlen\);)X
576 3252(Once)N
771(again,)X
990(the)X
2 f
1113(fromlen)X
1 f
1387(parameter)X
1734(is)X
1812(handled)X
2091(in)X
2179(a)X
2241(value-result)X
2646(fashion,)X
2928(initially)X
3202(containing)X
3566(the)X
3690(size)X
3841(of)X
3934(the)X
2 f
576 3348(from)N
1 f
750(buffer,)X
990(and)X
1129(modi\256ed)X
1436(on)X
1539(return)X
1754(to)X
1839(indicate)X
2116(the)X
2237(actual)X
2451(size)X
2598(of)X
2687(the)X
2807(address)X
3070(from)X
3248(which)X
3466(the)X
3586(datagram)X
3907(was)X
576 3444(received.)N
776 3568(In)N
863(addition)X
1145(to)X
1227(the)X
1345(two)X
1485(calls)X
1652(mentioned)X
2010(above,)X
2243(datagram)X
2563(sockets)X
2820(may)X
2979(also)X
3129(use)X
3257(the)X
2 f
3376(connect)X
1 f
3647(call)X
3784(to)X
3867(asso-)X
576 3664(ciate)N
755(a)X
818(socket)X
1050(with)X
1219(a)X
1282(speci\256c)X
1554(destination)X
1931(address.)X
2238(In)X
2331(this)X
2472(case,)X
2657(any)X
2799(data)X
2959(sent)X
3114(on)X
3220(the)X
3344(socket)X
3575(will)X
3725(automati-)X
576 3760(cally)N
761(be)X
866(addressed)X
1212(to)X
1303(the)X
1430(connected)X
1785(peer,)X
1973(and)X
2118(only)X
2289(data)X
2452(received)X
2754(from)X
2939(that)X
3088(peer)X
3256(will)X
3409(be)X
3514(delivered)X
3842(to)X
3934(the)X
576 3856(user.)N
776(Only)X
962(one)X
1104(connected)X
1456(address)X
1723(is)X
1802(permitted)X
2135(for)X
2255(each)X
2428(socket)X
2658(at)X
2741(one)X
2882(time;)X
3071(a)X
3132(second)X
3380(connect)X
3655(will)X
3804(change)X
576 3952(the)N
702(destination)X
1081(address,)X
1370(and)X
1514(a)X
1578(connect)X
1856(to)X
1946(a)X
2010(null)X
2162(address)X
2431(\(family)X
2696(AF_UNSPEC\))X
3200(will)X
3353(disconnect.)X
3765(Connect)X
576 4048(requests)N
864(on)X
969(datagram)X
1293(sockets)X
1554(return)X
1771(immediately,)X
2216(as)X
2308(this)X
2448(simply)X
2690(results)X
2924(in)X
3011(the)X
3134(system)X
3381(recording)X
3713(the)X
3835(peer's)X
576 4144(address)N
841(\(as)X
959(compared)X
1300(to)X
1387(a)X
1448(stream)X
1687(socket,)X
1937(where)X
2159(a)X
2220(connect)X
2495(request)X
2752(initiates)X
3030(establishment)X
3495(of)X
3587(an)X
3688(end)X
3829(to)X
3916(end)X
576 4240(connection\).)N
2 f
1015(Accept)X
1 f
1254(and)X
2 f
1390(listen)X
1 f
1583(are)X
1702(not)X
1824(used)X
1991(with)X
2153(datagram)X
2472(sockets.)X
776 4364(While)N
1000(a)X
1064(datagram)X
1391(socket)X
1624(socket)X
1857(is)X
1938(connected,)X
2312(errors)X
2528(from)X
2712(recent)X
2 f
2937(send)X
1 f
3113(calls)X
3289(may)X
3456(be)X
3561(returned)X
3858(asyn-)X
576 4460(chronously.)N
1005(These)X
1230(errors)X
1451(may)X
1622(be)X
1731(reported)X
2032(on)X
2145(subsequent)X
2534(operations)X
2901(on)X
3014(the)X
3145(socket,)X
3403(or)X
3503(a)X
3572(special)X
3827(socket)X
576 4556(option)N
801(used)X
969(with)X
2 f
1132(getsockopt)X
1 f
1475(,)X
1516(SO_ERROR,)X
1966(may)X
2126(be)X
2224(used)X
2393(to)X
2477(interrogate)X
2847(the)X
2967(error)X
3146(status.)X
3390(A)X
2 f
3470(select)X
1 f
3675(for)X
3791(reading)X
576 4652(or)N
669(writing)X
926(will)X
1076(return)X
1294(true)X
1445(when)X
1645(an)X
1747(error)X
1930(indication)X
2276(has)X
2409(been)X
2587(received.)X
2926(The)X
3077(next)X
3240(operation)X
3568(will)X
3717(return)X
3934(the)X
576 4748(error,)N
776(and)X
915(the)X
1036(error)X
1216(status)X
1421(is)X
1498(cleared.)X
1795(Other)X
2002(of)X
2093(the)X
2215(less)X
2359(important)X
2694(details)X
2927(of)X
3018(datagram)X
3341(sockets)X
3601(are)X
3724(described)X
576 4844(in)N
658(section)X
905(5.)X
3 f
576 5036(2.8.)N
736(Input/Output)X
1216(multiplexing)X
1 f
776 5160(One)N
935(last)X
1071(facility)X
1323(often)X
1513(used)X
1685(in)X
1772(developing)X
2153(applications)X
2565(is)X
2643(the)X
2766(ability)X
2995(to)X
3083(multiplex)X
3415(i/o)X
3525(requests)X
3814(among)X
576 5256(multiple)N
862(sockets)X
1118(and/or)X
1343(\256les.)X
1536(This)X
1698(is)X
1771(done)X
1947(using)X
2140(the)X
2 f
2258(select)X
1 f
2461(call:)X

9 p
%%Page: 9 9
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3717(PSD:21-9)X
864 720(#include)N
1160(<sys/time.h>)X
864 816(#include)N
1160(<sys/types.h>)X
884 912(...)N
864 1104(fd_set)N
1080(readmask,)X
1428(writemask,)X
1802(exceptmask;)X
864 1200(struct)N
1062(timeval)X
1322(timeout;)X
884 1296(...)N
864 1392(select\(nfds,)N
1252(&readmask,)X
1662(&writemask,)X
2098(&exceptmask,)X
2579(&timeout\);)X
2 f
576 1536(Select)N
1 f
800(takes)X
997(as)X
1097(arguments)X
1464(pointers)X
1755(to)X
1850(three)X
2044(sets,)X
2217(one)X
2366(for)X
2493(the)X
2624(set)X
2746(of)X
2846(\256le)X
2981(descriptors)X
3366(for)X
3493(which)X
3722(the)X
3853(caller)X
576 1632(wishes)N
815(to)X
898(be)X
995(able)X
1150(to)X
1233(read)X
1393(data)X
1548(on,)X
1669(one)X
1805(for)X
1919(those)X
2108(descriptors)X
2480(to)X
2562(which)X
2778(data)X
2932(is)X
3005(to)X
3087(be)X
3183(written,)X
3450(and)X
3586(one)X
3722(for)X
3836(which)X
576 1728(exceptional)N
979(conditions)X
1345(are)X
1477(pending;)X
1790(out-of-band)X
2202(data)X
2369(is)X
2455(the)X
2586(only)X
2761(exceptional)X
3164(condition)X
3499(currently)X
3823(imple-)X
576 1824(mented)N
836(by)X
940(the)X
1062(socket)X
1291(If)X
1369(the)X
1491(user)X
1649(is)X
1726(not)X
1852(interested)X
2188(in)X
2274(certain)X
2517(conditions)X
2873(\(i.e.,)X
3041(read,)X
3223(write,)X
3431(or)X
3521(exceptions\),)X
3934(the)X
576 1920(corresponding)N
1055(argument)X
1378(to)X
1460(the)X
2 f
1578(select)X
1 f
1781(should)X
2014(be)X
2110(a)X
2166(null)X
2310(pointer.)X
776 2044(Each)N
961(set)X
1074(is)X
1151(actually)X
1429(a)X
1489(structure)X
1794(containing)X
2156(an)X
2256(array)X
2446(of)X
2537(long)X
2703(integer)X
2950(bit)X
3058(masks;)X
3304(the)X
3426(size)X
3575(of)X
3666(the)X
3788(array)X
3979(is)X
576 2140(set)N
689(by)X
793(the)X
915(de\256nition)X
1245(FD_SETSIZE.)X
1762(The)X
1911(array)X
2101(is)X
2178(be)X
2278(long)X
2444(enough)X
2704(to)X
2790(hold)X
2955(one)X
3094(bit)X
3201(for)X
3318(each)X
3489(of)X
3579(FD_SETSIZE)X
576 2236(\256le)N
698(descriptors.)X
776 2360(The)N
939(macros)X
1209(FD_SET\()X
2 f
1520(fd,)X
1640(&mask)X
1 f
1867(\))X
1932(and)X
2086(FD_CLR\()X
2 f
2410(fd,)X
2530(&mask)X
1 f
2757(\))X
2822(have)X
3012(been)X
3202(provided)X
3526(for)X
3659(adding)X
3916(and)X
576 2456(removing)N
927(\256le)X
1073(descriptor)X
2 f
1438(fd)X
1 f
1544(in)X
1650(the)X
1792(set)X
2 f
1925(mask)X
1 f
2090(.)X
2174(The)X
2343(set)X
2476(should)X
2733(be)X
2853(zeroed)X
3112(before)X
3361(use,)X
3531(and)X
3690(the)X
3831(macro)X
576 2552(FD_ZERO\()N
2 f
954(&mask)X
1 f
1181(\))X
1230(has)X
1359(been)X
1533(provided)X
1840(to)X
1924(clear)X
2103(the)X
2223(set)X
2 f
2334(mask)X
1 f
2499(.)X
2561(The)X
2708(parameter)X
2 f
3052(nfds)X
1 f
3207(in)X
3291(the)X
2 f
3411(select)X
1 f
3617(call)X
3756(speci\256es)X
576 2648(the)N
694(range)X
893(of)X
980(\256le)X
1102(descriptors)X
1494(\(i.e.)X
1639(one)X
1775(plus)X
1928(the)X
2046(value)X
2240(of)X
2327(the)X
2445(largest)X
2679(descriptor\))X
3047(to)X
3129(be)X
3225(examined)X
3557(in)X
3639(a)X
3695(set.)X
776 2772(A)N
858(timeout)X
1126(value)X
1324(may)X
1486(be)X
1587(speci\256ed)X
1897(if)X
1971(the)X
2094(selection)X
2404(is)X
2482(not)X
2609(to)X
2696(last)X
2832(more)X
3022(than)X
3185(a)X
3246(predetermined)X
3735(period)X
3965(of)X
576 2868(time.)N
783(If)X
862(the)X
985(\256elds)X
1183(in)X
2 f
1270(timeout)X
1 f
1535(are)X
1659(set)X
1773(to)X
1860(0,)X
1945(the)X
2068(selection)X
2378(takes)X
2568(the)X
2691(form)X
2872(of)X
2964(a)X
2 f
3025(poll)X
1 f
3149(,)X
3194(returning)X
3513(immediately.)X
3978(If)X
576 2964(the)N
709(last)X
855(parameter)X
1212(is)X
1300(a)X
1371(null)X
1530(pointer,)X
1813(the)X
1947(selection)X
2268(will)X
2428(block)X
2642(inde\256nitely*.)X
2 f
3122(Select)X
1 f
3350(normally)X
3675(returns)X
3934(the)X
576 3060(number)N
844(of)X
934(\256le)X
1059(descriptors)X
1434(selected;)X
1738(if)X
1810(the)X
2 f
1931(select)X
1 f
2137(call)X
2276(returns)X
2522(due)X
2661(to)X
2746(the)X
2866(timeout)X
3132(expiring,)X
3441(then)X
3601(the)X
3721(value)X
3917(0)X
3979(is)X
576 3156(returned.)N
904(If)X
978(the)X
2 f
1097(select)X
1 f
1301(terminates)X
1656(because)X
1932(of)X
2020(an)X
2117(error)X
2295(or)X
2383(interruption,)X
2802(a)X
9 f
2859(-)X
1 f
2903(1)X
2964(is)X
3038(returned)X
3327(with)X
3490(the)X
3609(error)X
3787(number)X
576 3252(in)N
2 f
658(errno)X
1 f
836(,)X
876(and)X
1012(with)X
1174(the)X
1292(\256le)X
1414(descriptor)X
1755(masks)X
1975(unchanged.)X
776 3376(Assuming)N
1124(a)X
1184(successful)X
1538(return,)X
1774(the)X
1896(three)X
2081(sets)X
2225(will)X
2373(indicate)X
2652(which)X
2873(\256le)X
3000(descriptors)X
3377(are)X
3501(ready)X
3705(to)X
3792(be)X
3893(read)X
576 3472(from,)N
780(written)X
1035(to,)X
1145(or)X
1240(have)X
1420(exceptional)X
1818(conditions)X
2179(pending.)X
2505(The)X
2658(status)X
2867(of)X
2961(a)X
3024(\256le)X
3153(descriptor)X
3501(in)X
3590(a)X
3653(select)X
3863(mask)X
576 3568(may)N
738(be)X
838(tested)X
1049(with)X
1215(the)X
2 f
1337(FD_ISSET\(fd,)X
1817(&mask\))X
1 f
2095(macro,)X
2340(which)X
2560(returns)X
2807(a)X
2867(non-zero)X
3178(value)X
3377(if)X
2 f
3451(fd)X
1 f
3538(is)X
3616(a)X
3677(member)X
3965(of)X
576 3664(the)N
694(set)X
2 f
803(mask)X
1 f
968(,)X
1008(and)X
1144(0)X
1204(if)X
1273(it)X
1337(is)X
1410(not.)X
776 3788(To)N
889(determine)X
1235(if)X
1309(there)X
1495(are)X
1619(connections)X
2027(waiting)X
2292(on)X
2397(a)X
2458(socket)X
2688(to)X
2775(be)X
2876(used)X
3048(with)X
3215(an)X
2 f
3316(accept)X
1 f
3551(call,)X
2 f
3712(select)X
1 f
3920(can)X
576 3884(be)N
674(used,)X
863(followed)X
1170(by)X
1272(a)X
2 f
1330(FD_ISSET\(fd,)X
1808(&mask\))X
1 f
2084(macro)X
2307(to)X
2391(check)X
2601(for)X
2717(read)X
2878(readiness)X
3199(on)X
3301(the)X
3420(appropriate)X
3807(socket.)X
576 3980(If)N
2 f
655(FD_ISSET)X
1 f
1027(returns)X
1275(a)X
1336(non-zero)X
1647(value,)X
1866(indicating)X
2211(permission)X
2588(to)X
2676(read,)X
2861(then)X
3025(a)X
3087(connection)X
3465(is)X
3544(pending)X
3828(on)X
3934(the)X
576 4076(socket.)N
776 4200(As)N
887(an)X
985(example,)X
1299(to)X
1383(read)X
1545(data)X
1702(from)X
1881(two)X
2024(sockets,)X
2 f
2303(s1)X
1 f
2397(and)X
2 f
2536(s2)X
1 f
2630(as)X
2720(it)X
2787(is)X
2863(available)X
3176(from)X
3355(each)X
3526(and)X
3665(with)X
3830(a)X
3889(one-)X
576 4296(second)N
819(timeout,)X
1103(the)X
1221(following)X
1552(code)X
1724(might)X
1930(be)X
2026(used:)X
8 s
10 f
576 5312(hhhhhhhhhhhhhhhhhh)N
1 f
576 5392(*)N
627(To)X
717(be)X
796(more)X
946(speci\256c,)X
1176(a)X
1223(return)X
1394(takes)X
1544(place)X
1697(only)X
1830(when)X
1987(a)X
2034(descriptor)X
2308(is)X
2370(selectable,)X
2656(or)X
2728(when)X
2886(a)X
2934(signal)X
3107(is)X
3170(received)X
3405(by)X
3489(the)X
3587(caller,)X
576 5472(interrupting)N
894(the)X
988(system)X
1182(call.)X

10 p
%%Page: 10 10
8 s 8 xH 0 xS 1 f 1 i
10 s
576 384(PSD:21-10)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
864 720(#include)N
1160(<sys/time.h>)X
864 816(#include)N
1160(<sys/types.h>)X
884 912(...)N
864 1008(fd_set)N
1080(read_template;)X
864 1104(struct)N
1062(timeval)X
1322(wait;)X
884 1200(...)N
864 1296(for)N
978(\(;;\))X
1096({)X
1064 1392(wait.tv_sec)N
1447(=)X
1512(1;)X
1864(/*)X
1946(one)X
2082(second)X
2325(*/)X
1064 1488(wait.tv_usec)N
1487(=)X
1552(0;)X
1064 1680(FD_ZERO\(&read_template\);)N
1064 1872(FD_SET\(s1,)N
1486(&read_template\);)X
1064 1968(FD_SET\(s2,)N
1486(&read_template\);)X
1064 2160(nb)N
1164(=)X
1229(select\(FD_SETSIZE,)X
1932(&read_template,)X
2489(\(fd_set)X
2732(*\))X
2819(0,)X
2899(\(fd_set)X
3142(*\))X
3229(0,)X
3309(&wait\);)X
1064 2256(if)N
1133(\(nb)X
1260(<=)X
1370(0\))X
1457({)X
2 f
1264 2352(An)N
1373(error)X
1562(occurred)X
1872(during)X
2105(the)X
1 f
2223(select)X
2 f
2406(,)X
2446(or)X
1264 2448(the)N
1 f
1382(select)X
2 f
1585(timed)X
1783(out.)X
1 f
1064 2544(})N
1064 2736(if)N
1133(\(FD_ISSET\(s1,)X
1653(&read_template\)\))X
2244({)X
2 f
1264 2832(Socket)N
1494(#1)X
1594(is)X
1667(ready)X
1870(to)X
1952(be)X
2048(read)X
2215(from.)X
1 f
1064 2928(})N
1064 3120(if)N
1133(\(FD_ISSET\(s2,)X
1653(&read_template\)\))X
2244({)X
2 f
1264 3216(Socket)N
1494(#2)X
1594(is)X
1667(ready)X
1870(to)X
1952(be)X
2048(read)X
2215(from.)X
1 f
1064 3312(})N
864 3408(})N
776 3580(In)N
868(4.2,)X
1013(the)X
1136(arguments)X
1495(to)X
2 f
1583(select)X
1 f
1792(were)X
1975(pointers)X
2259(to)X
2347(integers)X
2627(instead)X
2880(of)X
2973(pointers)X
3257(to)X
2 f
3345(fd_set)X
1 f
3536(s.)X
3633(This)X
3801(type)X
3965(of)X
576 3676(call)N
716(will)X
864(still)X
1007(work)X
1196(as)X
1287(long)X
1453(as)X
1543(the)X
1664(number)X
1932(of)X
2022(\256le)X
2147(descriptors)X
2522(being)X
2723(examined)X
3058(is)X
3134(less)X
3277(than)X
3438(the)X
3559(number)X
3827(of)X
3917(bits)X
576 3772(in)N
658(an)X
754(integer;)X
1019(however,)X
1336(the)X
1454(methods)X
1745(illustrated)X
2085(above)X
2297(should)X
2530(be)X
2626(used)X
2793(in)X
2875(all)X
2975(current)X
3223(programs.)X
2 f
776 3896(Select)N
1 f
997(provides)X
1302(a)X
1367(synchronous)X
1802(multiplexing)X
2240(scheme.)X
2551(Asynchronous)X
3044(noti\256cation)X
3438(of)X
3535(output)X
3769(comple-)X
576 3992(tion,)N
745(input)X
934(availability,)X
1339(and)X
1480(exceptional)X
1875(conditions)X
2232(is)X
2309(possible)X
2595(through)X
2868(use)X
2999(of)X
3090(the)X
3212(SIGIO)X
3450(and)X
3590(SIGURG)X
3912(sig-)X
576 4088(nals)N
725(described)X
1053(in)X
1135(section)X
1382(5.)X
3 f
12 s
1505 4376(3.)N
1601(NETWORK)X
2137(LIBRARY)X
2602(ROUTINES)X
1 f
10 s
776 4692(The)N
931(discussion)X
1294(in)X
1386(section)X
1643(2)X
1713(indicated)X
2037(the)X
2166(possible)X
2459(need)X
2642(to)X
2735(locate)X
2958(and)X
3105(construct)X
3430(network)X
3724(addresses)X
576 4788(when)N
779(using)X
981(the)X
1108(interprocess)X
1525(communication)X
2052(facilities)X
2357(in)X
2448(a)X
2513(distributed)X
2884(environment.)X
3358(To)X
3476(aid)X
3603(in)X
3694(this)X
3838(task)X
3996(a)X
576 4884(number)N
842(of)X
930(routines)X
1209(have)X
1382(been)X
1555(added)X
1768(to)X
1851(the)X
1970(standard)X
2263(C)X
2337(run-time)X
2634(library.)X
2909(In)X
2997(this)X
3133(section)X
3381(we)X
3496(will)X
3641(consider)X
3934(the)X
576 4980(new)N
737(routines)X
1022(provided)X
1334(to)X
1423(manipulate)X
1806(network)X
2096(addresses.)X
2471(While)X
2694(the)X
2818(4.4BSD)X
3099(networking)X
3490(facilities)X
3792(support)X
576 5076(the)N
703(Internet)X
982(protocols)X
1309(and)X
1454(the)X
1581(Xerox)X
1811(NS)X
1942(protocols,)X
2290(most)X
2475(of)X
2572(the)X
2700(routines)X
2988(presented)X
3326(in)X
3418(this)X
3563(section)X
3820(do)X
3930(not)X
576 5172(apply)N
780(to)X
868(the)X
992(NS)X
1120(domain.)X
1425(Unless)X
1668(otherwise)X
2005(stated,)X
2237(it)X
2306(should)X
2544(be)X
2645(assumed)X
2946(that)X
3091(the)X
3214(routines)X
3497(presented)X
3830(in)X
3917(this)X
576 5268(section)N
823(do)X
923(not)X
1045(apply)X
1243(to)X
1325(the)X
1443(NS)X
1565(domain.)X
776 5392(Locating)N
1087(a)X
1149(service)X
1403(on)X
1510(a)X
1573(remote)X
1823(host)X
1983(requires)X
2269(many)X
2474(levels)X
2688(of)X
2782(mapping)X
3089(before)X
3322(client)X
3527(and)X
3670(server)X
3894(may)X
576 5488(communicate.)N
1079(A)X
1168(service)X
1427(is)X
1511(assigned)X
1818(a)X
1884(name)X
2088(which)X
2314(is)X
2397(intended)X
2703(for)X
2827(human)X
3075(consumption;)X
3540(e.g.)X
3686(``the)X
2 f
3868(login)X
576 5584(server)N
1 f
804(on)X
911(host)X
1071(monet''.)X
1392(This)X
1561(name,)X
1783(and)X
1927(the)X
2053(name)X
2255(of)X
2350(the)X
2476(peer)X
2643(host,)X
2824(must)X
3007(then)X
3173(be)X
3277(translated)X
3617(into)X
3769(network)X

11 p
%%Page: 11 11
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-11)X
2 f
576 672(addresses)N
1 f
917(which)X
1138(are)X
1262(not)X
1389(necessarily)X
1771(suitable)X
2045(for)X
2164(human)X
2407(consumption.)X
2885(Finally,)X
3156(the)X
3279(address)X
3544(must)X
3723(then)X
3885(used)X
576 768(in)N
660(locating)X
940(a)X
998(physical)X
2 f
1287(location)X
1 f
1572(and)X
2 f
1711(route)X
1 f
1903(to)X
1988(the)X
2109(service.)X
2400(The)X
2548(speci\256cs)X
2847(of)X
2937(these)X
3125(three)X
3309(mappings)X
3643(are)X
3765(likely)X
3970(to)X
576 864(vary)N
747(between)X
1043(network)X
1334(architectures.)X
1813(For)X
1951(instance,)X
2261(it)X
2332(is)X
2412(desirable)X
2729(for)X
2850(a)X
2913(network)X
3203(to)X
3292(not)X
3421(require)X
3676(hosts)X
3867(to)X
3956(be)X
576 960(named)N
814(in)X
900(such)X
1071(a)X
1131(way)X
1289(that)X
1433(their)X
1604(physical)X
1895(location)X
2177(is)X
2254(known)X
2496(by)X
2600(the)X
2723(client)X
2926(host.)X
3124(Instead,)X
3401(underlying)X
3773(services)X
576 1056(in)N
660(the)X
779(network)X
1063(may)X
1222(discover)X
1515(the)X
1634(actual)X
1847(location)X
2126(of)X
2214(the)X
2333(host)X
2487(at)X
2566(the)X
2685(time)X
2848(a)X
2905(client)X
3104(host)X
3258(wishes)X
3497(to)X
3580(communicate.)X
576 1152(This)N
749(ability)X
984(to)X
1077(have)X
1260(hosts)X
1455(named)X
1700(in)X
1793(a)X
1860(location)X
2149(independent)X
2572(manner)X
2844(may)X
3013(induce)X
3259(overhead)X
3586(in)X
3680(connection)X
576 1248(establishment,)N
1064(as)X
1159(a)X
1223(discovery)X
1563(process)X
1832(must)X
2015(take)X
2177(place,)X
2395(but)X
2525(allows)X
2762(a)X
2826(host)X
2987(to)X
3077(be)X
3181(physically)X
3538(mobile)X
3788(without)X
576 1344(requiring)N
890(it)X
954(to)X
1036(notify)X
1247(its)X
1342(clientele)X
1634(of)X
1721(its)X
1816(current)X
2064(location.)X
776 1468(Standard)N
1081(routines)X
1359(are)X
1478(provided)X
1783(for:)X
1919(mapping)X
2219(host)X
2372(names)X
2598(to)X
2681(network)X
2965(addresses,)X
3314(network)X
3598(names)X
3824(to)X
3907(net-)X
576 1564(work)N
762(numbers,)X
1079(protocol)X
1366(names)X
1591(to)X
1673(protocol)X
1960(numbers,)X
2276(and)X
2412(service)X
2660(names)X
2885(to)X
2967(port)X
3116(numbers)X
3412(and)X
3548(the)X
3666(appropriate)X
576 1660(protocol)N
863(to)X
945(use)X
1072(in)X
1155(communicating)X
1674(with)X
1837(the)X
1956(server)X
2174(process.)X
2476(The)X
2622(\256le)X
2745(<)X
2 f
2790(netdb.h)X
1 f
3028(>)X
3094(must)X
3270(be)X
3367(included)X
3664(when)X
3859(using)X
576 1756(any)N
712(of)X
799(these)X
984(routines.)X
3 f
576 1948(3.1.)N
736(Host)X
916(names)X
1 f
776 2072(An)N
894(Internet)X
1164(host)X
1317(name)X
1511(to)X
1593(address)X
1854(mapping)X
2154(is)X
2227(represented)X
2618(by)X
2718(the)X
2 f
2836(hostent)X
1 f
3087(structure:)X
864 2216(struct)N
1209(hostent)X
1460({)X
1209 2312(char)N
1497(*h_name;)X
2361(/*)X
2443(of\256cial)X
2690(name)X
2884(of)X
2971(host)X
3124(*/)X
1209 2408(char)N
1497(**h_aliases;)X
2361(/*)X
2443(alias)X
2610(list)X
2727(*/)X
1209 2504(int)N
1497(h_addrtype;)X
2361(/*)X
2443(host)X
2596(address)X
2857(type)X
3015(\(e.g.,)X
3198(AF_INET\))X
3570(*/)X
1209 2600(int)N
1497(h_length;)X
2361(/*)X
2443(length)X
2663(of)X
2750(address)X
3011(*/)X
1209 2696(char)N
1497(**h_addr_list;)X
2361(/*)X
2443(list)X
2560(of)X
2647(addresses,)X
2995(null)X
3139(terminated)X
3502(*/)X
864 2792(};)N
864 2984(#de\256ne)N
1209(h_addr)X
1497(h_addr_list[0])X
2361(/*)X
2443(\256rst)X
2587(address,)X
2868(network)X
3151(byte)X
3309(order)X
3499(*/)X
576 3128(The)N
724(routine)X
2 f
974(gethostbyname)X
1 f
1455(\(3N\))X
1630(takes)X
1818(an)X
1918(Internet)X
2192(host)X
2349(name)X
2547(and)X
2687(returns)X
2934(a)X
2 f
2994(hostent)X
1 f
3249(structure,)X
3574(while)X
3776(the)X
3898(rou-)X
576 3224(tine)N
2 f
716(gethostbyaddr)X
1 f
1174(\(3N\))X
1346(maps)X
1535(Internet)X
1805(host)X
1958(addresses)X
2286(into)X
2430(a)X
2 f
2486(hostent)X
1 f
2737(structure.)X
776 3348(The)N
931(of\256cial)X
1188(name)X
1392(of)X
1489(the)X
1617(host)X
1780(and)X
1926(its)X
2031(public)X
2262(aliases)X
2507(are)X
2637(returned)X
2936(by)X
3047(these)X
3243(routines,)X
3552(along)X
3761(with)X
3934(the)X
576 3444(address)N
838(type)X
997(\(family\))X
1281(and)X
1418(a)X
1475(null)X
1620(terminated)X
1984(list)X
2102(of)X
2190(variable)X
2470(length)X
2691(address.)X
2993(This)X
3156(list)X
3274(of)X
3362(addresses)X
3691(is)X
3764(required)X
576 3540(because)N
854(it)X
921(is)X
997(possible)X
1282(for)X
1399(a)X
1458(host)X
1614(to)X
1699(have)X
1874(many)X
2075(addresses,)X
2427(all)X
2531(having)X
2773(the)X
2895(same)X
3084(name.)X
3322(The)X
2 f
3471(h_addr)X
1 f
3726(de\256nition)X
576 3636(is)N
654(provided)X
964(for)X
1083(backward)X
1421(compatibility,)X
1892(and)X
2033(is)X
2111(de\256ned)X
2372(to)X
2459(be)X
2560(the)X
2683(\256rst)X
2831(address)X
3096(in)X
3182(the)X
3304(list)X
3425(of)X
3516(addresses)X
3848(in)X
3934(the)X
2 f
576 3732(hostent)N
1 f
827(structure.)X
776 3856(The)N
938(database)X
1252(for)X
1383(these)X
1586(calls)X
1771(is)X
1862(provided)X
2185(either)X
2406(by)X
2524(the)X
2660(\256le)X
2 f
2800(/etc/hosts)X
1 f
3140(\()X
2 f
3167(hosts)X
1 f
3344(\(5\)\),)X
3523(or)X
3628(by)X
3746(use)X
3891(of)X
3996(a)X
576 3952(nameserver,)N
2 f
990(named)X
1 f
1217(\(8\).)X
1374(Because)X
1664(of)X
1753(the)X
1873(differences)X
2253(in)X
2337(these)X
2524(databases)X
2854(and)X
2992(their)X
3161(access)X
3389(protocols,)X
3729(the)X
3849(infor-)X
576 4048(mation)N
820(returned)X
1110(may)X
1270(differ.)X
1511(When)X
1725(using)X
1920(the)X
2040(host)X
2195(table)X
2373(version)X
2631(of)X
2 f
2720(gethostbyname)X
1 f
3201(,)X
3243(only)X
3407(one)X
3545(address)X
3809(will)X
3956(be)X
576 4144(returned,)N
885(but)X
1008(all)X
1109(listed)X
1303(aliases)X
1538(will)X
1683(be)X
1780(included.)X
2117(The)X
2263(nameserver)X
2655(version)X
2912(may)X
3071(return)X
3284(alternate)X
3582(addresses,)X
3930(but)X
576 4240(will)N
720(not)X
842(provide)X
1107(any)X
1243(aliases)X
1477(other)X
1662(than)X
1820(one)X
1956(given)X
2154(as)X
2241(argument.)X
776 4364(Unlike)N
1014(Internet)X
1284(names,)X
1529(NS)X
1651(names)X
1877(are)X
1997(always)X
2241(mapped)X
2516(into)X
2661(host)X
2815(addresses)X
3144(by)X
3245(the)X
3364(use)X
3492(of)X
3580(a)X
3637(standard)X
3930(NS)X
2 f
576 4460(Clearinghouse)N
1084(service)X
1 f
1312(,)X
1369(a)X
1442(distributed)X
1820(name)X
2030(and)X
2182(authentication)X
2672(server.)X
2945(The)X
3106(algorithms)X
3484(for)X
3614(mapping)X
3930(NS)X
576 4556(names)N
801(to)X
883(addresses)X
1211(via)X
1329(a)X
1385(Clearinghouse)X
1868(are)X
1987(rather)X
2196(complicated,)X
2629(and)X
2766(the)X
2885(routines)X
3164(are)X
3284(not)X
3407(part)X
3553(of)X
3641(the)X
3760(standard)X
576 4652(libraries.)N
903(The)X
1052(user-contributed)X
1602(Courier)X
1871(\(Xerox)X
2123(remote)X
2370(procedure)X
2716(call)X
2856(protocol\))X
3174(compiler)X
3483(contains)X
3774(routines)X
576 4748(to)N
658(accomplish)X
1043(this)X
1178(mapping;)X
1500(see)X
1623(the)X
1741(documentation)X
2237(and)X
2373(examples)X
2696(provided)X
3001(therein)X
3244(for)X
3358(more)X
3544(information.)X
3983(It)X
576 4844(is)N
653(expected)X
963(that)X
1107(almost)X
1344(all)X
1448(software)X
1749(that)X
1893(has)X
2024(to)X
2110(communicate)X
2566(using)X
2762(NS)X
2887(will)X
3034(need)X
3209(to)X
3294(use)X
3424(the)X
3545(facilities)X
3844(of)X
3934(the)X
576 4940(Courier)N
841(compiler.)X
776 5064(An)N
894(NS)X
1016(host)X
1169(address)X
1430(is)X
1503(represented)X
1894(by)X
1994(the)X
2112(following:)X

12 p
%%Page: 12 12
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-12)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
864 720(union)N
1066(ns_host)X
1330({)X
1064 816(u_char)N
1464(c_host[6];)X
1064 912(u_short)N
1464(s_host[3];)X
864 1008(};)N
864 1200(union)N
1066(ns_net)X
1295({)X
1064 1296(u_char)N
1464(c_net[4];)X
1064 1392(u_short)N
1464(s_net[2];)X
864 1488(};)N
864 1680(struct)N
1062(ns_addr)X
1336({)X
1064 1776(union)N
1266(ns_net)X
1664(x_net;)X
1064 1872(union)N
1266(ns_host)X
1664(x_host;)X
1064 1968(u_short)N
1464(x_port;)X
864 2064(};)N
576 2208(The)N
721(following)X
1052(code)X
1224(fragment)X
1534(inserts)X
1763(a)X
1819(known)X
2057(NS)X
2179(address)X
2440(into)X
2584(a)X
2 f
2640(ns_addr)X
1 f
2902(:)X
864 2352(#include)N
1160(<sys/types.h>)X
864 2448(#include)N
1160(<sys/socket.h>)X
864 2544(#include)N
1160(<netns/ns.h>)X
884 2640(...)N
864 2736(u_long)N
1106(netnum;)X
864 2832(struct)N
1062(sockaddr_ns)X
1483(dst;)X
884 2928(...)N
864 3024 0.3500(bzero\(\(char)AN
1256(*\)&dst,)X
1518(sizeof\(dst\)\);)X
864 3216(/*)N
884 3312(*)N
944(There)X
1152(is)X
1225(no)X
1325(convenient)X
1697(way)X
1851(to)X
1933(assign)X
2153(a)X
2209(long)X
884 3408(*)N
944(integer)X
1187(to)X
1269(a)X
1325(``union)X
1581(ns_net'')X
1864(at)X
1942(present;)X
2216(in)X
884 3504(*)N
944(the)X
1062(future,)X
1294(something)X
1647(will)X
1791(hopefully)X
2118(be)X
2214(provided,)X
884 3600(*)N
944(but)X
1066(this)X
1201(is)X
1274(the)X
1392(portable)X
1675(way)X
1829(to)X
1911(go)X
2011(for)X
2125(now.)X
884 3696(*)N
944(The)X
1089(network)X
1372(number)X
1637(below)X
1853(is)X
1926(the)X
2044(one)X
2180(for)X
2294(the)X
2412(NS)X
2534(net)X
884 3792(*)N
944(that)X
1084(the)X
1202(desired)X
1454(host)X
1607(\(gyre\))X
1824(is)X
1897(on.)X
884 3888(*/)N
864 3984(netnum)N
1124(=)X
1189(htonl\(2266\);)X
864 4080(dst.sns_addr.x_net)N
1480(=)X
1545(*\(union)X
1814(ns_net)X
2043(*\))X
2130(&netnum;)X
864 4176(dst.sns_family)N
1348(=)X
1413(AF_NS;)X
864 4368(/*)N
884 4464(*)N
944(host)X
1097(2.7.1.0.2a.18)X
1533(==)X
1643("gyre:Computer)X
2181(Science:UofMaryland")X
884 4560(*/)N
864 4656(dst.sns_addr.x_host.c_host[0])N
1838(=)X
1903(0x02;)X
864 4752(dst.sns_addr.x_host.c_host[1])N
1838(=)X
1903(0x07;)X
864 4848(dst.sns_addr.x_host.c_host[2])N
1838(=)X
1903(0x01;)X
864 4944(dst.sns_addr.x_host.c_host[3])N
1838(=)X
1903(0x00;)X
864 5040(dst.sns_addr.x_host.c_host[4])N
1838(=)X
1903(0x2a;)X
864 5136(dst.sns_addr.x_host.c_host[5])N
1838(=)X
1903(0x18;)X
864 5232(dst.sns_addr.x_port)N
1511(=)X
1576(htons\(75\);)X

13 p
%%Page: 13 13
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-13)X
3 f
576 672(3.2.)N
736(Network)X
1055(names)X
1 f
776 796(As)N
888(for)X
1005(host)X
1161(names,)X
1409(routines)X
1690(for)X
1807(mapping)X
2110(network)X
2397(names)X
2626(to)X
2712(numbers,)X
3032(and)X
3172(back,)X
3368(are)X
3491(provided.)X
3840(These)X
576 892(routines)N
854(return)X
1066(a)X
2 f
1122(netent)X
1 f
1338(structure:)X
864 1036(/*)N
884 1132(*)N
944(Assumption)X
1350(here)X
1509(is)X
1582(that)X
1722(a)X
1778(network)X
2061(number)X
884 1228(*)N
944(\256ts)X
1061(in)X
1143(32)X
1243(bits)X
1378(--)X
1452(probably)X
1757(a)X
1813(poor)X
1980(one.)X
884 1324(*/)N
864 1420(struct)N
1152(netent)X
1368({)X
1152 1516(char)N
1584(*n_name;)X
2304(/*)X
2386(of\256cial)X
2633(name)X
2827(of)X
2914(net)X
3032(*/)X
1152 1612(char)N
1584(**n_aliases;)X
2304(/*)X
2386(alias)X
2553(list)X
2670(*/)X
1152 1708(int)N
1584(n_addrtype;)X
2304(/*)X
2386(net)X
2504(address)X
2765(type)X
2923(*/)X
1152 1804(int)N
1584(n_net;)X
2304(/*)X
2386(network)X
2669(number,)X
2954(host)X
3107(byte)X
3265(order)X
3455(*/)X
864 1900(};)N
576 2044(The)N
729(routines)X
2 f
1015(getnetbyname)X
1 f
1461(\(3N\),)X
2 f
1661(getnetbynumber)X
1 f
2178(\(3N\),)X
2378(and)X
2 f
2522(getnetent)X
1 f
2816(\(3N\))X
2997(are)X
3125(the)X
3252(network)X
3544(counterparts)X
3970(to)X
576 2140(the)N
694(host)X
847(routines)X
1125(described)X
1453(above.)X
1705(The)X
1850(routines)X
2128(extract)X
2367(their)X
2534(information)X
2932(from)X
2 f
3108(/etc/networks)X
1 f
3535(.)X
776 2264(NS)N
901(network)X
1187(numbers)X
1486(are)X
1608(determined)X
1992(either)X
2198(by)X
2302(asking)X
2535(your)X
2706(local)X
2886(Xerox)X
3111(Network)X
3416(Administrator)X
3889(\(and)X
576 2360(hardcoding)N
960(the)X
1081(information)X
1482(into)X
1629(your)X
1799(code\),)X
2021(or)X
2111(by)X
2214(querying)X
2522(the)X
2642(Clearinghouse)X
3127(for)X
3243(addresses.)X
3613(The)X
3760(internet-)X
576 2456(work)N
766(router)X
983(is)X
1061(the)X
1184(only)X
1351(process)X
1617(that)X
1762(needs)X
1970(to)X
2057(manipulate)X
2438(network)X
2726(numbers)X
3027(on)X
3132(a)X
3193(regular)X
3446(basis;)X
3654(if)X
3729(a)X
3791(process)X
576 2552(wishes)N
817(to)X
902(communicate)X
1357(with)X
1522(a)X
1581(machine,)X
1896(it)X
1963(should)X
2199(ask)X
2329(the)X
2450(Clearinghouse)X
2936(for)X
3052(that)X
3194(machine's)X
3546(address)X
3809(\(which)X
576 2648(will)N
720(include)X
976(the)X
1094(net)X
1212(number\).)X
3 f
576 2840(3.3.)N
736(Protocol)X
1046(names)X
1 f
776 2964(For)N
914(protocols,)X
1259(which)X
1482(are)X
1608(de\256ned)X
1871(in)X
2 f
1961(/etc/protocols)X
1 f
(,)S
2449(the)X
2 f
2575(protoent)X
1 f
2874(structure)X
3183(de\256nes)X
3438(the)X
3564(protocol-name)X
576 3060(mapping)N
876(used)X
1043(with)X
1205(the)X
1323(routines)X
2 f
1601(getprotobyname)X
1 f
2122(\(3N\),)X
2 f
2314(getprotobynumber)X
1 f
2906(\(3N\),)X
3098(and)X
2 f
3234(getprotoent)X
1 f
3603(\(3N\):)X
864 3204(struct)N
1152(protoent)X
1439({)X
1152 3300(char)N
1584(*p_name;)X
2304(/*)X
2386(of\256cial)X
2633(protocol)X
2920(name)X
3114(*/)X
1152 3396(char)N
1584(**p_aliases;)X
2304(/*)X
2386(alias)X
2553(list)X
2670(*/)X
1152 3492(int)N
1584(p_proto;)X
2304(/*)X
2386(protocol)X
2673(number)X
2938(*/)X
864 3588(};)N
776 3760(In)N
871(the)X
997(NS)X
1127(domain,)X
1415(protocols)X
1741(are)X
1868(indicated)X
2190(by)X
2298(the)X
2424("client)X
2664(type")X
2864(\256eld)X
3035(of)X
3131(a)X
3196(IDP)X
3354(header.)X
3638(No)X
3765(protocol)X
576 3856(database)N
873(exists;)X
1097(see)X
1220(section)X
1467(5)X
1527(for)X
1641(more)X
1826(information.)X
3 f
576 4048(3.4.)N
736(Service)X
1006(names)X
1 f
776 4172(Information)N
1196(regarding)X
1541(services)X
1837(is)X
1927(a)X
2000(bit)X
2121(more)X
2323(complicated.)X
2793(A)X
2889(service)X
3155(is)X
3246(expected)X
3570(to)X
3670(reside)X
3900(at)X
3996(a)X
576 4268(speci\256c)N
843(``port'')X
1102(and)X
1240(employ)X
1502(a)X
1560(particular)X
1890(communication)X
2410(protocol.)X
2739(This)X
2903(view)X
3081(is)X
3156(consistent)X
3498(with)X
3662(the)X
3782(Internet)X
576 4364(domain,)N
858(but)X
982(inconsistent)X
1386(with)X
1550(other)X
1737(network)X
2022(architectures.)X
2495(Further,)X
2774(a)X
2833(service)X
3084(may)X
3245(reside)X
3460(on)X
3563(multiple)X
3852(ports.)X
576 4460(If)N
652(this)X
789(occurs,)X
1041(the)X
1160(higher)X
1386(level)X
1563(library)X
1798(routines)X
2077(will)X
2222(have)X
2395(to)X
2478(be)X
2575(bypassed)X
2890(or)X
2978(extended.)X
3329(Services)X
3622(available)X
3933(are)X
576 4556(contained)N
908(in)X
990(the)X
1108(\256le)X
2 f
1230(/etc/services)X
1 f
1627(.)X
1687(A)X
1765(service)X
2013(mapping)X
2313(is)X
2386(described)X
2714(by)X
2814(the)X
2 f
2932(servent)X
1 f
3184(structure,)X
864 4700(struct)N
1152(servent)X
1404({)X
1152 4796(char)N
1584(*s_name;)X
2304(/*)X
2386(of\256cial)X
2633(service)X
2881(name)X
3075(*/)X
1152 4892(char)N
1584(**s_aliases;)X
2304(/*)X
2386(alias)X
2553(list)X
2670(*/)X
1152 4988(int)N
1584(s_port;)X
2304(/*)X
2386(port)X
2535(number,)X
2820(network)X
3103(byte)X
3261(order)X
3451(*/)X
1152 5084(char)N
1584(*s_proto;)X
2304(/*)X
2386(protocol)X
2673(to)X
2755(use)X
2882(*/)X
864 5180(};)N
576 5324(The)N
729(routine)X
2 f
985(getservbyname)X
1 f
1467(\(3N\))X
1648(maps)X
1846(service)X
2103(names)X
2337(to)X
2428(a)X
2493(servent)X
2754(structure)X
3064(by)X
3173(specifying)X
3536(a)X
3601(service)X
3858(name)X
576 5420(and,)N
732(optionally,)X
1096(a)X
1152(qualifying)X
1501(protocol.)X
1828(Thus)X
2008(the)X
2126(call)X
864 5564(sp)N
955(=)X
1020 0.1420(getservbyname\("telnet",)AX
1817(\(char)X
2003(*\))X
2090(0\);)X

14 p
%%Page: 14 14
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-14)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
576 672(returns)N
819(the)X
937(service)X
1185(speci\256cation)X
1610(for)X
1724(a)X
1780(telnet)X
1978(server)X
2195(using)X
2388(any)X
2524(protocol,)X
2831(while)X
3029(the)X
3147(call)X
864 816(sp)N
955(=)X
1020 0.1420(getservbyname\("telnet",)AX
1817("tcp"\);)X
576 960(returns)N
846(only)X
1035(that)X
1202(telnet)X
1427(server)X
1671(which)X
1915(uses)X
2101(the)X
2247(TCP)X
2441(protocol.)X
2796(The)X
2969(routines)X
2 f
3275(getservbyport)X
1 f
3716(\(3N\))X
3916(and)X
2 f
576 1056(getservent)N
1 f
906(\(3N\))X
1087(are)X
1215(also)X
1372(provided.)X
1725(The)X
2 f
1878(getservbyport)X
1 f
2347(routine)X
2602(has)X
2737(an)X
2841(interface)X
3151(similar)X
3401(to)X
3491(that)X
3639(provided)X
3952(by)X
2 f
576 1152(getservbyname)N
1 f
1058(;)X
1100(an)X
1196(optional)X
1478(protocol)X
1765(name)X
1959(may)X
2117(be)X
2213(speci\256ed)X
2518(to)X
2600(qualify)X
2847(lookups.)X
776 1276(In)N
863(the)X
981(NS)X
1103(domain,)X
1383(services)X
1662(are)X
1781(handled)X
2055(by)X
2155(a)X
2211(central)X
2450(dispatcher)X
2800(provided)X
3105(as)X
3192(part)X
3337(of)X
3424(the)X
3543(Courier)X
3809(remote)X
576 1372(procedure)N
927(call)X
1072(facilities.)X
1417(Again,)X
1662(the)X
1789(reader)X
2020(is)X
2102(referred)X
2387(to)X
2478(the)X
2605(Courier)X
2879(compiler)X
3193(documentation)X
3698(and)X
3843(to)X
3934(the)X
576 1468(Xerox)N
797(standard*)X
1129(for)X
1243(further)X
1482(details.)X
3 f
576 1660(3.5.)N
736(Miscellaneous)X
1 f
776 1784(With)N
967(the)X
1096(support)X
1367(routines)X
1656(described)X
1995(above,)X
2239(an)X
2347(Internet)X
2629(application)X
3017(program)X
3321(should)X
3566(rarely)X
3786(have)X
3970(to)X
576 1880(deal)N
746(directly)X
1027(with)X
1205(addresses.)X
1589(This)X
1767(allows)X
2012(services)X
2307(to)X
2405(be)X
2517(developed)X
2883(as)X
2986(much)X
3200(as)X
3303(possible)X
3601(in)X
3698(a)X
3769(network)X
576 1976(independent)N
991(fashion.)X
1290(It)X
1362(is)X
1438(clear,)X
1638(however,)X
1958(that)X
2101(purging)X
2373(all)X
2477(network)X
2764(dependencies)X
3221(is)X
3298(very)X
3465(dif\256cult.)X
3782(So)X
3890(long)X
576 2072(as)N
672(the)X
799(user)X
962(is)X
1044(required)X
1341(to)X
1432(supply)X
1674(network)X
1966(addresses)X
2303(when)X
2505(naming)X
2773(services)X
3060(and)X
3204(sockets)X
3468(there)X
3657(will)X
3809(always)X
576 2168(some)N
769(network)X
1056(dependency)X
1464(in)X
1550(a)X
1610(program.)X
1946(For)X
2081(example,)X
2397(the)X
2519(normal)X
2770(code)X
2946(included)X
3247(in)X
3334(client)X
3537(programs,)X
3885(such)X
576 2264(as)N
668(the)X
791(remote)X
1039(login)X
1228(program,)X
1545(is)X
1623(of)X
1714(the)X
1836(form)X
2016(shown)X
2249(in)X
2335(Figure)X
2568(1.)X
2672(\(This)X
2865(example)X
3161(will)X
3309(be)X
3409(considered)X
3781(in)X
3867(more)X
576 2360(detail)N
774(in)X
856(section)X
1103(4.\))X
776 2484(If)N
851(we)X
966(wanted)X
1219(to)X
1302(make)X
1497(the)X
1616(remote)X
1860(login)X
2045(program)X
2338(independent)X
2751(of)X
2839(the)X
2959(Internet)X
3231(protocols)X
3551(and)X
3689(addressing)X
576 2580(scheme)N
842(we)X
961(would)X
1186(be)X
1287(forced)X
1518(to)X
1605(add)X
1746(a)X
1807(layer)X
1993(of)X
2085(routines)X
2368(which)X
2588(masked)X
2857(the)X
2979(network)X
3266(dependent)X
3620(aspects)X
3876(from)X
576 2676(the)N
704(mainstream)X
1109(login)X
1304(code.)X
1527(For)X
1669(the)X
1798(current)X
2057(facilities)X
2364(available)X
2685(in)X
2778(the)X
2907(system)X
3160(this)X
3306(does)X
3484(not)X
3617(appear)X
3863(to)X
3956(be)X
576 2772(worthwhile.)N
776 2896(Aside)N
992(from)X
1177(the)X
1304(address-related)X
1820(data)X
1983(base)X
2155(routines,)X
2462(there)X
2652(are)X
2781(several)X
3039(other)X
3234(routines)X
3522(available)X
3842(in)X
3934(the)X
576 2992(run-time)N
886(library)X
1134(which)X
1364(are)X
1497(of)X
1598(interest)X
1867(to)X
1962(users.)X
2200(These)X
2425(are)X
2557(intended)X
2866(mostly)X
3116(to)X
3211(simplify)X
3510(manipulation)X
3965(of)X
576 3088(names)N
808(and)X
951(addresses.)X
1326(Table)X
1536(1)X
1603(summarizes)X
2013(the)X
2138(routines)X
2423(for)X
2544(manipulating)X
2994(variable)X
3281(length)X
3509(byte)X
3675(strings)X
3916(and)X
576 3184(handling)N
876(byte)X
1034(swapping)X
1361(of)X
1448(network)X
1731(addresses)X
2059(and)X
2195(values.)X
10 f
1060 3296(i)N
1068(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1100 3392(Call)N
1732(Synopsis)X
10 f
1060 3408(i)N
1068(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1 f
1100 3504(bcmp\(s1,)N
1416(s2,)X
1527(n\))X
1732(compare)X
2029(byte-strings;)X
2449(0)X
2509(if)X
2578(same,)X
2783(not)X
2905(0)X
2965(otherwise)X
1100 3600(bcopy\(s1,)N
1434(s2,)X
1545(n\))X
1732(copy)X
1908(n)X
1968(bytes)X
2157(from)X
2333(s1)X
2424(to)X
2506(s2)X
1100 3696(bzero\(base,)N
1489(n\))X
1732(zero-\256ll)X
2006(n)X
2066(bytes)X
2255(starting)X
2515(at)X
2593(base)X
1100 3792(htonl\(val\))N
1732(convert)X
1993(32-bit)X
2204(quantity)X
2486(from)X
2662(host)X
2815(to)X
2897(network)X
3180(byte)X
3338(order)X
1100 3888(htons\(val\))N
1732(convert)X
1993(16-bit)X
2204(quantity)X
2486(from)X
2662(host)X
2815(to)X
2897(network)X
3180(byte)X
3338(order)X
1100 3984(ntohl\(val\))N
1732(convert)X
1993(32-bit)X
2204(quantity)X
2486(from)X
2662(network)X
2945(to)X
3027(host)X
3180(byte)X
3338(order)X
1100 4080(ntohs\(val\))N
1732(convert)X
1993(16-bit)X
2204(quantity)X
2486(from)X
2662(network)X
2945(to)X
3027(host)X
3180(byte)X
3338(order)X
10 f
1060 4096(i)N
1068(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)X
1060(c)X
4016(c)Y
3936(c)Y
3856(c)Y
3776(c)Y
3696(c)Y
3616(c)Y
3536(c)Y
3456(c)Y
3376(c)Y
1672 4096(c)N
4016(c)Y
3936(c)Y
3856(c)Y
3776(c)Y
3696(c)Y
3616(c)Y
3536(c)Y
3456(c)Y
3376(c)Y
3548 4096(c)N
4016(c)Y
3936(c)Y
3856(c)Y
3776(c)Y
3696(c)Y
3616(c)Y
3536(c)Y
3456(c)Y
3376(c)Y
1 f
1829 4288(Table)N
2032(1.)X
2132(C)X
2205(run-time)X
2501(routines.)X
776 4412(The)N
925(byte)X
1087(swapping)X
1418(routines)X
1700(are)X
1823(provided)X
2132(because)X
2411(the)X
2533(operating)X
2860(system)X
3107(expects)X
3373(addresses)X
3706(to)X
3793(be)X
3894(sup-)X
576 4508(plied)N
762(in)X
850(network)X
1139(order)X
1334(\(aka)X
1498(``big-endian'')X
1974(order\).)X
2236(On)X
2359(``little-endian'')X
2879(architectures,)X
3335(such)X
3507(as)X
3599(Intel)X
3771(x86)X
3916(and)X
576 4604(VAX,)N
795(host)X
953(byte)X
1116(ordering)X
1413(is)X
1492(different)X
1795(than)X
1959(network)X
2248(byte)X
2412(ordering.)X
2750(Consequently,)X
3236(programs)X
3565(are)X
3690(sometimes)X
576 4700(required)N
866(to)X
950(byte)X
1110(swap)X
1297(quantities.)X
1670(The)X
1817(library)X
2053(routines)X
2333(which)X
2551(return)X
2764(network)X
3048(addresses)X
3377(provide)X
3643(them)X
3824(in)X
3907(net-)X
576 4796(work)N
761(order)X
951(so)X
1042(that)X
1182(they)X
1340(may)X
1498(simply)X
1735(be)X
1831(copied)X
2065(into)X
2209(the)X
2327(structures)X
2659(provided)X
2964(to)X
3046(the)X
3165(system.)X
3448(This)X
3611(implies)X
3867(users)X
576 4892(should)N
817(encounter)X
1162(the)X
1288(byte)X
1454(swapping)X
1788(problem)X
2082(only)X
2251(when)X
2 f
2452(interpreting)X
1 f
2861(network)X
3151(addresses.)X
3526(For)X
3664(example,)X
3983(if)X
576 4988(an)N
672(Internet)X
942(port)X
1091(is)X
1164(to)X
1246(be)X
1342(printed)X
1589(out)X
1711(the)X
1829(following)X
2160(code)X
2332(would)X
2552(be)X
2648(required:)X
864 5132(printf\("port)N
1251(number)X
1516(%d\\n",)X
1758(ntohs\(sp->s_port\)\);)X
576 5276(On)N
694(machines)X
1017(where)X
1234(unneeded)X
1562(these)X
1747(routines)X
2025(are)X
2144(de\256ned)X
2400(as)X
2487(null)X
2631(macros.)X
8 s
10 f
576 5392(hhhhhhhhhhhhhhhhhh)N
1 f
576 5472(*)N
2 f
624(Courier:)X
864(The)X
976(Remote)X
1183(Procedure)X
1468(Call)X
1595(Protocol)X
1 f
1819(,)X
1851(XSIS)X
2006(038112.)X

15 p
%%Page: 15 15
8 s 8 xH 0 xS 1 f 1 i
10 s
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-15)X
864 720(#include)N
1160(<sys/types.h>)X
864 816(#include)N
1160(<sys/socket.h>)X
864 912(#include)N
1160(<netinet/in.h>)X
864 1008(#include)N
1160(<stdio.h>)X
864 1104(#include)N
1160(<netdb.h>)X
884 1200(...)N
864 1296(main\(argc,)N
1230(argv\))X
1152 1392(int)N
1256(argc;)X
1152 1488(char)N
1311(*argv[];)X
864 1584({)N
1152 1680(struct)N
1350(sockaddr_in)X
1762(server;)X
1152 1776(struct)N
1350(servent)X
1602(*sp;)X
1152 1872(struct)N
1350(hostent)X
1601(*hp;)X
1152 1968(int)N
1256(s;)X
1152 2064(...)N
1152 2160(sp)N
1243(=)X
1308(getservbyname\("login",)X
2091("tcp"\);)X
1152 2256(if)N
1221(\(sp)X
1339(==)X
1449(NULL\))X
1710({)X
1440 2352(fprintf\(stderr,)N
1895("rlogin:)X
2161(tcp/login:)X
2487(unknown)X
2805(service\\n"\);)X
1440 2448(exit\(1\);)N
1152 2544(})N
1152 2640(hp)N
1252(=)X
1317(gethostbyname\(argv[1]\);)X
1152 2736(if)N
1221(\(hp)X
1348(==)X
1458(NULL\))X
1719({)X
1440 2832(fprintf\(stderr,)N
1895("rlogin:)X
2161(%s:)X
2301(unknown)X
2619(host\\n",)X
2887(argv[1]\);)X
1440 2928(exit\(2\);)N
1152 3024(})N
1152 3120 0.3500(bzero\(\(char)AN
1544(*\)&server,)X
1910(sizeof)X
2122(\(server\)\);)X
1152 3216(bcopy\(hp->h_addr,)N
1790(\(char)X
1976(*\)&server.sin_addr,)X
2638(hp->h_length\);)X
1152 3312(server.sin_family)N
1731(=)X
1796(hp->h_addrtype;)X
1152 3408(server.sin_port)N
1651(=)X
1716(sp->s_port;)X
1152 3504(s)N
1203(=)X
1268(socket\(AF_INET,)X
1865(SOCK_STREAM,)X
2482(0\);)X
1152 3600(if)N
1221(\(s)X
1299(<)X
1364(0\))X
1451({)X
1440 3696(perror\("rlogin:)N
1930(socket"\);)X
1440 3792(exit\(3\);)N
1152 3888(})N
1152 3984(...)N
1152 4080(/*)N
1234(Connect)X
1521(does)X
1688(the)X
1806(bind\(\))X
2022(for)X
2136(us)X
2227(*/)X
1152 4272(if)N
1221(\(connect\(s,)X
1596(\(char)X
1782(*\)&server,)X
2148(sizeof)X
2360(\(server\)\))X
2658(<)X
2723(0\))X
2810({)X
1440 4368(perror\("rlogin:)N
1930(connect"\);)X
1440 4464(exit\(5\);)N
1152 4560(})N
1152 4656(...)N
864 4752(})N
1728 4896(Figure)N
1957(1.)X
2057(Remote)X
2326(login)X
2510(client)X
2708(code.)X

16 p
%%Page: 16 16
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-16)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
3 f
12 s
1671 672(4.)N
1767(CLIENT/SERVER)X
2573(MODEL)X
1 f
10 s
776 988(The)N
941(most)X
1136(commonly)X
1519(used)X
1707(paradigm)X
2051(in)X
2154(constructing)X
2591(distributed)X
2974(applications)X
3402(is)X
3496(the)X
3635(client/server)X
576 1084(model.)N
844(In)X
939(this)X
1082(scheme)X
1351(client)X
1557(applications)X
1972(request)X
2232(services)X
2519(from)X
2703(a)X
2767(server)X
2992(process.)X
3301(This)X
3471(implies)X
3733(an)X
3836(asym-)X
576 1180(metry)N
786(in)X
871(establishing)X
1276(communication)X
1797(between)X
2088(the)X
2209(client)X
2411(and)X
2551(server)X
2772(which)X
2992(has)X
3123(been)X
3299(examined)X
3635(in)X
3721(section)X
3972(2.)X
576 1276(In)N
664(this)X
800(section)X
1047(we)X
1161(will)X
1305(look)X
1467(more)X
1652(closely)X
1899(at)X
1977(the)X
2095(interactions)X
2489(between)X
2777(client)X
2975(and)X
3111(server,)X
3348(and)X
3484(consider)X
3776(some)X
3965(of)X
576 1372(the)N
694(problems)X
1012(in)X
1094(developing)X
1470(client)X
1668(and)X
1804(server)X
2021(applications.)X
776 1496(The)N
926(client)X
1129(and)X
1270(server)X
1492(require)X
1745(a)X
1806(well)X
1969(known)X
2212(set)X
2326(of)X
2418(conventions)X
2830(before)X
3061(service)X
3315(may)X
3479(be)X
3581(rendered)X
3889(\(and)X
576 1592(accepted\).)N
946(This)X
1109(set)X
1219(of)X
1307(conventions)X
1715(comprises)X
2061(a)X
2118(protocol)X
2406(which)X
2623(must)X
2799(be)X
2896(implemented)X
3335(at)X
3414(both)X
3577(ends)X
3745(of)X
3833(a)X
3889(con-)X
576 1688(nection.)N
873(Depending)X
1246(on)X
1347(the)X
1466(situation,)X
1782(the)X
1901(protocol)X
2189(may)X
2348(be)X
2445(symmetric)X
2804(or)X
2893(asymmetric.)X
3329(In)X
3418(a)X
3476(symmetric)X
3836(proto-)X
576 1784(col,)N
728(either)X
944(side)X
1106(may)X
1277(play)X
1448(the)X
1579(master)X
1826(or)X
1926(slave)X
2124(roles.)X
2353(In)X
2453(an)X
2562(asymmetric)X
2969(protocol,)X
3289(one)X
3438(side)X
3600(is)X
3686(immutably)X
576 1880(recognized)N
952(as)X
1042(the)X
1163(master,)X
1420(with)X
1585(the)X
1706(other)X
1894(as)X
1984(the)X
2105(slave.)X
2313(An)X
2434(example)X
2729(of)X
2819(a)X
2878(symmetric)X
3239(protocol)X
3530(is)X
3607(the)X
3729(TELNET)X
576 1976(protocol)N
867(used)X
1038(in)X
1124(the)X
1246(Internet)X
1520(for)X
1638(remote)X
1885(terminal)X
2176(emulation.)X
2560(An)X
2682(example)X
2978(of)X
3069(an)X
3169(asymmetric)X
3567(protocol)X
3858(is)X
3934(the)X
576 2072(Internet)N
850(\256le)X
976(transfer)X
1246(protocol,)X
1557(FTP.)X
1758(No)X
1880(matter)X
2110(whether)X
2394(the)X
2517(speci\256c)X
2787(protocol)X
3079(used)X
3251(in)X
3338(obtaining)X
3665(a)X
3726(service)X
3979(is)X
576 2168(symmetric)N
942(or)X
1037(asymmetric,)X
1459(when)X
1661(accessing)X
1997(a)X
2061(service)X
2317(there)X
2506(is)X
2587(a)X
2651(``client)X
2911(process'')X
3233(and)X
3376(a)X
3439(``server)X
3717(process''.)X
576 2264(We)N
708(will)X
852(\256rst)X
996(consider)X
1288(the)X
1406(properties)X
1747(of)X
1834(server)X
2051(processes,)X
2399(then)X
2557(client)X
2755(processes.)X
776 2388(A)N
861(server)X
1085(process)X
1353(normally)X
1669(listens)X
1900(at)X
1985(a)X
2048(well)X
2213(known)X
2458(address)X
2726(for)X
2847(service)X
3102(requests.)X
3433(That)X
3608(is,)X
3709(the)X
3835(server)X
576 2484(process)N
845(remains)X
1127(dormant)X
1422(until)X
1596(a)X
1660(connection)X
2040(is)X
2121(requested)X
2457(by)X
2565(a)X
2629(client's)X
2893(connection)X
3273(to)X
3363(the)X
3489(server's)X
3771(address.)X
576 2580(At)N
684(such)X
859(a)X
924(time)X
1095(the)X
1222(server)X
1448(process)X
1718(``wakes)X
2002(up'')X
2165(and)X
2310(services)X
2598(the)X
2725(client,)X
2952(performing)X
3342(whatever)X
3666(appropriate)X
576 2676(actions)N
823(the)X
941(client)X
1139(requests)X
1422(of)X
1509(it.)X
776 2800(Alternative)N
1160(schemes)X
1455(which)X
1674(use)X
1804(a)X
1863(service)X
2114(server)X
2334(may)X
2495(be)X
2594(used)X
2764(to)X
2849(eliminate)X
3170(a)X
3229(\257ock)X
3412(of)X
3503(server)X
3724(processes)X
576 2896(clogging)N
893(the)X
1028(system)X
1287(while)X
1501(remaining)X
1862(dormant)X
2165(most)X
2356(of)X
2459(the)X
2593(time.)X
2811(For)X
2958(Internet)X
3244(servers)X
3508(in)X
3606(4.4BSD,)X
3917(this)X
576 2992(scheme)N
839(has)X
968(been)X
1142(implemented)X
1582(via)X
2 f
1702(inetd)X
1 f
(,)S
1904(the)X
2024(so)X
2117(called)X
2331(``internet)X
2652 0.2500(super-server.'')AX
2 f
3166(Inetd)X
1 f
3353(listens)X
3579(at)X
3660(a)X
3719(variety)X
3965(of)X
576 3088(ports,)N
782(determined)X
1169(at)X
1253(start-up)X
1524(by)X
1630(reading)X
1897(a)X
1959(con\256guration)X
2412(\256le.)X
2580(When)X
2798(a)X
2860(connection)X
3238(is)X
3317(requested)X
3650(to)X
3737(a)X
3798(port)X
3952(on)X
576 3184(which)N
2 f
806(inetd)X
1 f
1000(is)X
1087(listening,)X
2 f
1416(inetd)X
1 f
1610(executes)X
1921(the)X
2053(appropriate)X
2453(server)X
2684(program)X
2990(to)X
3087(handle)X
3336(the)X
3469(client.)X
3722(With)X
3917(this)X
576 3280(method,)N
857(clients)X
1087(are)X
1207(unaware)X
1501(that)X
1642(an)X
1739(intermediary)X
2170(such)X
2338(as)X
2 f
2426(inetd)X
1 f
2607(has)X
2735(played)X
2970(any)X
3107(part)X
3253(in)X
3336(the)X
3455(connection.)X
2 f
3867(Inetd)X
1 f
576 3376(will)N
720(be)X
816(described)X
1144(in)X
1226(more)X
1411(detail)X
1609(in)X
1691(section)X
1938(5.)X
776 3500(A)N
860(similar)X
1108(alternative)X
1473(scheme)X
1740(is)X
1819(used)X
1992(by)X
2098(most)X
2279(Xerox)X
2506(services.)X
2831(In)X
2924(general,)X
3207(the)X
3332(Courier)X
3604(dispatch)X
3898(pro-)X
576 3596(cess)N
736(\(if)X
838(used\))X
1038(accepts)X
1301(connections)X
1710(from)X
1892(processes)X
2226(requesting)X
2586(services)X
2871(of)X
2964(some)X
3159(sort)X
3305(or)X
3398(another.)X
3704(The)X
3854(client)X
576 3692(processes)N
927(request)X
1202(a)X
1281(particular)X
1632(<program)X
1992(number,)X
2300(version)X
2579(number,)X
2887(procedure)X
3252(number>)X
3585(triple.)X
3837(If)X
3934(the)X
576 3788(dispatcher)N
934(knows)X
1171(of)X
1266(such)X
1441(a)X
1505(program,)X
1825(it)X
1897(is)X
1978(started)X
2220(to)X
2310(handle)X
2552(the)X
2677(request;)X
2958(if)X
3034(not,)X
3183(an)X
3286(error)X
3470(is)X
3550(reported)X
3845(to)X
3934(the)X
576 3884(client.)N
823(In)X
919(this)X
1063(way,)X
1246(only)X
1417(one)X
1562(port)X
1720(is)X
1802(required)X
2099(to)X
2190(service)X
2447(a)X
2512(large)X
2702(variety)X
2954(of)X
3050(different)X
3356(requests.)X
3688(Again,)X
3934(the)X
576 3980(Courier)N
847(facilities)X
1149(are)X
1274(not)X
1402(available)X
1718(without)X
1988(the)X
2112(use)X
2245(and)X
2386(installation)X
2766(of)X
2858(the)X
2981(Courier)X
3251(compiler.)X
3601(The)X
3751(informa-)X
576 4076(tion)N
720(presented)X
1048(in)X
1130(this)X
1265(section)X
1512(applies)X
1759(only)X
1921(to)X
2003(NS)X
2125(clients)X
2354(and)X
2490(services)X
2769(that)X
2909(do)X
3009(not)X
3131(use)X
3258(Courier.)X
3 f
576 4268(4.1.)N
736(Servers)X
1 f
776 4392(In)N
865(4.4BSD)X
1142(most)X
1319(servers)X
1569(are)X
1690(accessed)X
1994(at)X
2074(well)X
2234(known)X
2474(Internet)X
2746(addresses)X
3076(or)X
3166(UNIX)X
3390(domain)X
3653(names.)X
3921(For)X
576 4488(example,)N
888(the)X
1006(remote)X
1249(login)X
1433(server's)X
1708(main)X
1888(loop)X
2050(is)X
2123(of)X
2210(the)X
2328(form)X
2504(shown)X
2733(in)X
2815(Figure)X
3044(2.)X
776 4612(The)N
921(\256rst)X
1065(step)X
1214(taken)X
1408(by)X
1508(the)X
1626(server)X
1843(is)X
1916(look)X
2078(up)X
2178(its)X
2273(service)X
2521(de\256nition:)X
976 4804(sp)N
1067(=)X
1132(getservbyname\("login",)X
1915("tcp"\);)X
976 4900(if)N
1045(\(sp)X
1163(==)X
1273(NULL\))X
1534({)X
1264 4996(fprintf\(stderr,)N
1719("rlogind:)X
2025(tcp/login:)X
2351(unknown)X
2669(service\\n"\);)X
1264 5092(exit\(1\);)N
976 5188(})N
576 5380(The)N
721(result)X
919(of)X
1006(the)X
2 f
1125(getservbyname)X
1 f
1628(call)X
1765(is)X
1839(used)X
2007(in)X
2090(later)X
2254(portions)X
2537(of)X
2625(the)X
2744(code)X
2917(to)X
3000(de\256ne)X
3217(the)X
3336(Internet)X
3607(port)X
3757(at)X
3836(which)X

17 p
%%Page: 17 17
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-17)X
576 672(it)N
640(listens)X
864(for)X
978(service)X
1226(requests)X
1509(\(indicated)X
1850(by)X
1950(a)X
2006(connection\).)X
864 1104(main\(argc,)N
1230(argv\))X
1064 1200(int)N
1168(argc;)X
1064 1296(char)N
1223(*argv[];)X
864 1392({)N
1064 1488(int)N
1168(f;)X
1064 1584(struct)N
1262(sockaddr_in)X
1674(from;)X
1064 1680(struct)N
1262(servent)X
1514(*sp;)X
1064 1872(sp)N
1155(=)X
1220(getservbyname\("login",)X
2003("tcp"\);)X
1064 1968(if)N
1133(\(sp)X
1251(==)X
1361(NULL\))X
1622({)X
1264 2064(fprintf\(stderr,)N
1719("rlogind:)X
2025(tcp/login:)X
2351(unknown)X
2669(service\\n"\);)X
1264 2160(exit\(1\);)N
1064 2256(})N
1064 2352(...)N
864 2448(#ifndef)N
1116(DEBUG)X
1064 2544(/*)N
1146(Disassociate)X
1567(server)X
1784(from)X
1960(controlling)X
2331(terminal)X
2618(*/)X
1064 2640(...)N
864 2736(#endif)N
1064 2928(sin.sin_port)N
1459(=)X
1524(sp->s_port;)X
2064(/*)X
2146(Restricted)X
2491(port)X
2640(--)X
2714(see)X
2837(section)X
3084(5)X
3144(*/)X
1064 3024(...)N
1064 3120(f)N
1111(=)X
1176(socket\(AF_INET,)X
1773(SOCK_STREAM,)X
2390(0\);)X
1064 3216(...)N
1064 3312(if)N
1133(\(bind\(f,)X
1396(\(struct)X
1621(sockaddr)X
1931(*\))X
2018(&sin,)X
2213(sizeof)X
2425(\(sin\)\))X
2619(<)X
2684(0\))X
2771({)X
1264 3408(...)N
1064 3504(})N
1064 3600(...)N
1064 3696(listen\(f,)N
1331(5\);)X
1064 3792(for)N
1178(\(;;\))X
1296({)X
1264 3888(int)N
1368(g,)X
1448(len)X
1566(=)X
1631(sizeof)X
1843(\(from\);)X
1264 4080(g)N
1324(=)X
1389(accept\(f,)X
1689(\(struct)X
1914(sockaddr)X
2224(*\))X
2311(&from,)X
2569(&len\);)X
1264 4176(if)N
1333(\(g)X
1420(<)X
1485(0\))X
1572({)X
1464 4272(if)N
1533(\(errno)X
1750(!=)X
1842(EINTR\))X
1664 4368(syslog\(LOG_ERR,)N
2295("rlogind:)X
2601(accept:)X
2849(%m"\);)X
1464 4464(continue;)N
1264 4560(})N
1264 4656(if)N
1333(\(fork\(\))X
1568(==)X
1678(0\))X
1765({)X
1464 4752(close\(f\);)N
1464 4848(doit\(g,)N
1695(&from\);)X
1264 4944(})N
1264 5040(close\(g\);)N
1064 5136(})N
864 5232(})N
1804 5376(Figure)N
2033(2.)X
2133(Remote)X
2402(login)X
2586(server.)X

18 p
%%Page: 18 18
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-18)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
776 672(Step)N
938(two)X
1078(is)X
1151(to)X
1233(disassociate)X
1636(the)X
1754(server)X
1971(from)X
2147(the)X
2265(controlling)X
2636(terminal)X
2923(of)X
3010(its)X
3105(invoker:)X
1064 816(for)N
1178(\(i)X
1247(=)X
1312(0;)X
1394(i)X
1436(<)X
1501(3;)X
1583(++i\))X
1264 912(close\(i\);)N
1064 1104(open\("/",)N
1375(O_RDONLY\);)X
1064 1200(dup2\(0,)N
1331(1\);)X
1064 1296(dup2\(0,)N
1331(2\);)X
1064 1488(i)N
1106(=)X
1171(open\("/dev/tty",)X
1704(O_RDWR\);)X
1064 1584(if)N
1133(\(i)X
1202(>=)X
1312(0\))X
1399({)X
1264 1680(ioctl\(i,)N
1495(TIOCNOTTY,)X
1994(0\);)X
1264 1776(close\(i\);)N
1064 1872(})N
576 2016(This)N
740(step)X
891(is)X
966(important)X
1299(as)X
1388(the)X
1508(server)X
1727(will)X
1873(likely)X
2077(not)X
2201(want)X
2379(to)X
2463(receive)X
2718(signals)X
2963(delivered)X
3285(to)X
3370(the)X
3491(process)X
3755(group)X
3965(of)X
576 2112(the)N
702(controlling)X
1081(terminal.)X
1416(Note,)X
1620(however,)X
1945(that)X
2093(once)X
2273(a)X
2337(server)X
2562(has)X
2697(disassociated)X
3148(itself)X
3336(it)X
3407(can)X
3546(no)X
3653(longer)X
3885(send)X
576 2208(reports)N
819(of)X
906(errors)X
1114(to)X
1196(a)X
1252(terminal,)X
1559(and)X
1695(must)X
1870(log)X
1992(errors)X
2200(via)X
2 f
2318(syslog)X
1 f
(.)S
776 2332(Once)N
967(a)X
1024(server)X
1242(has)X
1370(established)X
1747(a)X
1804(pristine)X
2065(environment,)X
2511(it)X
2576(creates)X
2821(a)X
2878(socket)X
3105(and)X
3243(begins)X
3474(accepting)X
3804(service)X
576 2428(requests.)N
905(The)X
2 f
1056(bind)X
1 f
1224(call)X
1366(is)X
1445(required)X
1739(to)X
1827(insure)X
2049(the)X
2173(server)X
2395(listens)X
2624(at)X
2707(its)X
2807(expected)X
3118(location.)X
3441(It)X
3515(should)X
3753(be)X
3854(noted)X
576 2524(that)N
719(the)X
840(remote)X
1086(login)X
1273(server)X
1493(listens)X
1720(at)X
1802(a)X
1862(restricted)X
2185(port)X
2338(number,)X
2627(and)X
2767(must)X
2946(therefore)X
3261(be)X
3361(run)X
3492(with)X
3658(a)X
3718(user-id)X
3965(of)X
576 2620(root.)N
765(This)X
927(concept)X
1197(of)X
1284(a)X
1340(``restricted)X
1713(port)X
1862(number'')X
2181(is)X
2254(4BSD)X
2469(speci\256c,)X
2754(and)X
2890(is)X
2963(covered)X
3238(in)X
3320(section)X
3567(5.)X
776 2744(The)N
921(main)X
1101(body)X
1281(of)X
1368(the)X
1486(loop)X
1648(is)X
1721(fairly)X
1915(simple:)X
864 2888(for)N
978(\(;;\))X
1096({)X
1152 2984(int)N
1256(g,)X
1336(len)X
1454(=)X
1519(sizeof)X
1731(\(from\);)X
1152 3176(g)N
1212(=)X
1277(accept\(f,)X
1577(\(struct)X
1802(sockaddr)X
2112(*\)&from,)X
2437(&len\);)X
1152 3272(if)N
1221(\(g)X
1308(<)X
1373(0\))X
1460({)X
1440 3368(if)N
1509(\(errno)X
1726(!=)X
1818(EINTR\))X
1728 3464(syslog\(LOG_ERR,)N
2359("rlogind:)X
2665(accept:)X
2913(%m"\);)X
1440 3560(continue;)N
1152 3656(})N
1152 3752(if)N
1221(\(fork\(\))X
1456(==)X
1566(0\))X
1653({)X
1728(/*)X
1810(Child)X
2007(*/)X
1440 3848(close\(f\);)N
1440 3944(doit\(g,)N
1671(&from\);)X
1152 4040(})N
1152 4136(close\(g\);)N
1728(/*)X
1810(Parent)X
2035(*/)X
864 4232(})N
576 4376(An)N
2 f
696(accept)X
1 f
928(call)X
1066(blocks)X
1298(the)X
1419(server)X
1639(until)X
1808(a)X
1867(client)X
2068(requests)X
2354(service.)X
2645(This)X
2810(call)X
2949(could)X
3150(return)X
3365(a)X
3424(failure)X
3657(status)X
3862(if)X
3934(the)X
576 4472(call)N
715(is)X
790(interrupted)X
1164(by)X
1266(a)X
1324(signal)X
1537(such)X
1706(as)X
1795(SIGCHLD)X
2164(\(to)X
2275(be)X
2373(discussed)X
2702(in)X
2786(section)X
3035(5\).)X
3164(Therefore,)X
3524(the)X
3644(return)X
3858(value)X
576 4568(from)N
2 f
757(accept)X
1 f
992(is)X
1070(checked)X
1359(to)X
1446(insure)X
1667(a)X
1728(connection)X
2105(has)X
2237(actually)X
2516(been)X
2693(established,)X
3094(and)X
3235(an)X
3336(error)X
3518(report)X
3735(is)X
3814(logged)X
576 4664(via)N
2 f
694(syslog)X
1 f
914(if)X
983(an)X
1079(error)X
1256(has)X
1383(occurred.)X
776 4788(With)N
963(a)X
1026(connection)X
1405(in)X
1494(hand,)X
1697(the)X
1822(server)X
2046(then)X
2211(forks)X
2403(a)X
2466(child)X
2653(process)X
2921(and)X
3064(invokes)X
3340(the)X
3465(main)X
3652(body)X
3839(of)X
3934(the)X
576 4884(remote)N
821(login)X
1007(protocol)X
1296(processing.)X
1701(Note)X
1879(how)X
2039(the)X
2159(socket)X
2386(used)X
2555(by)X
2657(the)X
2777(parent)X
3000(for)X
3116(queuing)X
3396(connection)X
3769(requests)X
576 4980(is)N
651(closed)X
878(in)X
962(the)X
1082(child,)X
1284(while)X
1484(the)X
1604(socket)X
1831(created)X
2086(as)X
2175(a)X
2233(result)X
2433(of)X
2522(the)X
2 f
2642(accept)X
1 f
2874(is)X
2949(closed)X
3176(in)X
3260(the)X
3380(parent.)X
3643(The)X
3791(address)X
576 5076(of)N
663(the)X
781(client)X
979(is)X
1052(also)X
1201(handed)X
1453(the)X
2 f
1571(doit)X
1 f
1715(routine)X
1962(because)X
2237(it)X
2301(requires)X
2580(it)X
2644(in)X
2726(authenticating)X
3200(clients.)X
3 f
576 5268(4.2.)N
736(Clients)X
1 f
776 5392(The)N
924(client)X
1125(side)X
1277(of)X
1367(the)X
1488(remote)X
1734(login)X
1921(service)X
2172(was)X
2320(shown)X
2552(earlier)X
2782(in)X
2868(Figure)X
3101(1.)X
3205(One)X
3363(can)X
3499(see)X
3626(the)X
3748(separate,)X
576 5488(asymmetric)N
977(roles)X
1160(of)X
1254(the)X
1379(client)X
1584(and)X
1727(server)X
1951(clearly)X
2197(in)X
2286(the)X
2411(code.)X
2630(The)X
2782(server)X
3006(is)X
3085(a)X
3147(passive)X
3409(entity,)X
3637(listening)X
3938(for)X
576 5584(client)N
774(connections,)X
1197(while)X
1395(the)X
1513(client)X
1711(process)X
1972(is)X
2045(an)X
2141(active)X
2353(entity,)X
2575(initiating)X
2883(a)X
2939(connection)X
3311(when)X
3505(invoked.)X

19 p
%%Page: 19 19
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-19)X
776 672(Let)N
904(us)X
996(consider)X
1289(more)X
1475(closely)X
1723(the)X
1842(steps)X
2023(taken)X
2218(by)X
2319(the)X
2438(client)X
2637(remote)X
2881(login)X
3066(process.)X
3368(As)X
3478(in)X
3561(the)X
3680(server)X
3898(pro-)X
576 768(cess,)N
750(the)X
868(\256rst)X
1012(step)X
1161(is)X
1234(to)X
1316(locate)X
1528(the)X
1646(service)X
1894(de\256nition)X
2220(for)X
2334(a)X
2390(remote)X
2633(login:)X
864 912(sp)N
955(=)X
1020(getservbyname\("login",)X
1803("tcp"\);)X
864 1008(if)N
933(\(sp)X
1051(==)X
1161(NULL\))X
1422({)X
1064 1104(fprintf\(stderr,)N
1519("rlogin:)X
1785(tcp/login:)X
2111(unknown)X
2429(service\\n"\);)X
1064 1200(exit\(1\);)N
864 1296(})N
576 1440(Next)N
752(the)X
870(destination)X
1241(host)X
1394(is)X
1467(looked)X
1705(up)X
1805(with)X
1967(a)X
2 f
2023(gethostbyname)X
1 f
2524(call:)X
864 1584(hp)N
964(=)X
1029(gethostbyname\(argv[1]\);)X
864 1680(if)N
933(\(hp)X
1060(==)X
1170(NULL\))X
1431({)X
1064 1776(fprintf\(stderr,)N
1519("rlogin:)X
1785(%s:)X
1925(unknown)X
2243(host\\n",)X
2511(argv[1]\);)X
1064 1872(exit\(2\);)N
864 1968(})N
576 2112(With)N
761(this)X
901(accomplished,)X
1387(all)X
1492(that)X
1637(is)X
1715(required)X
2009(is)X
2088(to)X
2176(establish)X
2482(a)X
2544(connection)X
2922(to)X
3010(the)X
3134(server)X
3357(at)X
3441(the)X
3565(requested)X
3899(host)X
576 2208(and)N
713(start)X
872(up)X
973(the)X
1092(remote)X
1336(login)X
1521(protocol.)X
1848(The)X
1993(address)X
2254(buffer)X
2471(is)X
2544(cleared,)X
2817(then)X
2975(\256lled)X
3159(in)X
3241(with)X
3403(the)X
3521(Internet)X
3791(address)X
576 2304(of)N
663(the)X
781(foreign)X
1033(host)X
1186(and)X
1322(the)X
1440(port)X
1589(number)X
1854(at)X
1932(which)X
2148(the)X
2266(login)X
2450(process)X
2711(resides)X
2954(on)X
3054(the)X
3172(foreign)X
3424(host:)X
864 2448 0.3500(bzero\(\(char)AN
1256(*\)&server,)X
1622(sizeof)X
1834(\(server\)\);)X
864 2544(bcopy\(hp->h_addr,)N
1502(\(char)X
1688(*\))X
1775(&server.sin_addr,)X
2370(hp->h_length\);)X
864 2640(server.sin_family)N
1443(=)X
1508(hp->h_addrtype;)X
864 2736(server.sin_port)N
1363(=)X
1428(sp->s_port;)X
576 2880(A)N
655(socket)X
881(is)X
955(created,)X
1229(and)X
1367(a)X
1425(connection)X
1799(initiated.)X
2123(Note)X
2301(that)X
2 f
2443(connect)X
1 f
2715(implicitly)X
3047(performs)X
3359(a)X
2 f
3417(bind)X
1 f
3581(call,)X
3739(since)X
2 f
3926(s)X
1 f
3979(is)X
576 2976(unbound.)N
864 3120(s)N
915(=)X
980(socket\(hp->h_addrtype,)X
1765(SOCK_STREAM,)X
2382(0\);)X
864 3216(if)N
933(\(s)X
1011(<)X
1076(0\))X
1163({)X
1064 3312(perror\("rlogin:)N
1554(socket"\);)X
1064 3408(exit\(3\);)N
864 3504(})N
884 3600(...)N
864 3696(if)N
933(\(connect\(s,)X
1308(\(struct)X
1533(sockaddr)X
1843(*\))X
1930(&server,)X
2229(sizeof)X
2441(\(server\)\))X
2739(<)X
2804(0\))X
2891({)X
1064 3792(perror\("rlogin:)N
1554(connect"\);)X
1064 3888(exit\(4\);)N
864 3984(})N
576 4128(The)N
721(details)X
950(of)X
1037(the)X
1155(remote)X
1398(login)X
1582(protocol)X
1869(will)X
2013(not)X
2135(be)X
2231(considered)X
2599(here.)X
3 f
576 4320(4.3.)N
736(Connectionless)X
1267(servers)X
1 f
776 4444(While)N
993(connection-based)X
1576(services)X
1856(are)X
1976(the)X
2095(norm,)X
2305(some)X
2495(services)X
2775(are)X
2895(based)X
3099(on)X
3200(the)X
3319(use)X
3448(of)X
3537(datagram)X
3858(sock-)X
576 4540(ets.)N
730(One,)X
909(in)X
996(particular,)X
1349(is)X
1427(the)X
1550(``rwho'')X
1848(service)X
2100(which)X
2320(provides)X
2620(users)X
2809(with)X
2975(status)X
3181(information)X
3583(for)X
3701(hosts)X
3889(con-)X
576 4636(nected)N
807(to)X
890(a)X
947(local)X
1124(area)X
1280(network.)X
1604(This)X
1767(service,)X
2037(while)X
2237(predicated)X
2594(on)X
2696(the)X
2816(ability)X
3042(to)X
2 f
3126(broadcast)X
1 f
3468(information)X
3868(to)X
3952(all)X
576 4732(hosts)N
760(connected)X
1106(to)X
1188(a)X
1244(particular)X
1572(network,)X
1875(is)X
1948(of)X
2035(interest)X
2291(as)X
2378(an)X
2474(example)X
2766(usage)X
2969(of)X
3056(datagram)X
3375(sockets.)X
776 4856(A)N
855(user)X
1010(on)X
1111(any)X
1248(machine)X
1541(running)X
1811(the)X
1930(rwho)X
2116(server)X
2334(may)X
2493(\256nd)X
2638(out)X
2761(the)X
2880(current)X
3129(status)X
3332(of)X
3420(a)X
3477(machine)X
3770(with)X
3934(the)X
2 f
576 4952(ruptime)N
1 f
825(\(1\))X
939(program.)X
1271(The)X
1416(output)X
1640(generated)X
1973(is)X
2046(illustrated)X
2386(in)X
2468(Figure)X
2697(3.)X
776 5076(Status)N
992(information)X
1391(for)X
1506(each)X
1675(host)X
1829(is)X
1903(periodically)X
2307(broadcast)X
2636(by)X
2737(rwho)X
2923(server)X
3141(processes)X
3470(on)X
3571(each)X
3740(machine.)X
576 5172(The)N
728(same)X
920(server)X
1144(process)X
1412(also)X
1568(receives)X
1858(the)X
1982(status)X
2190(information)X
2594(and)X
2736(uses)X
2900(it)X
2970(to)X
3058(update)X
3298(a)X
3360(database.)X
3703(This)X
3871(data-)X
576 5268(base)N
748(is)X
830(then)X
997(interpreted)X
1374(to)X
1465(generate)X
1768(the)X
1896(status)X
2108(information)X
2516(for)X
2640(each)X
2818(host.)X
3021(Servers)X
3292(operate)X
3559(autonomously,)X
576 5364(coupled)N
850(only)X
1012(by)X
1112(the)X
1230(local)X
1406(network)X
1689(and)X
1825(its)X
1920(broadcast)X
2248(capabilities.)X
776 5488(Note)N
953(that)X
1094(the)X
1213(use)X
1341(of)X
1429(broadcast)X
1758(for)X
1873(such)X
2042(a)X
2100(task)X
2251(is)X
2326(fairly)X
2522(inef\256cient,)X
2889(as)X
2978(all)X
3080(hosts)X
3266(must)X
3443(process)X
3706(each)X
3876(mes-)X
576 5584(sage,)N
762(whether)X
1044(or)X
1134(not)X
1259(using)X
1455(an)X
1553(rwho)X
1740(server.)X
1999(Unless)X
2239(such)X
2408(a)X
2466(service)X
2716(is)X
2791(suf\256ciently)X
3173(universal)X
3489(and)X
3627(is)X
3702(frequently)X
576 5680(used,)N
763(the)X
881(expense)X
1160(of)X
1247(periodic)X
1530(broadcasts)X
1889(outweighs)X
2238(the)X
2356(simplicity.)X

20 p
%%Page: 20 20
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-20)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
1140 768(arpa)N
1598(up)X
1798(9:45,)X
2245(5)X
2305(users,)X
2510(load)X
2768(1.15,)X
3048(1.39,)X
3328(1.31)X
1140 864(cad)N
1598(up)X
1798(2+12:04,)X
2245(8)X
2305(users,)X
2510(load)X
2768(4.67,)X
3048(5.13,)X
3328(4.59)X
1140 960(calder)N
1598(up)X
1798(10:10,)X
2245(0)X
2305(users,)X
2510(load)X
2768(0.27,)X
3048(0.15,)X
3328(0.14)X
1140 1056(dali)N
1598(up)X
1798(2+06:28,)X
2245(9)X
2305(users,)X
2510(load)X
2768(1.04,)X
3048(1.20,)X
3328(1.65)X
1140 1152(degas)N
1598(up)X
1798(25+09:48,)X
2245(0)X
2305(users,)X
2510(load)X
2768(1.49,)X
3048(1.43,)X
3328(1.41)X
1140 1248(ear)N
1598(up)X
1798(5+00:05,)X
2245(0)X
2305(users,)X
2510(load)X
2768(1.51,)X
3048(1.54,)X
3328(1.56)X
1140 1344(ernie)N
1500(down)X
1798(0:24)X
1140 1440(esvax)N
1500(down)X
1798(17:04)X
1140 1536(ingres)N
1500(down)X
1798(0:26)X
1140 1632(kim)N
1598(up)X
1798(3+09:16,)X
2245(8)X
2305(users,)X
2510(load)X
2768(2.03,)X
3048(2.46,)X
3328(3.11)X
1140 1728(matisse)N
1598(up)X
1798(3+06:18,)X
2245(0)X
2305(users,)X
2510(load)X
2768(0.03,)X
3048(0.03,)X
3328(0.05)X
1140 1824(medea)N
1598(up)X
1798(3+09:39,)X
2245(2)X
2305(users,)X
2510(load)X
2768(0.35,)X
3048(0.37,)X
3328(0.50)X
1140 1920(merlin)N
1500(down)X
1798(19+15:37)X
1140 2016(miro)N
1598(up)X
1798(1+07:20,)X
2245(7)X
2305(users,)X
2510(load)X
2768(4.59,)X
3048(3.28,)X
3328(2.12)X
1140 2112(monet)N
1598(up)X
1798(1+00:43,)X
2245(2)X
2305(users,)X
2510(load)X
2768(0.22,)X
3048(0.09,)X
3328(0.07)X
1140 2208(oz)N
1500(down)X
1798(16:09)X
1140 2304(statvax)N
1598(up)X
1798(2+15:57,)X
2245(3)X
2305(users,)X
2510(load)X
2768(1.52,)X
3048(1.81,)X
3328(1.86)X
1140 2400(ucbvax)N
1598(up)X
1798(9:34,)X
2245(2)X
2305(users,)X
2510(load)X
2768(6.08,)X
3048(5.16,)X
3328(3.28)X
1903 2592(Figure)N
2132(3.)X
2212(ruptime)X
2481(output.)X
776 2784(Multicasting)N
1208(is)X
1289(an)X
1393(alternative)X
1761(to)X
1852(broadcasting.)X
2331(Setting)X
2586(up)X
2695(multicast)X
3017(sockets)X
3282(is)X
3364(described)X
3701(in)X
3792(Section)X
576 2880(5.10.)N
776 3004(The)N
932(rwho)X
1128(server,)X
1376(in)X
1469(a)X
1536(simpli\256ed)X
1886(form,)X
2093(is)X
2177(pictured)X
2471(in)X
2564(Figure)X
2804(4.)X
2915(There)X
3134(are)X
3264(two)X
3415(separate)X
3710(tasks)X
3902(per-)X
576 3100(formed)N
830(by)X
932(the)X
1052(server.)X
1311(The)X
1458(\256rst)X
1604(task)X
1755(is)X
1830(to)X
1914(act)X
2030(as)X
2119(a)X
2177(receiver)X
2459(of)X
2548(status)X
2752(information)X
3151(broadcast)X
3480(by)X
3581(other)X
3767(hosts)X
3952(on)X
576 3196(the)N
695(network.)X
1019(This)X
1182(job)X
1305(is)X
1379(carried)X
1624(out)X
1747(in)X
1830(the)X
1949(main)X
2130(loop)X
2293(of)X
2381(the)X
2500(program.)X
2833(Packets)X
3100(received)X
3395(at)X
3475(the)X
3595(rwho)X
3782(port)X
3933(are)X
576 3292(interrogated)N
990(to)X
1078(insure)X
1300(they've)X
1567(been)X
1745(sent)X
1900(by)X
2006(another)X
2273(rwho)X
2464(server)X
2686(process,)X
2972(then)X
3135(are)X
3259(time)X
3426(stamped)X
3718(with)X
3885(their)X
576 3388(arrival)N
806(time)X
968(and)X
1104(used)X
1271(to)X
1353(update)X
1587(a)X
1643(\256le)X
1765(indicating)X
2105(the)X
2224(status)X
2427(of)X
2515(the)X
2634(host.)X
2828(When)X
3041(a)X
3098(host)X
3252(has)X
3380(not)X
3503(been)X
3676(heard)X
3876(from)X
576 3484(for)N
697(an)X
800(extended)X
1117(period)X
1349(of)X
1443(time,)X
1632(the)X
1757(database)X
2061(interpretation)X
2520(routines)X
2805(assume)X
3068(the)X
3193(host)X
3353(is)X
3432(down)X
3636(and)X
3778(indicate)X
576 3580(such)N
743(on)X
843(the)X
961(status)X
1163(reports.)X
1446(This)X
1608(algorithm)X
1939(is)X
2012(prone)X
2215(to)X
2298(error)X
2476(as)X
2564(a)X
2621(server)X
2839(may)X
2998(be)X
3095(down)X
3294(while)X
3493(a)X
3550(host)X
3704(is)X
3778(actually)X
576 3676(up,)N
696(but)X
818(serves)X
1039(our)X
1166(current)X
1414(needs.)X
776 3800(The)N
931(second)X
1184(task)X
1343(performed)X
1708(by)X
1818(the)X
1946(server)X
2173(is)X
2256(to)X
2348(supply)X
2591(information)X
2999(regarding)X
3337(the)X
3465(status)X
3677(of)X
3774(its)X
3879(host.)X
576 3896(This)N
738(involves)X
1029(periodically)X
1432(acquiring)X
1755(system)X
1997(status)X
2199(information,)X
2617(packaging)X
2967(it)X
3031(up)X
3131(in)X
3213(a)X
3269(message)X
3561(and)X
3697(broadcast-)X
576 3992(ing)N
701(it)X
768(on)X
871(the)X
992(local)X
1171(network)X
1457(for)X
1574(other)X
1762(rwho)X
1950(servers)X
2202(to)X
2288(hear.)X
2491(The)X
2640(supply)X
2877(function)X
3168(is)X
3245(triggered)X
3559(by)X
3663(a)X
3723(timer)X
3916(and)X
576 4088(runs)N
738(off)X
856(a)X
916(signal.)X
1171(Locating)X
1480(the)X
1602(system)X
1848(status)X
2054(information)X
2456(is)X
2533(somewhat)X
2882(involved,)X
3206(but)X
3332(uninteresting.)X
3813(Decid-)X
576 4184(ing)N
698(where)X
915(to)X
997(transmit)X
1279(the)X
1397(resultant)X
1693(packet)X
1923(is)X
1996(somewhat)X
2341(problematical,)X
2822(however.)X
776 4308(Status)N
996(information)X
1399(must)X
1579(be)X
1680(broadcast)X
2014(on)X
2120(the)X
2244(local)X
2426(network.)X
2755(For)X
2892(networks)X
3212(which)X
3434(do)X
3540(not)X
3668(support)X
3934(the)X
576 4404(notion)N
803(of)X
892(broadcast)X
1222(another)X
1485(scheme)X
1748(must)X
1925(be)X
2023(used)X
2192(to)X
2276(simulate)X
2569(or)X
2658(replace)X
2913(broadcasting.)X
3385(One)X
3541(possibility)X
3895(is)X
3970(to)X
576 4500(enumerate)N
939(the)X
1065(known)X
1311(neighbors)X
1655(\(based)X
1893(on)X
2001(the)X
2128(status)X
2339(messages)X
2671(received)X
2973(from)X
3158(other)X
3352(rwho)X
3546(servers\).)X
3870(This,)X
576 4596(unfortunately,)N
1054(requires)X
1339(some)X
1534(bootstrapping)X
2000(information,)X
2424(for)X
2544(a)X
2606(server)X
2829(will)X
2979(have)X
3157(no)X
3263(idea)X
3423(what)X
3605(machines)X
3933(are)X
576 4692(its)N
678(neighbors)X
1021(until)X
1194(it)X
1265(receives)X
1556(status)X
1765(messages)X
2095(from)X
2278(them.)X
2505(Therefore,)X
2870(if)X
2946(all)X
3053(machines)X
3384(on)X
3492(a)X
3556(net)X
3682(are)X
3809(freshly)X
576 4788(booted,)N
835(no)X
936(machine)X
1229(will)X
1374(have)X
1547(any)X
1684(known)X
1923(neighbors)X
2260(and)X
2397(thus)X
2550(never)X
2749(receive,)X
3022(or)X
3109(send,)X
3296(any)X
3432(status)X
3634(information.)X
576 4884(This)N
742(is)X
819(the)X
941(identical)X
1241(problem)X
1533(faced)X
1733(by)X
1838(the)X
1961(routing)X
2217(table)X
2398(management)X
2833(process)X
3099(in)X
3186(propagating)X
3594(routing)X
3850(status)X
576 4980(information.)N
1017(The)X
1164(standard)X
1458(solution,)X
1757(unsatisfactory)X
2229(as)X
2318(it)X
2384(may)X
2544(be,)X
2662(is)X
2737(to)X
2821(inform)X
3061(one)X
3199(or)X
3288(more)X
3475(servers)X
3725(of)X
3814(known)X
576 5076(neighbors)N
916(and)X
1056(request)X
1312(that)X
1456(they)X
1618(always)X
1865(communicate)X
2321(with)X
2487(these)X
2676(neighbors.)X
3056(If)X
3134(each)X
3307(server)X
3529(has)X
3661(at)X
3744(least)X
3916(one)X
576 5172(neighbor)N
888(supplied)X
1186(to)X
1275(it,)X
1366(status)X
1575(information)X
1980(may)X
2145(then)X
2310(propagate)X
2654(through)X
2930(a)X
2993(neighbor)X
3305(to)X
3393(hosts)X
3583(which)X
3805(are)X
3930(not)X
576 5268(\(possibly\))N
919(directly)X
1188(neighbors.)X
1568(If)X
1646(the)X
1768(server)X
1989(is)X
2066(able)X
2224(to)X
2310(support)X
2574(networks)X
2892(which)X
3112(provide)X
3381(a)X
3441(broadcast)X
3773(capabil-)X
8 s
10 f
576 5444(hhhhhhhhhhhhhhhhhh)N
1 f
576 5524(*)N
630(One)X
758(must,)X
921(however,)X
1178(be)X
1260(concerned)X
1543(about)X
1707(``loops''.)X
1984(That)X
2124(is,)X
2206(if)X
2268(a)X
2319(host)X
2449(is)X
2515(connected)X
2796(to)X
2869(multiple)X
3106(networks,)X
3379(it)X
3438(will)X
3561(receive)X
576 5604(status)N
738(information)X
1056(from)X
1196(itself.)X
1372(This)X
1502(can)X
1606(lead)X
1728(to)X
1794(an)X
1870(endless,)X
2090(wasteful,)X
2338(exchange)X
2594(of)X
2663(information.)X

21 p
%%Page: 21 21
8 s 8 xH 0 xS 1 f 1 i
10 s
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-21)X
576 672(ity,)N
700(as)X
787(well)X
945(as)X
1032(those)X
1221(which)X
1437(do)X
1537(not,)X
1679(then)X
1837(networks)X
2151(with)X
2313(an)X
2409(arbitrary)X
2706(topology)X
3010(may)X
3168(share)X
3358(status)X
3560(information*.)X
864 816(main\(\))N
864 912({)N
1152 1008(...)N
1152 1104(sp)N
1243(=)X
1308 0.1645(getservbyname\("who",)AX
2065("udp"\);)X
1152 1200(net)N
1270(=)X
1335 0.1354(getnetbyname\("localnet"\);)AX
1152 1296(sin.sin_addr)N
1561(=)X
1626 0.1563(inet_makeaddr\(INADDR_ANY,)AX
2696(net\);)X
1152 1392(sin.sin_port)N
1547(=)X
1612(sp->s_port;)X
1152 1488(...)N
1152 1584(s)N
1203(=)X
1268(socket\(AF_INET,)X
1865(SOCK_DGRAM,)X
2456(0\);)X
1152 1680(...)N
1152 1776(on)N
1252(=)X
1317(1;)X
1152 1872(if)N
1221(\(setsockopt\(s,)X
1684(SOL_SOCKET,)X
2226(SO_BROADCAST,)X
2892(&on,)X
3074(sizeof\(on\)\))X
3447(<)X
3512(0\))X
3599({)X
1440 1968(syslog\(LOG_ERR,)N
2071("setsockopt)X
2462(SO_BROADCAST:)X
3130(%m"\);)X
1440 2064(exit\(1\);)N
1152 2160(})N
1152 2256(bind\(s,)N
1392(\(struct)X
1617(sockaddr)X
1927(*\))X
2014(&sin,)X
2209(sizeof)X
2421(\(sin\)\);)X
1152 2352(...)N
1152 2448(signal\(SIGALRM,)N
1770(onalrm\);)X
1152 2544(onalrm\(\);)N
1152 2640(for)N
1266(\(;;\))X
1384({)X
1440 2736(struct)N
1638(whod)X
1836(wd;)X
1440 2832(int)N
1544(cc,)X
1656(whod,)X
1874(len)X
1992(=)X
2057(sizeof)X
2269(\(from\);)X
1440 3024(cc)N
1532(=)X
1597(recvfrom\(s,)X
1990(\(char)X
2176(*\)&wd,)X
2443(sizeof)X
2655(\(struct)X
2880(whod\),)X
3125(0,)X
1520 3120(\(struct)N
1745(sockaddr)X
2055(*\)&from,)X
2380(&len\);)X
1440 3216(if)N
1509(\(cc)X
1628(<=)X
1738(0\))X
1825({)X
1728 3312(if)N
1797(\(cc)X
1916(<)X
1981(0)X
2041(&&)X
2185(errno)X
2375(!=)X
2467(EINTR\))X
2016 3408(syslog\(LOG_ERR,)N
2647("rwhod:)X
2927(recv:)X
3108(%m"\);)X
1728 3504(continue;)N
1440 3600(})N
1440 3696(if)N
1509(\(from.sin_port)X
1994(!=)X
2086(sp->s_port\))X
2476({)X
1728 3792(syslog\(LOG_ERR,)N
2359("rwhod:)X
2639(%d:)X
2788(bad)X
2924(from)X
3100(port",)X
2016 3888(ntohs\(from.sin_port\)\);)N
1728 3984(continue;)N
1440 4080(})N
1440 4176(...)N
1440 4272(if)N
1509 0.1563(\(!verify\(wd.wd_hostname\)\))AX
2419({)X
1728 4368(syslog\(LOG_ERR,)N
2359("rwhod:)X
2639(malformed)X
3011(host)X
3164(name)X
3358(from)X
3534(%x",)X
2016 4464(ntohl\(from.sin_addr.s_addr\)\);)N
1728 4560(continue;)N
1440 4656(})N
1440 4752(\(void\))N
1656(sprintf\(path,)X
2070("%s/whod.%s",)X
2592(RWHODIR,)X
3015(wd.wd_hostname\);)X
1440 4848(whod)N
1638(=)X
1703(open\(path,)X
2064(O_WRONLY)X
2534(|)X
2570(O_CREAT)X
2950(|)X
2986(O_TRUNC,)X
3395(0666\);)X
1440 4944(...)N
1440 5040(\(void\))N
1656(time\(&wd.wd_recvtime\);)X
1440 5136(\(void\))N
1656(write\(whod,)X
2066(\(char)X
2252(*\)&wd,)X
2519(cc\);)X
1440 5232(\(void\))N
1656(close\(whod\);)X
1152 5328(})N
864 5424(})N
1938 5568(Figure)N
2167(4.)X
2267(rwho)X
2452(server.)X

22 p
%%Page: 22 22
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-22)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
776 672(It)N
860(is)X
948(important)X
1294(that)X
1449(software)X
1761(operating)X
2099(in)X
2196(a)X
2267(distributed)X
2645(environment)X
3086(not)X
3224(have)X
3412(any)X
3564(site-dependent)X
576 768(information)N
987(compiled)X
1318(into)X
1475(it.)X
1592(This)X
1767(would)X
2000(require)X
2261(a)X
2330(separate)X
2627(copy)X
2816(of)X
2916(the)X
3046(server)X
3275(at)X
3365(each)X
3545(host)X
3710(and)X
3858(make)X
576 864(maintenance)N
1004(a)X
1062(severe)X
1290(headache.)X
1652(4.4BSD)X
1929(attempts)X
2222(to)X
2306(isolate)X
2537(host-speci\256c)X
2964(information)X
3364(from)X
3542(applications)X
3952(by)X
576 960(providing)N
916(system)X
1167(calls)X
1343(which)X
1568(return)X
1789(the)X
1916(necessary)X
2258(information*.)X
2745(A)X
2832(mechanism)X
3226(exists,)X
3457(in)X
3548(the)X
3675(form)X
3860(of)X
3956(an)X
2 f
576 1056(ioctl)N
1 f
742(call,)X
902(for)X
1020(\256nding)X
1270(the)X
1392(collection)X
1731(of)X
1821(networks)X
2138(to)X
2223(which)X
2442(a)X
2501(host)X
2657(is)X
2733(directly)X
3001(connected.)X
3390(Further,)X
3669(a)X
3728(local)X
3907(net-)X
576 1152(work)N
770(broadcasting)X
1209(mechanism)X
1603(has)X
1739(been)X
1920(implemented)X
2367(at)X
2454(the)X
2582(socket)X
2817(level.)X
3043(Combining)X
3432(these)X
3627(two)X
3777(features)X
576 1248(allows)N
808(a)X
867(process)X
1131(to)X
1216(broadcast)X
1547(on)X
1650(any)X
1789(directly)X
2057(connected)X
2406(local)X
2585(network)X
2871(which)X
3090(supports)X
3384(the)X
3505(notion)X
3732(of)X
3822(broad-)X
576 1344(casting)N
830(in)X
919(a)X
982(site)X
1120(independent)X
1539(manner.)X
1847(This)X
2016(allows)X
2252(4.4BSD)X
2535(to)X
2625(solve)X
2822(the)X
2948(problem)X
3243(of)X
3338(deciding)X
3642(how)X
3808(to)X
3898(pro-)X
576 1440(pagate)N
808(status)X
1012(information)X
1411(in)X
1494(the)X
1613(case)X
1773(of)X
2 f
1861(rwho)X
1 f
2025(,)X
2066(or)X
2154(more)X
2340(generally)X
2660(in)X
2743(broadcasting:)X
3196(Such)X
3377(status)X
3580(information)X
3979(is)X
576 1536(broadcast)N
906(to)X
990(connected)X
1338(networks)X
1654(at)X
1734(the)X
1854(socket)X
2081(level,)X
2279(where)X
2498(the)X
2619(connected)X
2968(networks)X
3285(have)X
3460(been)X
3635(obtained)X
3934(via)X
576 1632(the)N
697(appropriate)X
2 f
1086(ioctl)X
1 f
1251(calls.)X
1461(The)X
1609(speci\256cs)X
1908(of)X
1998(such)X
2168(broadcastings)X
2632(are)X
2754(complex,)X
3073(however,)X
3393(and)X
3532(will)X
3679(be)X
3777(covered)X
576 1728(in)N
658(section)X
905(5.)X
3 f
12 s
1792 2016(5.)N
1888(ADVANCED)X
2459(TOPICS)X
1 f
10 s
776 2332(A)N
858(number)X
1128(of)X
1220(facilities)X
1521(have)X
1698(yet)X
1821(to)X
1908(be)X
2009(discussed.)X
2381(For)X
2517(most)X
2697(users)X
2887(of)X
2979(the)X
3102(IPC)X
3251(the)X
3374(mechanisms)X
3795(already)X
576 2428(described)N
907(will)X
1054(suf\256ce)X
1291(in)X
1376(constructing)X
1794(distributed)X
2158(applications.)X
2607(However,)X
2944(others)X
3162(will)X
3308(\256nd)X
3454(the)X
3574(need)X
3748(to)X
3832(utilize)X
576 2524(some)N
765(of)X
852(the)X
970(features)X
1245(which)X
1461(we)X
1575(consider)X
1867(in)X
1949(this)X
2084(section.)X
3 f
576 2716(5.1.)N
736(Out)X
889(of)X
976(band)X
1168(data)X
1 f
776 2840(The)N
923(stream)X
1159(socket)X
1386(abstraction)X
1760(includes)X
2049(the)X
2169(notion)X
2395(of)X
2484(``out)X
2662(of)X
2751(band'')X
2983(data.)X
3179(Out)X
3321(of)X
3410(band)X
3589(data)X
3746(is)X
3822(a)X
3881(logi-)X
576 2936(cally)N
753(independent)X
1166(transmission)X
1591(channel)X
1861(associated)X
2211(with)X
2373(each)X
2541(pair)X
2686(of)X
2773(connected)X
3119(stream)X
3353(sockets.)X
3649(Out)X
3789(of)X
3876(band)X
576 3032(data)N
730(is)X
803(delivered)X
1122(to)X
1204(the)X
1322(user)X
1477(independently)X
1952(of)X
2040(normal)X
2288(data.)X
2483(The)X
2629(abstraction)X
3002(de\256nes)X
3250(that)X
3391(the)X
3510(out)X
3633(of)X
3721(band)X
3898(data)X
576 3128(facilities)N
881(must)X
1065(support)X
1334(the)X
1461(reliable)X
1730(delivery)X
2021(of)X
2116(at)X
2202(least)X
2377(one)X
2521(out)X
2651(of)X
2746(band)X
2930(message)X
3230(at)X
3316(a)X
3380(time.)X
3590(This)X
3760(message)X
576 3224(may)N
737(contain)X
996(at)X
1077(least)X
1247(one)X
1386(byte)X
1547(of)X
1637(data,)X
1814(and)X
1953(at)X
2034(least)X
2204(one)X
2343(message)X
2638(may)X
2799(be)X
2899(pending)X
3181(delivery)X
3468(to)X
3554(the)X
3676(user)X
3834(at)X
3916(any)X
576 3320(one)N
727(time.)X
944(For)X
1090(communications)X
1654(protocols)X
1987(which)X
2218(support)X
2493(only)X
2670(in-band)X
2950(signaling)X
3278(\(i.e.)X
3438(the)X
3571(urgent)X
3811(data)X
3979(is)X
576 3416(delivered)N
902(in)X
991(sequence)X
1314(with)X
1484(the)X
1610(normal)X
1865(data\),)X
2074(the)X
2200(system)X
2450(normally)X
2767(extracts)X
3045(the)X
3171(data)X
3333(from)X
3517(the)X
3643(normal)X
3898(data)X
576 3512(stream)N
813(and)X
952(stores)X
1161(it)X
1227(separately.)X
1615(This)X
1779(allows)X
2010(users)X
2197(to)X
2281(choose)X
2526(between)X
2816(receiving)X
3137(the)X
3257(urgent)X
3484(data)X
3640(in)X
3724(order)X
3916(and)X
576 3608(receiving)N
897(it)X
963(out)X
1087(of)X
1176(sequence)X
1493(without)X
1759(having)X
1999(to)X
2083(buffer)X
2302(all)X
2404(the)X
2524(intervening)X
2911(data.)X
3107(It)X
3178(is)X
3254(possible)X
3539(to)X
3624(``peek'')X
3907(\(via)X
576 3704(MSG_PEEK\))N
1041(at)X
1124(out)X
1251(of)X
1343(band)X
1524(data.)X
1723(If)X
1802(the)X
1925(socket)X
2155(has)X
2287(a)X
2348(process)X
2614(group,)X
2846(a)X
2907(SIGURG)X
3229(signal)X
3444(is)X
3521(generated)X
3858(when)X
576 3800(the)N
694(protocol)X
981(is)X
1054(noti\256ed)X
1318(of)X
1405(its)X
1500(existence.)X
1859(A)X
1937(process)X
2198(can)X
2330(set)X
2439(the)X
2557(process)X
2818(group)X
3025(or)X
3112(process)X
3374(id)X
3457(to)X
3540(be)X
3637(informed)X
3952(by)X
576 3896(the)N
700(SIGURG)X
1024(signal)X
1241(via)X
1365(the)X
1489(appropriate)X
2 f
1881(fcntl)X
1 f
2049(call,)X
2211(as)X
2304(described)X
2638(below)X
2860(for)X
2980(SIGIO.)X
3260(If)X
3340(multiple)X
3632(sockets)X
3894(may)X
576 3992(have)N
752(out)X
878(of)X
969(band)X
1149(data)X
1307(awaiting)X
1607(delivery,)X
1914(a)X
2 f
1974(select)X
1 f
2181(call)X
2321(for)X
2439(exceptional)X
2833(conditions)X
3190(may)X
3352(be)X
3452(used)X
3624(to)X
3711(determine)X
576 4088(those)N
774(sockets)X
1039(with)X
1210(such)X
1386(data)X
1549(pending.)X
1876(Neither)X
2146(the)X
2273(signal)X
2493(nor)X
2629(the)X
2756(select)X
2968(indicate)X
3251(the)X
3378(actual)X
3599(arrival)X
3838(of)X
3934(the)X
576 4184(out-of-band)N
975(data,)X
1149(but)X
1271(only)X
1433(noti\256cation)X
1817(that)X
1957(it)X
2021(is)X
2094(pending.)X
776 4308(In)N
864(addition)X
1147(to)X
1230(the)X
1349(information)X
1748(passed,)X
2003(a)X
2060(logical)X
2299(mark)X
2485(is)X
2560(placed)X
2792(in)X
2876(the)X
2996(data)X
3152(stream)X
3388(to)X
3472(indicate)X
3748(the)X
3868(point)X
576 4404(at)N
658(which)X
878(the)X
1000(out)X
1126(of)X
1217(band)X
1397(data)X
1555(was)X
1704(sent.)X
1897(The)X
2046(remote)X
2293(login)X
2481(and)X
2621(remote)X
2868(shell)X
3042(applications)X
3452(use)X
3582(this)X
3720(facility)X
3970(to)X
576 4500(propagate)N
917(signals)X
1163(between)X
1456(client)X
1659(and)X
1800(server)X
2022(processes.)X
2395(When)X
2612(a)X
2673(signal)X
2889(\257ushs)X
3100(any)X
3241(pending)X
3524(output)X
3753(from)X
3934(the)X
576 4596(remote)N
819(process\(es\),)X
1221(all)X
1321(data)X
1475(up)X
1575(to)X
1657(the)X
1775(mark)X
1960(in)X
2042(the)X
2160(data)X
2314(stream)X
2548(is)X
2621(discarded.)X
776 4720(To)N
891(send)X
1064(an)X
1166(out)X
1294(of)X
1387(band)X
1569(message)X
1867(the)X
1991(MSG_OOB)X
2399(\257ag)X
2545(is)X
2624(supplied)X
2921(to)X
3009(a)X
2 f
3071(send)X
1 f
3244(or)X
2 f
3337(sendto)X
1 f
3572(calls,)X
3765(while)X
3970(to)X
576 4816(receive)N
831(out)X
955(of)X
1044(band)X
1222(data)X
1378(MSG_OOB)X
1782(should)X
2016(be)X
2113(indicated)X
2428(when)X
2623(performing)X
3005(a)X
2 f
3062(recvfrom)X
1 f
3373(or)X
2 f
3461(recv)X
1 f
3621(call.)X
3798(To)X
3908(\256nd)X
576 4912(out)N
700(if)X
771(the)X
891(read)X
1052(pointer)X
1301(is)X
1376(currently)X
1688(pointing)X
1976(at)X
2056(the)X
2176(mark)X
2364(in)X
2449(the)X
2570(data)X
2727(stream,)X
2984(the)X
3105(SIOCATMARK)X
3657(ioctl)X
3822(is)X
3898(pro-)X
576 5008(vided:)N
864 5152(ioctl\(s,)N
1104(SIOCATMARK,)X
1673(&yes\);)X
576 5296(If)N
2 f
653(yes)X
1 f
779(is)X
855(a)X
914(1)X
977(on)X
1080(return,)X
1315(the)X
1436(next)X
1597(read)X
1759(will)X
1906(return)X
2121(data)X
2278(after)X
2449(the)X
2570(mark.)X
2798(Otherwise)X
3151(\(assuming)X
3503(out)X
3628(of)X
3718(band)X
3898(data)X
576 5392(has)N
707(arrived\),)X
1006(the)X
1128(next)X
1290(read)X
1453(will)X
1601(provide)X
1870(data)X
2028(sent)X
2181(by)X
2285(the)X
2407(client)X
2609(prior)X
2789(to)X
2875(transmission)X
3303(of)X
3394(the)X
3516(out)X
3642(of)X
3733(band)X
3912(sig-)X
576 5488(nal.)N
736(The)X
883(routine)X
1132(used)X
1302(in)X
1387(the)X
1508(remote)X
1754(login)X
1941(process)X
2205(to)X
2290(\257ush)X
2468(output)X
2695(on)X
2798(receipt)X
3040(of)X
3130(an)X
3229(interrupt)X
3528(or)X
3618(quit)X
3765(signal)X
3979(is)X
8 s
10 f
576 5568(hhhhhhhhhhhhhhhhhh)N
1 f
576 5648(*)N
624(An)X
718(example)X
950(of)X
1019(such)X
1152(a)X
1196(system)X
1390(call)X
1498(is)X
1557(the)X
2 f
1651(gethostname)X
1 f
1974(\(2\))X
2064(call)X
2172(which)X
2344(returns)X
2537(the)X
2631(host's)X
2800(``of\256cial'')X
3081(name.)X

23 p
%%Page: 23 23
8 s 8 xH 0 xS 1 f 1 i
10 s
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-23)X
576 672(shown)N
805(in)X
887(Figure)X
1116(5.)X
1216(It)X
1285(reads)X
1475(the)X
1593(normal)X
1840(data)X
1994(up)X
2094(to)X
2176(the)X
2294(mark)X
2479(\(to)X
2588(discard)X
2840(it\),)X
2951(then)X
3109(reads)X
3299(the)X
3417(out-of-band)X
3816(byte.)X
864 816(#include)N
1160(<sys/ioctl.h>)X
864 912(#include)N
1160(<sys/\256le.h>)X
884 1008(...)N
864 1104(oob\(\))N
864 1200({)N
1064 1296(int)N
1168(out)X
1290(=)X
1355(FWRITE,)X
1693(mark;)X
1064 1392(char)N
1223(waste[BUFSIZ];)X
1064 1584(/*)N
1146(\257ush)X
1321(local)X
1497(terminal)X
1784(output)X
2008(*/)X
1064 1680(ioctl\(1,)N
1313(TIOCFLUSH,)X
1793(\(char)X
1979(*\)&out\);)X
1064 1776(for)N
1178(\(;;\))X
1296({)X
1264 1872(if)N
1333(\(ioctl\(rem,)X
1694(SIOCATMARK,)X
2263(&mark\))X
2537(<)X
2602(0\))X
2689({)X
1464 1968(perror\("ioctl"\);)N
1464 2064(break;)N
1264 2160(})N
1264 2256(if)N
1333(\(mark\))X
1464 2352(break;)N
1264 2448(\(void\))N
1480(read\(rem,)X
1811(waste,)X
2034(sizeof)X
2246(\(waste\)\);)X
1064 2544(})N
1064 2640(if)N
1133(\(recv\(rem,)X
1491(&mark,)X
1758(1,)X
1838(MSG_OOB\))X
2267(<)X
2332(0\))X
2419({)X
1264 2736 0.3036(perror\("recv"\);)AN
1264 2832(...)N
1064 2928(})N
1064 3024(...)N
864 3120(})N
1300 3264(Figure)N
1529(5.)X
1629(Flushing)X
1928(terminal)X
2215(I/O)X
2342(on)X
2442(receipt)X
2681(of)X
2768(out)X
2890(of)X
2977(band)X
3153(data.)X
776 3484(A)N
855(process)X
1117(may)X
1276(also)X
1426(read)X
1587(or)X
1676(peek)X
1850(at)X
1930(the)X
2050(out-of-band)X
2451(data)X
2607(without)X
2873(\256rst)X
3019(reading)X
3282(up)X
3384(to)X
3468(the)X
3588(mark.)X
3815(This)X
3979(is)X
576 3580(more)N
763(dif\256cult)X
1037(when)X
1232(the)X
1351(underlying)X
1719(protocol)X
2007(delivers)X
2282(the)X
2401(urgent)X
2627(data)X
2782(in-band)X
3048(with)X
3211(the)X
3330(normal)X
3578(data,)X
3753(and)X
3890(only)X
576 3676(sends)N
781(noti\256cation)X
1172(of)X
1266(its)X
1368(presence)X
1677(ahead)X
1892(of)X
1986(time)X
2155(\(e.g.,)X
2345(the)X
2470(TCP)X
2643(protocol)X
2937(used)X
3111(to)X
3201(implement)X
3571(streams)X
3844(in)X
3934(the)X
576 3772(Internet)N
849(domain\).)X
1179(With)X
1362(such)X
1532(protocols,)X
1873(the)X
1994(out-of-band)X
2396(byte)X
2557(may)X
2718(not)X
2842(yet)X
2962(have)X
3136(arrived)X
3386(when)X
3582(a)X
2 f
3640(recv)X
1 f
3801(is)X
3876(done)X
576 3868(with)N
746(the)X
872(MSG_OOB)X
1282(\257ag.)X
1470(In)X
1565(that)X
1713(case,)X
1900(the)X
2026(call)X
2170(will)X
2322(return)X
2542(an)X
2646(error)X
2831(of)X
2926(EWOULDBLOCK.)X
3613(Worse,)X
3871(there)X
576 3964(may)N
735(be)X
832(enough)X
1089(in-band)X
1355(data)X
1510(in)X
1593(the)X
1712(input)X
1897(buffer)X
2115(that)X
2256(normal)X
2504(\257ow)X
2667(control)X
2915(prevents)X
3208(the)X
3327(peer)X
3487(from)X
3664(sending)X
3934(the)X
576 4060(urgent)N
812(data)X
977(until)X
1154(the)X
1283(buffer)X
1511(is)X
1595(cleared.)X
1899(The)X
2055(process)X
2327(must)X
2514(then)X
2684(read)X
2855(enough)X
3123(of)X
3222(the)X
3352(queued)X
3616(data)X
3782(that)X
3934(the)X
576 4156(urgent)N
801(data)X
955(may)X
1113(be)X
1209(delivered.)X
776 4280(Certain)N
1032(programs)X
1355(that)X
1495(use)X
1622(multiple)X
1908(bytes)X
2097(of)X
2184(urgent)X
2410(data)X
2565(and)X
2702(must)X
2878(handle)X
3113(multiple)X
3400(urgent)X
3626(signals)X
3869(\(e.g.,)X
2 f
576 4376(telnet)N
1 f
767(\(1C\)\))X
970(need)X
1151(to)X
1242(retain)X
1454(the)X
1581(position)X
1867(of)X
1963(urgent)X
2197(data)X
2360(within)X
2593(the)X
2719(stream.)X
3001(This)X
3171(treatment)X
3502(is)X
3583(available)X
3901(as)X
3996(a)X
576 4472(socket-level)N
1002(option,)X
1264(SO_OOBINLINE;)X
1903(see)X
2 f
2044(setsockopt)X
1 f
2391(\(2\))X
2523(for)X
2655(usage.)X
2916(With)X
3115(this)X
3269(option,)X
3532(the)X
3669(position)X
3965(of)X
576 4568(urgent)N
806(data)X
965(\(the)X
1115(``mark''\))X
1440(is)X
1518(retained,)X
1821(but)X
1947(the)X
2069(urgent)X
2298(data)X
2456(immediately)X
2880(follows)X
3144(the)X
3266(mark)X
3455(within)X
3683(the)X
3805(normal)X
576 4664(data)N
743(stream)X
990(returned)X
1291(without)X
1568(the)X
1699(MSG_OOB)X
2114(\257ag.)X
2307(Reception)X
2665(of)X
2766(multiple)X
3066(urgent)X
3305(indications)X
3690(causes)X
3934(the)X
576 4760(mark)N
761(to)X
843(move,)X
1061(but)X
1183(no)X
1283(out-of-band)X
1682(data)X
1836(are)X
1955(lost.)X
3 f
576 4952(5.2.)N
736(Non-Blocking)X
1226(Sockets)X
1 f
776 5076(It)N
849(is)X
926(occasionally)X
1351(convenient)X
1727(to)X
1813(make)X
2011(use)X
2142(of)X
2234(sockets)X
2495(which)X
2716(do)X
2821(not)X
2948(block;)X
3173(that)X
3318(is,)X
3416(I/O)X
3548(requests)X
3836(which)X
576 5172(cannot)N
815(complete)X
1134(immediately)X
1559(and)X
1699(would)X
1923(therefore)X
2238(cause)X
2441(the)X
2563(process)X
2828(to)X
2914(be)X
3014(suspended)X
3372(awaiting)X
3672(completion)X
576 5268(are)N
698(not)X
823(executed,)X
1152(and)X
1291(an)X
1390(error)X
1570(code)X
1745(is)X
1821(returned.)X
2152(Once)X
2345(a)X
2404(socket)X
2633(has)X
2764(been)X
2940(created)X
3197(via)X
3319(the)X
2 f
3441(socket)X
1 f
3666(call,)X
3826(it)X
3894(may)X
576 5364(be)N
672(marked)X
933(as)X
1020(non-blocking)X
1467(by)X
2 f
1567(fcntl)X
1 f
1729(as)X
1816(follows:)X

24 p
%%Page: 24 24
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-24)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
864 720(#include)N
1160(<fcntl.h>)X
884 816(...)N
864 912(int)N
1064(s;)X
884 1008(...)N
864 1104(s)N
915(=)X
980(socket\(AF_INET,)X
1577(SOCK_STREAM,)X
2194(0\);)X
884 1200(...)N
864 1296(if)N
933(\(fcntl\(s,)X
1205(F_SETFL,)X
1564(FNDELAY\))X
1985(<)X
2050(0\))X
1064 1392(perror\("fcntl)N
1488(F_SETFL,)X
1847(FNDELAY"\);)X
1064 1488(exit\(1\);)N
864 1584(})N
884 1680(...)N
776 1852(When)N
1015(performing)X
1423(non-blocking)X
1897(I/O)X
2051(on)X
2178(sockets,)X
2481(one)X
2644(must)X
2846(be)X
2969(careful)X
3241(to)X
3351(check)X
3587(for)X
3729(the)X
3875(error)X
576 1948(EWOULDBLOCK)N
1220(\(stored)X
1468(in)X
1555(the)X
1678(global)X
1903(variable)X
2 f
2187(errno)X
1 f
2365(\),)X
2437(which)X
2658(occurs)X
2893(when)X
3092(an)X
3192(operation)X
3519(would)X
3743(normally)X
576 2044(block,)N
797(but)X
922(the)X
1043(socket)X
1271(it)X
1338(was)X
1487(performed)X
1846(on)X
1950(is)X
2027(marked)X
2292(as)X
2383(non-blocking.)X
2874(In)X
2965(particular,)X
2 f
3317(accept)X
1 f
3527(,)X
2 f
3571(connect)X
1 f
3821(,)X
2 f
3865(send)X
1 f
4012(,)X
2 f
576 2140(recv)N
1 f
715(,)X
2 f
757(read)X
1 f
904(,)X
946(and)X
2 f
1084(write)X
1 f
1270(can)X
1404(all)X
1506(return)X
1720(EWOULDBLOCK,)X
2381(and)X
2519(processes)X
2849(should)X
3084(be)X
3181(prepared)X
3484(to)X
3567(deal)X
3722(with)X
3885(such)X
576 2236(return)N
794(codes.)X
1043(If)X
1123(an)X
1225(operation)X
1554(such)X
1727(as)X
1820(a)X
2 f
1882(send)X
1 f
2055(cannot)X
2295(be)X
2398(done)X
2581(in)X
2670(its)X
2772(entirety,)X
3064(but)X
3193(partial)X
3425(writes)X
3648(are)X
3774(sensible)X
576 2332(\(for)N
718(example,)X
1031(when)X
1226(using)X
1420(a)X
1477(stream)X
1712(socket\),)X
1985(the)X
2104(data)X
2259(that)X
2400(can)X
2533(be)X
2630(sent)X
2780(immediately)X
3201(will)X
3345(be)X
3441(processed,)X
3798(and)X
3934(the)X
576 2428(return)N
788(value)X
982(will)X
1126(indicate)X
1400(the)X
1518(amount)X
1778(actually)X
2052(sent.)X
3 f
576 2620(5.3.)N
736(Interrupt)X
1081(driven)X
1323(socket)X
1557(I/O)X
1 f
776 2744(The)N
922(SIGIO)X
1157(signal)X
1369(allows)X
1599(a)X
1656(process)X
1918(to)X
2001(be)X
2098(noti\256ed)X
2363(via)X
2482(a)X
2539(signal)X
2751(when)X
2946(a)X
3003(socket)X
3229(\(or)X
3344(more)X
3531(generally,)X
3872(a)X
3930(\256le)X
576 2840(descriptor\))N
951(has)X
1085(data)X
1246(waiting)X
1513(to)X
1602(be)X
1705(read.)X
1911(Use)X
2063(of)X
2157(the)X
2282(SIGIO)X
2522(facility)X
2775(requires)X
3060(three)X
3247(steps:)X
3475(First,)X
3667(the)X
3791(process)X
576 2936(must)N
754(set)X
867(up)X
971(a)X
1031(SIGIO)X
1269(signal)X
1484(handler)X
1749(by)X
1853(use)X
1984(of)X
2075(the)X
2 f
2197(signal)X
1 f
2416(or)X
2 f
2507(sigvec)X
1 f
2732(calls.)X
2943(Second,)X
3223(it)X
3291(must)X
3470(set)X
3583(the)X
3705(process)X
3970(id)X
576 3032(or)N
670(process)X
938(group)X
1152(id)X
1241(which)X
1463(is)X
1542(to)X
1630(receive)X
1889(noti\256cation)X
2279(of)X
2372(pending)X
2656(input)X
2846(to)X
2934(its)X
3035(own)X
3199(process)X
3466(id,)X
3574(or)X
3667(the)X
3791(process)X
576 3128(group)N
783(id)X
865(of)X
952(its)X
1048(process)X
1310(group)X
1518(\(note)X
1704(that)X
1845(the)X
1964(default)X
2208(process)X
2470(group)X
2678(of)X
2766(a)X
2823(socket)X
3049(is)X
3123(group)X
3331(zero\).)X
3558(This)X
3721(is)X
3795(accom-)X
576 3224(plished)N
828(by)X
929(use)X
1057(of)X
1145(an)X
2 f
1242(fcntl)X
1 f
1405(call.)X
1582(Third,)X
1801(it)X
1865(must)X
2040(enable)X
2270(asynchronous)X
2731(noti\256cation)X
3115(of)X
3202(pending)X
3480(I/O)X
3607(requests)X
3890(with)X
576 3320(another)N
2 f
839(fcntl)X
1 f
1003(call.)X
1181(Sample)X
1443(code)X
1617(to)X
1701(allow)X
1901(a)X
1959(given)X
2159(process)X
2423(to)X
2508(receive)X
2764(information)X
3165(on)X
3268(pending)X
3549(I/O)X
3679(requests)X
3965(as)X
576 3416(they)N
740(occur)X
945(for)X
1065(a)X
1127(socket)X
2 f
1358(s)X
1 f
1415(is)X
1494(given)X
1698(in)X
1786(Figure)X
2021(6.)X
2127(With)X
2312(the)X
2435(addition)X
2722(of)X
2814(a)X
2875(handler)X
3141(for)X
3260(SIGURG,)X
3603(this)X
3743(code)X
3920(can)X
576 3512(also)N
725(be)X
821(used)X
988(to)X
1070(prepare)X
1332(for)X
1446(receipt)X
1685(of)X
1772(SIGURG)X
2090(signals.)X
864 3656(#include)N
1160(<fcntl.h>)X
884 3752(...)N
864 3848(int)N
1064(io_handler\(\);)X
884 3944(...)N
864 4040(signal\(SIGIO,)N
1336(io_handler\);)X
864 4232(/*)N
946(Set)X
1068(the)X
1186(process)X
1447(receiving)X
1766(SIGIO/SIGURG)X
2320(signals)X
2562(to)X
2644(us)X
2735(*/)X
864 4424(if)N
933(\(fcntl\(s,)X
1205(F_SETOWN,)X
1663(getpid\(\)\))X
1964(<)X
2029(0\))X
2116({)X
1064 4520(perror\("fcntl)N
1488(F_SETOWN"\);)X
1064 4616(exit\(1\);)N
864 4712(})N
864 4904(/*)N
946(Allow)X
1166(receipt)X
1405(of)X
1492(asynchronous)X
1953(I/O)X
2080(signals)X
2322(*/)X
864 5096(if)N
933(\(fcntl\(s,)X
1205(F_SETFL,)X
1564(FASYNC\))X
1926(<)X
1991(0\))X
2078({)X
1064 5192(perror\("fcntl)N
1488(F_SETFL,)X
1847(FASYNC"\);)X
1064 5288(exit\(1\);)N
864 5384(})N
1352 5528(Figure)N
1581(6.)X
1681(Use)X
1826(of)X
1913(asynchronous)X
2374(noti\256cation)X
2758(of)X
2845(I/O)X
2972(requests.)X

25 p
%%Page: 25 25
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-25)X
3 f
576 672(5.4.)N
736(Signals)X
999(and)X
1147(process)X
1421(groups)X
1 f
776 796(Due)N
946(to)X
1044(the)X
1178(existence)X
1513(of)X
1616(the)X
1750(SIGURG)X
2084(and)X
2236(SIGIO)X
2486(signals)X
2744(each)X
2928(socket)X
3169(has)X
3312(an)X
3424(associated)X
3791(process)X
576 892(number,)N
865(just)X
1004(as)X
1095(is)X
1172(done)X
1351(for)X
1468(terminals.)X
1829(This)X
1994(value)X
2191(is)X
2267(initialized)X
2610(to)X
2695(zero,)X
2877(but)X
3002(may)X
3163(be)X
3262(rede\256ned)X
3584(at)X
3665(a)X
3724(later)X
3890(time)X
576 988(with)N
741(the)X
862(F_SETOWN)X
2 f
1303(fcntl)X
1 f
1445(,)X
1488(such)X
1658(as)X
1748(was)X
1896(done)X
2075(in)X
2160(the)X
2282(code)X
2458(above)X
2674(for)X
2792(SIGIO.)X
3070(To)X
3183(set)X
3296(the)X
3418(socket's)X
3705(process)X
3970(id)X
576 1084(for)N
694(signals,)X
960(positive)X
1237(arguments)X
1595(should)X
1832(be)X
1932(given)X
2134(to)X
2220(the)X
2 f
2342(fcntl)X
1 f
2508(call.)X
2688(To)X
2801(set)X
2914(the)X
3035(socket's)X
3321(process)X
3585(group)X
3795(for)X
3912(sig-)X
576 1180(nals,)N
747(negative)X
1041(arguments)X
1397(should)X
1632(be)X
1730(passed)X
1967(to)X
2 f
2052(fcntl)X
1 f
2194(.)X
2257(Note)X
2436(that)X
2579(the)X
2700(process)X
2964(number)X
3232(indicates)X
3540(either)X
3746(the)X
3867(asso-)X
576 1276(ciated)N
790(process)X
1053(id)X
1137(or)X
1226(the)X
1346(associated)X
1698(process)X
1961(group;)X
2192(it)X
2258(is)X
2333(impossible)X
2701(to)X
2785(specify)X
3039(both)X
3202(at)X
3281(the)X
3400(same)X
3586(time.)X
3789(A)X
3868(simi-)X
576 1372(lar)N
2 f
681(fcntl)X
1 f
823(,)X
863(F_GETOWN,)X
1335(is)X
1408(available)X
1718(for)X
1832(determining)X
2239(the)X
2357(current)X
2605(process)X
2866(number)X
3131(of)X
3218(a)X
3274(socket.)X
776 1496(Another)N
1074(signal)X
1300(which)X
1531(is)X
1619(useful)X
1850(when)X
2059(constructing)X
2490(server)X
2722(processes)X
3065(is)X
3153(SIGCHLD.)X
3575(This)X
3752(signal)X
3979(is)X
576 1592(delivered)N
904(to)X
995(a)X
1060(process)X
1330(when)X
1533(any)X
1678(child)X
1867(processes)X
2204(have)X
2385(changed)X
2682(state.)X
2898(Normally)X
3234(servers)X
3490(use)X
3625(the)X
3751(signal)X
3970(to)X
576 1688(``reap'')N
843(child)X
1023(processes)X
1351(that)X
1491(have)X
1663(exited)X
1879(without)X
2143(explicitly)X
2465(awaiting)X
2761(their)X
2929(termination)X
3319(or)X
3407(periodic)X
3691(polling)X
3938(for)X
576 1784(exit)N
722(status.)X
970(For)X
1107(example,)X
1425(the)X
1549(remote)X
1798(login)X
1988(server)X
2211(loop)X
2379(shown)X
2614(in)X
2702(Figure)X
2937(2)X
3003(may)X
3166(be)X
3267(augmented)X
3644(as)X
3736(shown)X
3970(in)X
576 1880(Figure)N
805(7.)X
864 2024(int)N
968(reaper\(\);)X
884 2120(...)N
864 2216(signal\(SIGCHLD,)N
1469(reaper\);)X
864 2312(listen\(f,)N
1131(5\);)X
864 2408(for)N
978(\(;;\))X
1096({)X
1064 2504(int)N
1168(g,)X
1248(len)X
1366(=)X
1431(sizeof)X
1643(\(from\);)X
1064 2696(g)N
1124(=)X
1189(accept\(f,)X
1489(\(struct)X
1714(sockaddr)X
2024(*\)&from,)X
2349(&len,\);)X
1064 2792(if)N
1133(\(g)X
1220(<)X
1285(0\))X
1372({)X
1264 2888(if)N
1333(\(errno)X
1550(!=)X
1642(EINTR\))X
1464 2984(syslog\(LOG_ERR,)N
2095("rlogind:)X
2401(accept:)X
2649(%m"\);)X
1264 3080(continue;)N
1064 3176(})N
1064 3272(...)N
864 3368(})N
884 3464(...)N
864 3560(#include)N
1160(<wait.h>)X
864 3656(reaper\(\))N
864 3752({)N
1064 3848(union)N
1266(wait)X
1424(status;)X
1064 4040(while)N
1262(\(wait3\(&status,)X
1778(WNOHANG,)X
2242(0\))X
2329(>)X
2394(0\))X
1264 4136(;)N
864 4232(})N
1675 4472(Figure)N
1904(7.)X
2004(Use)X
2149(of)X
2236(the)X
2354(SIGCHLD)X
2721(signal.)X
776 4692(If)N
853(the)X
974(parent)X
1198(server)X
1418(process)X
1682(fails)X
1843(to)X
1928(reap)X
2090(its)X
2188(children,)X
2494(a)X
2553(large)X
2737(number)X
3005(of)X
3095(``zombie'')X
3462(processes)X
3794(may)X
3956(be)X
576 4788(created.)N
3 f
576 4980(5.5.)N
736(Pseudo)X
1000(terminals)X
1 f
776 5104(Many)N
990(programs)X
1320(will)X
1471(not)X
1600(function)X
1894(properly)X
2193(without)X
2465(a)X
2529(terminal)X
2824(for)X
2946(standard)X
3246(input)X
3438(and)X
3582(output.)X
3854(Since)X
576 5200(sockets)N
839(do)X
946(not)X
1075(provide)X
1347(the)X
1472(semantics)X
1815(of)X
1909(terminals,)X
2254(it)X
2325(is)X
2405(often)X
2597(necessary)X
2937(to)X
3026(have)X
3205(a)X
3267(process)X
3534(communicating)X
576 5296(over)N
740(the)X
859(network)X
1143(do)X
1244(so)X
1336(through)X
1606(a)X
2 f
1663(pseudo-terminal)X
1 f
2188(.)X
2249(A)X
2328(pseudo-)X
2603(terminal)X
2891(is)X
2965(actually)X
3241(a)X
3299(pair)X
3446(of)X
3535(devices,)X
3818(master)X
576 5392(and)N
724(slave,)X
941(which)X
1169(allow)X
1379(a)X
1447(process)X
1720(to)X
1814(serve)X
2016(as)X
2115(an)X
2223(active)X
2447(agent)X
2653(in)X
2747(communication)X
3277(between)X
3577(processes)X
3916(and)X
576 5488(users.)N
801(Data)X
973(written)X
1220(on)X
1320(the)X
1438(slave)X
1623(side)X
1772(of)X
1859(a)X
1915(pseudo-terminal)X
2456(is)X
2529(supplied)X
2820(as)X
2908(input)X
3093(to)X
3176(a)X
3233(process)X
3495(reading)X
3757(from)X
3934(the)X
576 5584(master)N
811(side,)X
981(while)X
1180(data)X
1335(written)X
1583(on)X
1684(the)X
1802(master)X
2036(side)X
2185(are)X
2304(processed)X
2641(as)X
2728(terminal)X
3015(input)X
3199(for)X
3313(the)X
3431(slave.)X
3656(In)X
3743(this)X
3878(way,)X
576 5680(the)N
698(process)X
963(manipulating)X
1409(the)X
1531(master)X
1769(side)X
1922(of)X
2013(the)X
2135(pseudo-terminal)X
2680(has)X
2811(control)X
3062(over)X
3229(the)X
3351(information)X
3753(read)X
3916(and)X

26 p
%%Page: 26 26
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-26)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
576 672(written)N
826(on)X
929(the)X
1050(slave)X
1238(side)X
1390(as)X
1480(if)X
1552(it)X
1619(were)X
1799(manipulating)X
2244(the)X
2365(keyboard)X
2687(and)X
2826(reading)X
3090(the)X
3211(screen)X
3440(on)X
3543(a)X
3602(real)X
3745(terminal.)X
576 768(The)N
726(purpose)X
1005(of)X
1097(this)X
1237(abstraction)X
1614(is)X
1692(to)X
1779(preserve)X
2077(terminal)X
2369(semantics)X
2711(over)X
2880(a)X
2942(network)X
3231(connection\320)X
3689(that)X
3835(is,)X
3934(the)X
576 864(slave)N
761(side)X
910(appears)X
1176(as)X
1263(a)X
1319(normal)X
1566(terminal)X
1853(to)X
1935(any)X
2071(process)X
2332(reading)X
2593(from)X
2769(or)X
2856(writing)X
3107(to)X
3189(it.)X
776 988(For)N
913(example,)X
1232(the)X
1357(remote)X
1607(login)X
1798(server)X
2022(uses)X
2187(pseudo-terminals)X
2766(for)X
2887(remote)X
3137(login)X
3328(sessions.)X
3657(A)X
3742(user)X
3903(log-)X
576 1084(ging)N
741(in)X
826(to)X
911(a)X
970(machine)X
1265(across)X
1489(the)X
1610(network)X
1896(is)X
1972(provided)X
2280(a)X
2339(shell)X
2513(with)X
2677(a)X
2735(slave)X
2922(pseudo-terminal)X
3465(as)X
3554(standard)X
3848(input,)X
576 1180(output,)N
826(and)X
968(error.)X
1191(The)X
1342(server)X
1565(process)X
1832(then)X
1996(handles)X
2267(the)X
2392(communication)X
2917(between)X
3212(the)X
3337(programs)X
3667(invoked)X
3952(by)X
576 1276(the)N
698(remote)X
945(shell)X
1120(and)X
1259(the)X
1380(user's)X
1595(local)X
1774(client)X
1975(process.)X
2279(When)X
2494(a)X
2553(user)X
2710(sends)X
2911(a)X
2970(character)X
3289(that)X
3432(generates)X
3759(an)X
3858(inter-)X
576 1372(rupt)N
730(on)X
836(the)X
960(remote)X
1209(machine)X
1507(that)X
1653(\257ushes)X
1901(terminal)X
2194(output,)X
2444(the)X
2568(pseudo-terminal)X
3115(generates)X
3445(a)X
3507(control)X
3760(message)X
576 1468(for)N
693(the)X
814(server)X
1034(process.)X
1338(The)X
1486(server)X
1706(then)X
1867(sends)X
2068(an)X
2167(out)X
2292(of)X
2382(band)X
2561(message)X
2855(to)X
2939(the)X
3059(client)X
3259(process)X
3522(to)X
3606(signal)X
3819(a)X
3877(\257ush)X
576 1564(of)N
663(data)X
817(at)X
895(the)X
1013(real)X
1154(terminal)X
1441(and)X
1577(on)X
1677(the)X
1795(intervening)X
2180(data)X
2334(buffered)X
2627(in)X
2709(the)X
2827(network.)X
776 1688(Under)N
998(4.4BSD,)X
1294(the)X
1413(name)X
1608(of)X
1696(the)X
1815(slave)X
2001(side)X
2151(of)X
2239(a)X
2296(pseudo-terminal)X
2838(is)X
2912(of)X
3000(the)X
3119(form)X
2 f
3296(/dev/ttyxy)X
1 f
3604(,)X
3645(where)X
2 f
3863(x)X
1 f
3921(is)X
3996(a)X
576 1784(single)N
797(letter)X
992(starting)X
1262(at)X
1350(`p')X
1474(and)X
1620(continuing)X
1992(to)X
2084(`t'.)X
2 f
2230(y)X
1 f
2296(is)X
2379(a)X
2445(hexadecimal)X
2881(digit)X
3057(\(i.e.,)X
3232(a)X
3298(single)X
3518(character)X
3843(in)X
3934(the)X
576 1880(range)N
782(0)X
849(through)X
1125(9)X
1192(or)X
1286(`a')X
1403(through)X
1679(`f'\).)X
1854(The)X
2006(master)X
2247(side)X
2403(of)X
2497(a)X
2560(pseudo-terminal)X
3108(is)X
2 f
3189(/dev/ptyxy)X
1 f
3515(,)X
3563(where)X
2 f
3788(x)X
1 f
3852(and)X
2 f
3996(y)X
1 f
576 1976(correspond)N
953(to)X
1035(the)X
1153(slave)X
1338(side)X
1487(of)X
1574(the)X
1692(pseudo-terminal.)X
776 2100(In)N
867(general,)X
1148(the)X
1270(method)X
1534(of)X
1626(obtaining)X
1953(a)X
2014(pair)X
2164(of)X
2256(master)X
2495(and)X
2636(slave)X
2826(pseudo-terminals)X
3403(is)X
3481(to)X
3568(\256nd)X
3717(a)X
3778(pseudo-)X
576 2196(terminal)N
867(which)X
1087(is)X
1164(not)X
1290(currently)X
1604(in)X
1690(use.)X
1861(The)X
2010(master)X
2248(half)X
2397(of)X
2488(a)X
2548(pseudo-terminal)X
3092(is)X
3168(a)X
3227(single-open)X
3624(device;)X
3879(thus,)X
576 2292(each)N
749(master)X
988(may)X
1151(be)X
1252(opened)X
1509(in)X
1596(turn)X
1750(until)X
1921(an)X
2022(open)X
2203(succeeds.)X
2554(The)X
2705(slave)X
2896(side)X
3051(of)X
3144(the)X
3268(pseudo-terminal)X
3815(is)X
3894(then)X
576 2388(opened,)N
854(and)X
996(is)X
1075(set)X
1190(to)X
1278(the)X
1402(proper)X
1638(terminal)X
1931(modes)X
2166(if)X
2241(necessary.)X
2619(The)X
2769(process)X
3035(then)X
2 f
3198(fork)X
1 f
3327(s;)X
3405(the)X
3528(child)X
3713(closes)X
3934(the)X
576 2484(master)N
816(side)X
971(of)X
1064(the)X
1188(pseudo-terminal,)X
1755(and)X
2 f
1897(exec)X
1 f
2041(s)X
2098(the)X
2222(appropriate)X
2614(program.)X
2952(Meanwhile,)X
3359(the)X
3483(parent)X
3711(closes)X
3934(the)X
576 2580(slave)N
765(side)X
917(of)X
1007(the)X
1128(pseudo-terminal)X
1672(and)X
1811(begins)X
2043(reading)X
2307(and)X
2446(writing)X
2700(from)X
2879(the)X
3000(master)X
3237(side.)X
3429(Sample)X
3692(code)X
3867(mak-)X
576 2676(ing)N
702(use)X
833(of)X
924(pseudo-terminals)X
1500(is)X
1577(given)X
1779(in)X
1865(Figure)X
2099(8;)X
2186(this)X
2326(code)X
2503(assumes)X
2795(that)X
2940(a)X
3001(connection)X
3378(on)X
3483(a)X
3544(socket)X
2 f
3774(s)X
1 f
3830(exists,)X
576 2772(connected)N
929(to)X
1018(a)X
1081(peer)X
1247(who)X
1412(wants)X
1626(a)X
1689(service)X
1944(of)X
2038(some)X
2234(kind,)X
2423(and)X
2566(that)X
2713(the)X
2838(process)X
3106(has)X
3240(disassociated)X
3690(itself)X
3876(from)X
576 2868(any)N
712(previous)X
1008(controlling)X
1379(terminal.)X
3 f
576 3060(5.6.)N
736(Selecting)X
1063(speci\256c)X
1332(protocols)X
1 f
776 3184(If)N
862(the)X
992(third)X
1175(argument)X
1510(to)X
1604(the)X
2 f
1734(socket)X
1 f
1967(call)X
2115(is)X
2200(0,)X
2 f
2292(socket)X
1 f
2526(will)X
2683(select)X
2899(a)X
2968(default)X
3224(protocol)X
3524(to)X
3619(use)X
3759(with)X
3934(the)X
576 3280(returned)N
867(socket)X
1095(of)X
1184(the)X
1304(type)X
1464(requested.)X
1834(The)X
1981(default)X
2226(protocol)X
2515(is)X
2590(usually)X
2843(correct,)X
3109(and)X
3247(alternate)X
3546(choices)X
3809(are)X
3930(not)X
576 3376(usually)N
834(available.)X
1191(However,)X
1533(when)X
1734(using)X
1934(``raw'')X
2190(sockets)X
2453(to)X
2542(communicate)X
3001(directly)X
3273(with)X
3442(lower-level)X
3836(proto-)X
576 3472(cols)N
735(or)X
832(hardware)X
1162(interfaces,)X
1525(the)X
1653(protocol)X
1950(argument)X
2282(may)X
2449(be)X
2554(important)X
2894(for)X
3017(setting)X
3259(up)X
3368(demultiplexing.)X
3921(For)X
576 3568(example,)N
895(raw)X
1043(sockets)X
1306(in)X
1395(the)X
1520(Internet)X
1797(family)X
2033(may)X
2198(be)X
2301(used)X
2475(to)X
2564(implement)X
2933(a)X
2996(new)X
3157(protocol)X
3451(above)X
3671(IP,)X
3790(and)X
3934(the)X
576 3664(socket)N
805(will)X
953(receive)X
1210(packets)X
1475(only)X
1641(for)X
1759(the)X
1881(protocol)X
2172(speci\256ed.)X
2521(To)X
2634(obtain)X
2858(a)X
2918(particular)X
3250(protocol)X
3541(one)X
3680(determines)X
576 3760(the)N
700(protocol)X
993(number)X
1265(as)X
1359(de\256ned)X
1622(within)X
1853(the)X
1978(communication)X
2503(domain.)X
2810(For)X
2948(the)X
3073(Internet)X
3350(domain)X
3617(one)X
3760(may)X
3925(use)X
576 3856(one)N
712(of)X
799(the)X
917(library)X
1151(routines)X
1429(discussed)X
1756(in)X
1838(section)X
2085(3,)X
2165(such)X
2332(as)X
2 f
2419(getprotobyname)X
1 f
2940(:)X
864 4000(#include)N
1160(<sys/types.h>)X
864 4096(#include)N
1160(<sys/socket.h>)X
864 4192(#include)N
1160(<netinet/in.h>)X
864 4288(#include)N
1160(<netdb.h>)X
884 4384(...)N
864 4480(pp)N
964(=)X
1029 0.1406(getprotobyname\("newtcp"\);)AX
864 4576(s)N
915(=)X
980(socket\(AF_INET,)X
1577(SOCK_STREAM,)X
2194(pp->p_proto\);)X
576 4720(This)N
751(would)X
984(result)X
1195(in)X
1290(a)X
1359(socket)X
2 f
1597(s)X
1 f
1661(using)X
1867(a)X
1936(stream)X
2183(based)X
2400(connection,)X
2806(but)X
2942(with)X
3118(protocol)X
3419(type)X
3591(of)X
3692(``newtcp'')X
576 4816(instead)N
823(of)X
910(the)X
1028(default)X
1271(``tcp.'')X
776 4940(In)N
864(the)X
983(NS)X
1106(domain,)X
1387(the)X
1506(available)X
1817(socket)X
2043(protocols)X
2363(are)X
2484(de\256ned)X
2742(in)X
2826(<)X
2 f
2871(netns/ns.h)X
1 f
3193(>.)X
3300(To)X
3411(create)X
3626(a)X
3684(raw)X
3827(socket)X
576 5036(for)N
690(Xerox)X
911(Error)X
1101(Protocol)X
1392(messages,)X
1735(one)X
1871(might)X
2077(use:)X
864 5180(#include)N
1160(<sys/types.h>)X
864 5276(#include)N
1160(<sys/socket.h>)X
864 5372(#include)N
1160(<netns/ns.h>)X
884 5468(...)N
864 5564(s)N
915(=)X
980(socket\(AF_NS,)X
1496(SOCK_RAW,)X
1976(NSPROTO_ERROR\);)X

27 p
%%Page: 27 27
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-27)X
864 720(gotpty)N
1088(=)X
1153(0;)X
864 816(for)N
978(\(c)X
1061(=)X
1126('p';)X
1262(!gotpty)X
1513(&&)X
1657(c)X
1713(<=)X
1823('s';)X
1950(c++\))X
2123({)X
1064 912(line)N
1204(=)X
1269("/dev/ptyXX";)X
1064 1008 0.1350(line[sizeof\("/dev/pty"\)-1])AN
1899(=)X
1964(c;)X
1064 1104 0.1298(line[sizeof\("/dev/ptyp"\)-1])AN
1939(=)X
2004('0';)X
1064 1200(if)N
1133(\(stat\(line,)X
1458(&statbuf\))X
1785(<)X
1850(0\))X
1264 1296(break;)N
1064 1392(for)N
1178(\(i)X
1247(=)X
1312(0;)X
1394(i)X
1436(<)X
1501(16;)X
1623(i++\))X
1782({)X
1264 1488 0.1298(line[sizeof\("/dev/ptyp"\)-1])AN
2139(=)X
2204("0123456789abcdef"[i];)X
1264 1584(master)N
1498(=)X
1563(open\(line,)X
1906(O_RDWR\);)X
1264 1680(if)N
1333(\(master)X
1594(>)X
1659(0\))X
1746({)X
1464 1776(gotpty)N
1688(=)X
1753(1;)X
1464 1872(break;)N
1264 1968(})N
1064 2064(})N
864 2160(})N
864 2256(if)N
933(\(!gotpty\))X
1238({)X
1064 2352(syslog\(LOG_ERR,)N
1695("All)X
1850(network)X
2133(ports)X
2313(in)X
2395(use"\);)X
1064 2448(exit\(1\);)N
864 2544(})N
864 2736 0.1648(line[sizeof\("/dev/"\)-1])AN
1597(=)X
1662('t';)X
864 2832(slave)N
1049(=)X
1114(open\(line,)X
1457(O_RDWR\);)X
1864(/*)X
2 f
1946(slave)X
1 f
2131(is)X
2204(now)X
2362(slave)X
2547(side)X
2696(*/)X
864 2928(if)N
933(\(slave)X
1145(<)X
1210(0\))X
1297({)X
1064 3024(syslog\(LOG_ERR,)N
1695("Cannot)X
1979(open)X
2155(slave)X
2340(pty)X
2462(%s",)X
2633(line\);)X
1064 3120(exit\(1\);)N
864 3216(})N
864 3408(ioctl\(slave,)N
1238(TIOCGETP,)X
1665(&b\);)X
1864(/*)X
1946(Set)X
2068(slave)X
2253(tty)X
2357(modes)X
2586(*/)X
864 3504(b.sg_\257ags)N
1206(=)X
1271(CRMOD|XTABS|ANYP;)X
864 3600(ioctl\(slave,)N
1238(TIOCSETP,)X
1651(&b\);)X
864 3792(i)N
906(=)X
971(fork\(\);)X
864 3888(if)N
933(\(i)X
1002(<)X
1067(0\))X
1154({)X
1064 3984(syslog\(LOG_ERR,)N
1695("fork:)X
1904(%m"\);)X
1064 4080(exit\(1\);)N
864 4176(})N
922(else)X
1067(if)X
1136(\(i\))X
1232({)X
1664(/*)X
1746(Parent)X
1971(*/)X
1064 4272(close\(slave\);)N
1064 4368(...)N
864 4464(})N
922(else)X
1067({)X
1484(/*)X
1566(Child)X
1763(*/)X
1064 4560(\(void\))N
1280(close\(s\);)X
1064 4656(\(void\))N
1280(close\(master\);)X
1064 4752(dup2\(slave,)N
1456(0\);)X
1064 4848(dup2\(slave,)N
1456(1\);)X
1064 4944(dup2\(slave,)N
1456(2\);)X
1064 5040(if)N
1133(\(slave)X
1345(>)X
1410(2\))X
1264 5136(\(void\))N
1480(close\(slave\);)X
1064 5232(...)N
864 5328(})N
1531 5472(Figure)N
1760(8.)X
1860(Creation)X
2156(and)X
2292(use)X
2419(of)X
2506(a)X
2562(pseudo)X
2809(terminal)X

28 p
%%Page: 28 28
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-28)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
3 f
576 672(5.7.)N
736(Address)X
1036(binding)X
1 f
776 796(As)N
889(was)X
1038(mentioned)X
1400(in)X
1486(section)X
1737(2,)X
1821(binding)X
2089(addresses)X
2422(to)X
2509(sockets)X
2770(in)X
2857(the)X
2980(Internet)X
3255(and)X
3396(NS)X
3523(domains)X
3819(can)X
3956(be)X
576 892(fairly)N
776(complex.)X
1118(As)X
1233(a)X
1295(brief)X
1473(reminder,)X
1809(these)X
2000(associations)X
2413(are)X
2538(composed)X
2889(of)X
2982(local)X
3164(and)X
3306(foreign)X
3563(addresses,)X
3916(and)X
576 988(local)N
753(and)X
890(foreign)X
1143(ports.)X
1364(Port)X
1518(numbers)X
1815(are)X
1935(allocated)X
2246(out)X
2369(of)X
2457(separate)X
2742(spaces,)X
2994(one)X
3132(for)X
3248(each)X
3418(system)X
3662(and)X
3800(one)X
3938(for)X
576 1084(each)N
750(domain)X
1016(on)X
1122(that)X
1268(system.)X
1556(Through)X
1858(the)X
2 f
1982(bind)X
1 f
2150(system)X
2398(call,)X
2560(a)X
2622(process)X
2889(may)X
3053(specify)X
3311(half)X
3462(of)X
3555(an)X
3656(association,)X
576 1180(the)N
694(<local)X
915(address,)X
1196(local)X
1372(port>)X
1566(part,)X
1731(while)X
1929(the)X
2 f
2047(connect)X
1 f
2317(and)X
2 f
2453(accept)X
1 f
2683(primitives)X
3027(are)X
3146(used)X
3314(to)X
3397(complete)X
3712(a)X
3769(socket's)X
576 1276(association)N
958(by)X
1064(specifying)X
1424(the)X
1548(<foreign)X
1850(address,)X
2136(foreign)X
2393(port>)X
2592(part.)X
2782(Since)X
2985(the)X
3108(association)X
3489(is)X
3567(created)X
3825(in)X
3912(two)X
576 1372(steps)N
764(the)X
890(association)X
1274(uniqueness)X
1658(requirement)X
2074(indicated)X
2397(previously)X
2764(could)X
2971(be)X
3076(violated)X
3363(unless)X
3592(care)X
3756(is)X
3838(taken.)X
576 1468(Further,)N
856(it)X
924(is)X
1001(unrealistic)X
1359(to)X
1445(expect)X
1679(user)X
1837(programs)X
2164(to)X
2250(always)X
2497(know)X
2698(proper)X
2931(values)X
3159(to)X
3244(use)X
3374(for)X
3491(the)X
3612(local)X
3791(address)X
576 1564(and)N
719(local)X
903(port)X
1060(since)X
1253(a)X
1317(host)X
1478(may)X
1644(reside)X
1864(on)X
1972(multiple)X
2266(networks)X
2588(and)X
2732(the)X
2858(set)X
2975(of)X
3070(allocated)X
3388(port)X
3545(numbers)X
3849(is)X
3930(not)X
576 1660(directly)N
841(accessible)X
1187(to)X
1269(a)X
1325(user.)X
776 1784(To)N
896(simplify)X
1193(local)X
1380(address)X
1652(binding)X
1927(in)X
2020(the)X
2149(Internet)X
2430(domain)X
2701(the)X
2830(notion)X
3065(of)X
3163(a)X
3231(``wildcard'')X
3652(address)X
3925(has)X
576 1880(been)N
777(provided.)X
1151(When)X
1392(an)X
1517(address)X
1807(is)X
1909(speci\256ed)X
2243(as)X
2359(INADDR_ANY)X
2934(\(a)X
3046(manifest)X
3371(constant)X
3686(de\256ned)X
3970(in)X
576 1976(<netinet/in.h>\),)N
1100(the)X
1223(system)X
1470(interprets)X
1798(the)X
1921(address)X
2187(as)X
2279(``any)X
2474(valid)X
2659(address''.)X
3019(For)X
3155(example,)X
3472(to)X
3559(bind)X
3726(a)X
3787(speci\256c)X
576 2072(port)N
725(number)X
990(to)X
1072(a)X
1128(socket,)X
1373(but)X
1495(leave)X
1685(the)X
1803(local)X
1979(address)X
2240(unspeci\256ed,)X
2645(the)X
2763(following)X
3094(code)X
3266(might)X
3472(be)X
3568(used:)X
864 2216(#include)N
1160(<sys/types.h>)X
864 2312(#include)N
1160(<netinet/in.h>)X
884 2408(...)N
864 2504(struct)N
1062(sockaddr_in)X
1474(sin;)X
884 2600(...)N
864 2696(s)N
915(=)X
980(socket\(AF_INET,)X
1577(SOCK_STREAM,)X
2194(0\);)X
864 2792(sin.sin_family)N
1339(=)X
1404(AF_INET;)X
864 2888(sin.sin_addr.s_addr)N
1507(=)X
1572(htonl\(INADDR_ANY\);)X
864 2984(sin.sin_port)N
1259(=)X
1324(htons\(MYPORT\);)X
864 3080(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&sin,)X
1921(sizeof)X
2133(\(sin\)\);)X
576 3224(Sockets)N
850(with)X
1017(wildcarded)X
1399(local)X
1580(addresses)X
1913(may)X
2076(receive)X
2334(messages)X
2662(directed)X
2947(to)X
3035(the)X
3159(speci\256ed)X
3470(port)X
3625(number,)X
3916(and)X
576 3320(sent)N
733(to)X
823(any)X
967(of)X
1062(the)X
1188(possible)X
1477(addresses)X
1812(assigned)X
2115(to)X
2204(a)X
2267(host.)X
2467(For)X
2605(example,)X
2924(if)X
3000(a)X
3063(host)X
3223(has)X
3357(addresses)X
3692(128.32.0.4)X
576 3416(and)N
713(10.0.0.78,)X
1054(and)X
1191(a)X
1248(socket)X
1474(is)X
1548(bound)X
1769(as)X
1857(above,)X
2090(the)X
2209(process)X
2471(will)X
2616(be)X
2713(able)X
2868(to)X
2951(accept)X
3178(connection)X
3551(requests)X
3836(which)X
576 3512(are)N
696(addressed)X
1034(to)X
1117(128.32.0.4)X
1478(or)X
1566(10.0.0.78.)X
1927(If)X
2002(a)X
2059(server)X
2277(process)X
2539(wished)X
2787(to)X
2870(only)X
3033(allow)X
3231(hosts)X
3415(on)X
3515(a)X
3571(given)X
3769(network)X
576 3608(connect)N
846(to)X
928(it,)X
1012(it)X
1076(would)X
1296(bind)X
1458(the)X
1576(address)X
1837(of)X
1924(the)X
2042(host)X
2195(on)X
2295(the)X
2413(appropriate)X
2799(network.)X
776 3732(In)N
864(a)X
921(similar)X
1164(fashion,)X
1441(a)X
1498(local)X
1675(port)X
1825(may)X
1984(be)X
2081(left)X
2209(unspeci\256ed)X
2596(\(speci\256ed)X
2930(as)X
3019(zero\),)X
3227(in)X
3311(which)X
3529(case)X
3690(the)X
3810(system)X
576 3828(will)N
723(select)X
929(an)X
1028(appropriate)X
1417(port)X
1569(number)X
1837(for)X
1954(it.)X
2061(This)X
2226(shortcut)X
2506(will)X
2652(work)X
2839(both)X
3003(in)X
3087(the)X
3207(Internet)X
3479(and)X
3617(NS)X
3741(domains.)X
576 3924(For)N
707(example,)X
1019(to)X
1101(bind)X
1263(a)X
1319(speci\256c)X
1584(local)X
1760(address)X
2021(to)X
2103(a)X
2159(socket,)X
2404(but)X
2526(to)X
2608(leave)X
2798(the)X
2916(local)X
3092(port)X
3241(number)X
3506(unspeci\256ed:)X
864 4068(hp)N
964(=)X
1029(gethostbyname\(hostname\);)X
864 4164(if)N
933(\(hp)X
1060(==)X
1170(NULL\))X
1431({)X
1064 4260(...)N
864 4356(})N
864 4452(bcopy\(hp->h_addr,)N
1502(\(char)X
1688(*\))X
1775(sin.sin_addr,)X
2204(hp->h_length\);)X
864 4548(sin.sin_port)N
1259(=)X
1324(htons\(0\);)X
864 4644(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&sin,)X
1921(sizeof)X
2133(\(sin\)\);)X
576 4788(The)N
723(system)X
967(selects)X
1203(the)X
1323(local)X
1501(port)X
1652(number)X
1919(based)X
2124(on)X
2226(two)X
2368(criteria.)X
2658(The)X
2805(\256rst)X
2951(is)X
3026(that)X
3168(on)X
3270(4BSD)X
3487(systems,)X
3782(Internet)X
576 4884(ports)N
778(below)X
1016(IPPORT_RESERVED)X
1786(\(1024\))X
2041(\(for)X
2203(the)X
2342(Xerox)X
2584(domain,)X
2885(0)X
2966(through)X
3256(3000\))X
3484(are)X
3624(reserved)X
3938(for)X
576 4980(privileged)N
944(users)X
1152(\(i.e.,)X
1340(the)X
1481(super)X
1698(user\);)X
1925(Internet)X
2219(ports)X
2423(above)X
2659(IPPORT_USERRESERVED)X
3635(\(50000\))X
3933(are)X
576 5076(reserved)N
879(for)X
1003(non-privileged)X
1505(servers.)X
1803(The)X
1958(second)X
2211(is)X
2294(that)X
2444(the)X
2572(port)X
2731(number)X
3006(is)X
3089(not)X
3221(currently)X
3541(bound)X
3771(to)X
3863(some)X
576 5172(other)N
764(socket.)X
1032(In)X
1122(order)X
1316(to)X
1402(\256nd)X
1550(a)X
1610(free)X
1760(Internet)X
2034(port)X
2187(number)X
2456(in)X
2542(the)X
2664(privileged)X
3013(range)X
3216(the)X
2 f
3338(rresvport)X
1 f
3660(library)X
3898(rou-)X
576 5268(tine)N
716(may)X
874(be)X
970(used)X
1137(as)X
1224(follows)X
1484(to)X
1566(return)X
1778(a)X
1834(stream)X
2068(socket)X
2293(in)X
2375(with)X
2537(a)X
2593(privileged)X
2938(port)X
3087(number:)X

29 p
%%Page: 29 29
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-29)X
864 720(int)N
968(lport)X
1139(=)X
1204(IPPORT_RESERVED)X
9 f
1952(-)X
1 f
2016(1;)X
864 816(int)N
968(s;)X
864 912(...)N
864 1008(s)N
915(=)X
980(rresvport\(&lport\);)X
864 1104(if)N
933(\(s)X
1011(<)X
1076(0\))X
1163({)X
1064 1200(if)N
1133(\(errno)X
1350(==)X
1460(EAGAIN\))X
1264 1296(fprintf\(stderr,)N
1719("socket:)X
1999(all)X
2099(ports)X
2279(in)X
2361(use\\n"\);)X
1064 1392(else)N
1264 1488 0.1985(perror\("rresvport:)AN
1853(socket"\);)X
1064 1584(...)N
864 1680(})N
576 1824(The)N
729(restriction)X
1082(on)X
1190(allocating)X
1534(ports)X
1722(was)X
1876(done)X
2061(to)X
2152(allow)X
2359(processes)X
2696(executing)X
3037(in)X
3128(a)X
3193 0.3611(``secure'')AX
3536(environment)X
3970(to)X
576 1920(perform)N
857(authentication)X
1333(based)X
1538(on)X
1640(the)X
1760(originating)X
2133(address)X
2396(and)X
2534(port)X
2685(number.)X
2992(For)X
3125(example,)X
3438(the)X
2 f
3557(rlogin)X
1 f
3752(\(1\))X
3867(com-)X
576 2016(mand)N
779(allows)X
1013(users)X
1203(to)X
1290(log)X
1417(in)X
1504(across)X
1730(a)X
1791(network)X
2079(without)X
2348(being)X
2551(asked)X
2759(for)X
2878(a)X
2939(password,)X
3288(if)X
3363(two)X
3509(conditions)X
3868(hold:)X
576 2112(First,)N
768(the)X
892(name)X
1092(of)X
1185(the)X
1309(system)X
1557(the)X
1681(user)X
1841(is)X
1920(logging)X
2190(in)X
2278(from)X
2460(is)X
2539(in)X
2627(the)X
2751(\256le)X
2 f
2879(/etc/hosts.equiv)X
1 f
3401(on)X
3507(the)X
3631(system)X
3878(he)X
3979(is)X
576 2208(logging)N
843(in)X
928(to)X
1013(\(or)X
1130(the)X
1251(system)X
1496(name)X
1693(and)X
1832(the)X
1953(user)X
2110(name)X
2307(are)X
2429(in)X
2515(the)X
2637(user's)X
2 f
2853(.rhosts)X
1 f
3092(\256le)X
3218(in)X
3304(the)X
3426(user's)X
3642(home)X
3844(direc-)X
576 2304(tory\),)N
784(and)X
932(second,)X
1207(that)X
1359(the)X
1489(user's)X
1713(rlogin)X
1936(process)X
2208(is)X
2292(coming)X
2563(from)X
2750(a)X
2817(privileged)X
3173(port)X
3333(on)X
3444(the)X
3573(machine)X
3876(from)X
576 2400(which)N
794(he)X
892(is)X
967(logging.)X
1273(The)X
1421(port)X
1573(number)X
1841(and)X
1980(network)X
2266(address)X
2530(of)X
2620(the)X
2741(machine)X
3036(from)X
3215(which)X
3434(the)X
3555(user)X
3712(is)X
3788(logging)X
576 2496(in)N
658(can)X
790(be)X
886(determined)X
1267(either)X
1470(by)X
1570(the)X
2 f
1688(from)X
1 f
1859(result)X
2057(of)X
2144(the)X
2 f
2262(accept)X
1 f
2492(call,)X
2648(or)X
2735(from)X
2911(the)X
2 f
3029(getpeername)X
1 f
3464(call.)X
776 2620(In)N
863(certain)X
1102(cases)X
1292(the)X
1410(algorithm)X
1742(used)X
1910(by)X
2011(the)X
2130(system)X
2373(in)X
2456(selecting)X
2762(port)X
2912(numbers)X
3209(is)X
3283(unsuitable)X
3633(for)X
3748(an)X
3845(appli-)X
576 2716(cation.)N
848(This)X
1026(is)X
1115(because)X
1406(associations)X
1829(are)X
1964(created)X
2233(in)X
2331(a)X
2403(two)X
2559(step)X
2723(process.)X
3039(For)X
3185(example,)X
3512(the)X
3645(Internet)X
3930(\256le)X
576 2812(transfer)N
855(protocol,)X
1175(FTP,)X
1365(speci\256es)X
1674(that)X
1827(data)X
1994(connections)X
2410(must)X
2598(always)X
2854(originate)X
3172(from)X
3362(the)X
3494(same)X
3693(local)X
3883(port.)X
576 2908(However,)N
916(duplicate)X
1235(associations)X
1647(are)X
1771(avoided)X
2050(by)X
2155(connecting)X
2532(to)X
2619(different)X
2921(foreign)X
3178(ports.)X
3403(In)X
3495(this)X
3635(situation)X
3934(the)X
576 3004(system)N
831(would)X
1064(disallow)X
1368(binding)X
1645(the)X
1776(same)X
1974(local)X
2163(address)X
2438(and)X
2588(port)X
2751(number)X
3030(to)X
3126(a)X
3196(socket)X
3435(if)X
3518(a)X
3588(previous)X
3898(data)X
576 3100(connection's)N
1013(socket)X
1245(still)X
1391(existed.)X
1685(To)X
1801(override)X
2096(the)X
2221(default)X
2471(port)X
2627(selection)X
2939(algorithm,)X
3297(an)X
3400(option)X
3631(call)X
3774(must)X
3956(be)X
576 3196(performed)N
931(prior)X
1107(to)X
1189(address)X
1450(binding:)X
884 3340(...)N
864 3436(int)N
1064(on)X
1164(=)X
1229(1;)X
884 3532(...)N
864 3628(setsockopt\(s,)N
1300(SOL_SOCKET,)X
1842(SO_REUSEADDR,)X
2504(&on,)X
2686(sizeof\(on\)\);)X
864 3724(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&sin,)X
1921(sizeof)X
2133(\(sin\)\);)X
576 3868(With)N
766(the)X
894(above)X
1116(call,)X
1282(local)X
1468(addresses)X
1806(may)X
1974(be)X
2080(bound)X
2310(which)X
2536(are)X
2665(already)X
2932(in)X
3024(use.)X
3201(This)X
3374(does)X
3552(not)X
3685(violate)X
3934(the)X
576 3964(uniqueness)N
962(requirement)X
1380(as)X
1477(the)X
1605(system)X
1857(still)X
2006(checks)X
2255(at)X
2343(connect)X
2623(time)X
2795(to)X
2887(be)X
2993(sure)X
3157(any)X
3303(other)X
3498(sockets)X
3763(with)X
3934(the)X
576 4060(same)N
773(local)X
961(address)X
1234(and)X
1382(port)X
1543(do)X
1655(not)X
1789(have)X
1973(the)X
2103(same)X
2300(foreign)X
2564(address)X
2837(and)X
2986(port.)X
3188(If)X
3275(the)X
3406(association)X
3795(already)X
576 4156(exists,)N
811(the)X
942(error)X
1132(EADDRINUSE)X
1677(is)X
1763(returned.)X
2104(A)X
2195(related)X
2447(socket)X
2685(option,)X
2942(SO_REUSEPORT,)X
3594(which)X
3823(allows)X
576 4252(completely)N
952(duplicate)X
1266(bindings,)X
1581(is)X
1654(described)X
1982(in)X
2064(the)X
2182(IP)X
2273(multicasting)X
2688(section.)X
3 f
576 4444(5.8.)N
736(Socket)X
983(Options)X
1 f
776 4568(It)N
848(is)X
924(possible)X
1209(to)X
1294(set)X
1406(and)X
1545(get)X
1666(a)X
1725(number)X
1993(of)X
2083(options)X
2341(on)X
2444(sockets)X
2703(via)X
2824(the)X
2 f
2945(setsockopt)X
1 f
3303(and)X
2 f
3443(getsockopt)X
1 f
3810(system)X
576 4664(calls.)N
792(These)X
1013(options)X
1277(include)X
1542(such)X
1718(things)X
1942(as)X
2038(marking)X
2334(a)X
2399(socket)X
2633(for)X
2756(broadcasting,)X
3214(not)X
3344(to)X
3434(route,)X
3647(to)X
3737(linger)X
3952(on)X
576 4760(close,)N
782(etc.)X
937(In)X
1025(addition,)X
1328(there)X
1510(are)X
1630(protocol-speci\256c)X
2190(options)X
2446(for)X
2562(IP)X
2655(and)X
2793(TCP,)X
2981(as)X
3070(described)X
3400(in)X
2 f
3484(ip)X
1 f
3546(\(4\),)X
2 f
3682(tcp)X
1 f
3780(\(4\),)X
3916(and)X
576 4856(in)N
658(the)X
776(section)X
1023(on)X
1123(multicasting)X
1538(below.)X
776 4980(The)N
921(general)X
1178(forms)X
1385(of)X
1472(the)X
1590(calls)X
1757(are:)X
864 5124(setsockopt\(s,)N
1300(level,)X
1496(optname,)X
1812(optval,)X
2052(optlen\);)X
576 5268(and)N
864 5412(getsockopt\(s,)N
1309(level,)X
1505(optname,)X
1821(optval,)X
2061(optlen\);)X
776 5584(The)N
922(parameters)X
1296(to)X
1379(the)X
1499(calls)X
1668(are)X
1789(as)X
1878(follows:)X
2 f
2162(s)X
1 f
2215(is)X
2290(the)X
2410(socket)X
2637(on)X
2739(which)X
2957(the)X
3077(option)X
3303(is)X
3378(to)X
3462(be)X
3560(applied.)X
2 f
3858(Level)X
1 f
576 5680(speci\256es)N
878(the)X
1002(protocol)X
1295(layer)X
1482(on)X
1588(which)X
1810(the)X
1934(option)X
2164(is)X
2243(to)X
2331(be)X
2432(applied;)X
2715(in)X
2802(most)X
2982(cases)X
3177(this)X
3317(is)X
3395(the)X
3518(``socket)X
3802(level'',)X

30 p
%%Page: 30 30
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-30)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
576 672(indicated)N
911(by)X
1032(the)X
1171(symbolic)X
1506(constant)X
1815(SOL_SOCKET,)X
2379(de\256ned)X
2657(in)X
2 f
2761(<sys/socket.h>.)X
1 f
3332(The)X
3499(actual)X
3733(option)X
3979(is)X
576 768(speci\256ed)N
887(in)X
2 f
974(optname)X
1 f
1250(,)X
1295(and)X
1436(is)X
1514(a)X
1575(symbolic)X
1893(constant)X
2185(also)X
2339(de\256ned)X
2600(in)X
2 f
2687(<sys/socket.h>)X
1 f
3176(.)X
2 f
3241(Optval)X
1 f
3484(and)X
2 f
3625(Optlen)X
1 f
3868(point)X
576 864(to)N
659(the)X
778(value)X
973(of)X
1061(the)X
1180(option)X
1405(\(in)X
1515(most)X
1691(cases,)X
1902(whether)X
2182(the)X
2301(option)X
2527(is)X
2602(to)X
2686(be)X
2784(turned)X
3011(on)X
3113(or)X
3202(off\),)X
3365(and)X
3503(the)X
3623(length)X
3845(of)X
3934(the)X
576 960(value)N
773(of)X
863(the)X
984(option,)X
1231(respectively.)X
1682(For)X
2 f
1816(getsockopt)X
1 f
2159(,)X
2 f
2202(optlen)X
1 f
2424(is)X
2499(a)X
2557(value-result)X
2958(parameter,)X
3322(initially)X
3592(set)X
3703(to)X
3787(the)X
3907(size)X
576 1056(of)N
666(the)X
787(storage)X
1042(area)X
1200(pointed)X
1463(to)X
1548(by)X
2 f
1651(optval)X
1 f
(,)S
1895(and)X
2035(modi\256ed)X
2343(upon)X
2527(return)X
2743(to)X
2829(indicate)X
3107(the)X
3229(actual)X
3445(amount)X
3709(of)X
3800(storage)X
576 1152(used.)N
776 1276(An)N
902(example)X
1203(should)X
1445(help)X
1612(clarify)X
1851(things.)X
2115(It)X
2193(is)X
2275(sometimes)X
2646(useful)X
2871(to)X
2962(determine)X
3312(the)X
3439(type)X
3606(\(e.g.,)X
3798(stream,)X
576 1372(datagram,)N
924(etc.\))X
1114(of)X
1210(an)X
1314(existing)X
1595(socket;)X
1850(programs)X
2181(under)X
2 f
2392(inetd)X
1 f
2580(\(described)X
2943(below\))X
3194(may)X
3360(need)X
3540(to)X
3630(perform)X
3917(this)X
576 1468(task.)N
765(This)X
927(can)X
1059(be)X
1155(accomplished)X
1616(as)X
1703(follows)X
1963(via)X
2081(the)X
2199(SO_TYPE)X
2561(socket)X
2786(option)X
3010(and)X
3146(the)X
2 f
3264(getsockopt)X
1 f
3627(call:)X
864 1612(#include)N
1160(<sys/types.h>)X
864 1708(#include)N
1160(<sys/socket.h>)X
864 1900(int)N
968(type,)X
1146(size;)X
864 2092(size)N
1009(=)X
1074(sizeof)X
1286(\(int\);)X
864 2284(if)N
933(\(getsockopt\(s,)X
1405(SOL_SOCKET,)X
1947(SO_TYPE,)X
2329(\(char)X
2515(*\))X
2602(&type,)X
2842(&size\))X
3076(<)X
3141(0\))X
3228({)X
1064 2380(...)N
864 2476(})N
576 2620(After)N
770(the)X
2 f
892(getsockopt)X
1 f
1259(call,)X
2 f
1419(type)X
1 f
1577(will)X
1725(be)X
1825(set)X
1938(to)X
2024(the)X
2146(value)X
2344(of)X
2435(the)X
2557(socket)X
2786(type,)X
2968(as)X
3059(de\256ned)X
3319(in)X
2 f
3405(<sys/socket.h>)X
1 f
3894(.)X
3958(If,)X
576 2716(for)N
726(example,)X
1073(the)X
1226(socket)X
1486(were)X
1698(a)X
1789(datagram)X
2143(socket,)X
2 f
2423(type)X
1 f
2612(would)X
2867(have)X
3074(the)X
3227(value)X
3456(corresponding)X
3970(to)X
576 2812(SOCK_DGRAM.)N
3 f
576 3004(5.9.)N
736(Broadcasting)X
1209(and)X
1357(determining)X
1795(network)X
2100(con\256guration)X
1 f
776 3128(By)N
891(using)X
1086(a)X
1144(datagram)X
1466(socket,)X
1714(it)X
1781(is)X
1857(possible)X
2142(to)X
2227(send)X
2397(broadcast)X
2728(packets)X
2992(on)X
3095(many)X
3296(networks)X
3613(supported)X
3952(by)X
576 3224(the)N
699(system.)X
986(The)X
1136(network)X
1424(itself)X
1609(must)X
1789(support)X
2054(broadcast;)X
2409(the)X
2532(system)X
2779(provides)X
3080(no)X
3185(simulation)X
3547(of)X
3638(broadcast)X
3970(in)X
576 3320(software.)N
918(Broadcast)X
1264(messages)X
1592(can)X
1729(place)X
1924(a)X
1985(high)X
2152(load)X
2315(on)X
2420(a)X
2481(network)X
2769(since)X
2959(they)X
3122(force)X
3313(every)X
3518(host)X
3677(on)X
3783(the)X
3907(net-)X
576 3416(work)N
775(to)X
871(service)X
1133(them.)X
1366(Consequently,)X
1859(the)X
1990(ability)X
2227(to)X
2322(send)X
2502(broadcast)X
2843(packets)X
3117(has)X
3257(been)X
3442(limited)X
3701(to)X
3796(sockets)X
576 3512(which)N
796(are)X
919(explicitly)X
1245(marked)X
1510(as)X
1601(allowing)X
1905(broadcasting.)X
2379(Broadcast)X
2724(is)X
2801(typically)X
3105(used)X
3276(for)X
3394(one)X
3534(of)X
3625(two)X
3769(reasons:)X
576 3608(it)N
641(is)X
715(desired)X
968(to)X
1051(\256nd)X
1196(a)X
1253(resource)X
1547(on)X
1648(a)X
1705(local)X
1882(network)X
2166(without)X
2431(prior)X
2608(knowledge)X
2981(of)X
3068(its)X
3163(address,)X
3444(or)X
3531(important)X
3862(func-)X
576 3704(tions)N
751(such)X
918(as)X
1005(routing)X
1256(require)X
1504(that)X
1644(information)X
2042(be)X
2138(sent)X
2287(to)X
2369(all)X
2469(accessible)X
2815(neighbors.)X
776 3828(Multicasting)N
1200(is)X
1273(an)X
1369(alternative)X
1728(to)X
1810(broadcasting.)X
2280(Setting)X
2526(up)X
2626(IP)X
2718(multicast)X
3032(sockets)X
3289(is)X
3363(described)X
3692(in)X
3775(the)X
3894(next)X
576 3924(section.)N
776 4048(To)N
885(send)X
1052(a)X
1108(broadcast)X
1436(message,)X
1748(a)X
1804(datagram)X
2123(socket)X
2348(should)X
2581(be)X
2677(created:)X
864 4192(s)N
915(=)X
980(socket\(AF_INET,)X
1577(SOCK_DGRAM,)X
2168(0\);)X
576 4336(or)N
864 4480(s)N
915(=)X
980(socket\(AF_NS,)X
1496(SOCK_DGRAM,)X
2087(0\);)X
576 4624(The)N
721(socket)X
946(is)X
1019(marked)X
1280(as)X
1367(allowing)X
1667(broadcasting,)X
864 4768(int)N
1064(on)X
1164(=)X
1229(1;)X
864 4960(setsockopt\(s,)N
1300(SOL_SOCKET,)X
1842(SO_BROADCAST,)X
2508(&on,)X
2690(sizeof)X
2902(\(on\)\);)X
576 5104(and)N
712(at)X
790(least)X
957(a)X
1013(port)X
1162(number)X
1427(should)X
1660(be)X
1756(bound)X
1976(to)X
2058(the)X
2176(socket:)X
864 5248(sin.sin_family)N
1339(=)X
1404(AF_INET;)X
864 5344(sin.sin_addr.s_addr)N
1507(=)X
1572(htonl\(INADDR_ANY\);)X
864 5440(sin.sin_port)N
1259(=)X
1324(htons\(MYPORT\);)X
864 5536(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&sin,)X
1921(sizeof)X
2133(\(sin\)\);)X

31 p
%%Page: 31 31
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-31)X
576 672(or,)N
683(for)X
797(the)X
915(NS)X
1037(domain,)X
864 816(sns.sns_family)N
1357(=)X
1422(AF_NS;)X
864 912(netnum)N
1124(=)X
1189(htonl\(net\);)X
864 1008(sns.sns_addr.x_net)N
1489(=)X
1554(*\(union)X
1823(ns_net)X
2052(*\))X
2139(&netnum;)X
2483(/*)X
2565(insert)X
2763(net)X
2881(number)X
3146(*/)X
864 1104(sns.sns_addr.x_port)N
1520(=)X
1585(htons\(MYPORT\);)X
864 1200(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&sns,)X
1930(sizeof)X
2142(\(sns\)\);)X
576 1344(The)N
722(destination)X
1094(address)X
1356(of)X
1444(the)X
1563(message)X
1856(to)X
1940(be)X
2038(broadcast)X
2368(depends)X
2653(on)X
2755(the)X
2875(network\(s\))X
3245(on)X
3347(which)X
3565(the)X
3685(message)X
3979(is)X
576 1440(to)N
661(be)X
759(broadcast.)X
1129(The)X
1276(Internet)X
1548(domain)X
1810(supports)X
2103(a)X
2161(shorthand)X
2499(notation)X
2783(for)X
2899(broadcast)X
3229(on)X
3331(the)X
3451(local)X
3629(network,)X
3934(the)X
576 1536(address)N
851(INADDR_BROADCAST)X
1721(\(de\256ned)X
2018(in)X
2114(<)X
2 f
2159(netinet/in.h)X
1 f
2521(>.)X
2640(To)X
2763(determine)X
3118(the)X
3250(list)X
3381(of)X
3482(addresses)X
3824(for)X
3952(all)X
576 1632(reachable)N
911(neighbors)X
1253(requires)X
1537(knowledge)X
1914(of)X
2006(the)X
2129(networks)X
2448(to)X
2535(which)X
2756(the)X
2879(host)X
3037(is)X
3115(connected.)X
3506(Since)X
3709(this)X
3849(infor-)X
576 1728(mation)N
827(should)X
1069(be)X
1174(obtained)X
1479(in)X
1570(a)X
1635(host-independent)X
2216(fashion)X
2481(and)X
2626(may)X
2793(be)X
2898(impossible)X
3273(to)X
3364(derive,)X
3614(4.4BSD)X
3898(pro-)X
576 1824(vides)N
773(a)X
837(method)X
1105(of)X
1200(retrieving)X
1540(this)X
1683(information)X
2089(from)X
2273(the)X
2398(system)X
2647(data)X
2808(structures.)X
3187(The)X
3339(SIOCGIFCONF)X
2 f
3890(ioctl)X
1 f
576 1920(call)N
716(returns)X
963(the)X
1085(interface)X
1391(con\256guration)X
1842(of)X
1933(a)X
1993(host)X
2150(in)X
2236(the)X
2358(form)X
2539(of)X
2631(a)X
2692(single)X
2 f
2908(ifconf)X
1 f
3115(structure;)X
3443(this)X
3583(structure)X
3889(con-)X
576 2016(tains)N
752(a)X
813(``data)X
1026(area'')X
1240(which)X
1461(is)X
1539(made)X
1738(up)X
1843(of)X
1935(an)X
2036(array)X
2227(of)X
2319(of)X
2 f
2411(ifreq)X
1 f
2587(structures,)X
2944(one)X
3085(for)X
3204(each)X
3377(network)X
3664(interface)X
3970(to)X
576 2112(which)N
792(the)X
910(host)X
1063(is)X
1136(connected.)X
1522(These)X
1734(structures)X
2066(are)X
2185(de\256ned)X
2441(in)X
2 f
2523(<net/if.h>)X
1 f
2875(as)X
2962(follows:)X
864 2256(struct)N
1062(ifconf)X
1274({)X
1152 2352(int)N
1440(ifc_len;)X
2880(/*)X
2962(size)X
3107(of)X
3194(associated)X
3544(buffer)X
3761(*/)X
1152 2448(union)N
1354({)X
1440 2544(caddr_t)N
1728(ifcu_buf;)X
1440 2640(struct)N
1728(ifreq)X
1900(*ifcu_req;)X
1152 2736(})N
1210(ifc_ifcu;)X
864 2832(};)N
864 3024(#de\256ne)N
1152(ifc_buf)X
1440(ifc_ifcu.ifcu_buf)X
2880(/*)X
2962(buffer)X
3179(address)X
3440(*/)X
864 3120(#de\256ne)N
1152(ifc_req)X
1440(ifc_ifcu.ifcu_req)X
2880(/*)X
2962(array)X
3148(of)X
3235(structures)X
3567(returned)X
3855(*/)X
864 3312(#de\256ne)N
1152(IFNAMSIZ)X
1728(16)X
864 3504(struct)N
1062(ifreq)X
1234({)X
1152 3600(char)N
1440(ifr_name[IFNAMSIZ];)X
2880(/*)X
2962(if)X
3031(name,)X
3245(e.g.)X
3381("en0")X
3583(*/)X
1152 3696(union)N
1354({)X
1440 3792(struct)N
1728(sockaddr)X
2038(ifru_addr;)X
1440 3888(struct)N
1728(sockaddr)X
2038(ifru_dstaddr;)X
1440 3984(struct)N
1728(sockaddr)X
2038(ifru_broadaddr;)X
1440 4080(short)N
1728(ifru_\257ags;)X
1440 4176(caddr_t)N
1728(ifru_data;)X
1152 4272(})N
1210(ifr_ifru;)X
864 4368(};)N
864 4560(#de\256ne)N
1140(ifr_addr)X
1622(ifr_ifru.ifru_addr)X
2396(/*)X
2478(address)X
2739(*/)X
864 4656(#de\256ne)N
1140(ifr_dstaddr)X
1622(ifr_ifru.ifru_dstaddr)X
2396(/*)X
2478(other)X
2663(end)X
2799(of)X
2886(p-to-p)X
3102(link)X
3246(*/)X
864 4752(#de\256ne)N
1140(ifr_broadaddr)X
1622 0.1477(ifr_ifru.ifru_broadaddr)AX
2396(/*)X
2478(broadcast)X
2806(address)X
3067(*/)X
864 4848(#de\256ne)N
1140(ifr_\257ags)X
1622(ifr_ifru.ifru_\257ags)X
2396(/*)X
2478(\257ags)X
2649(*/)X
864 4944(#de\256ne)N
1140(ifr_data)X
1622(ifr_ifru.ifru_data)X
2396(/*)X
2478(for)X
2592(use)X
2719(by)X
2819(interface)X
3121(*/)X
576 5088(The)N
721(actual)X
933(call)X
1069(which)X
1285(obtains)X
1536(the)X
1654(interface)X
1956(con\256guration)X
2403(is)X

32 p
%%Page: 32 32
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-32)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
864 720(struct)N
1062(ifconf)X
1274(ifc;)X
864 816(char)N
1023(buf[BUFSIZ];)X
864 1008(ifc.ifc_len)N
1212(=)X
1277(sizeof)X
1489(\(buf\);)X
864 1104(ifc.ifc_buf)N
1221(=)X
1286(buf;)X
864 1200(if)N
933(\(ioctl\(s,)X
1200(SIOCGIFCONF,)X
1764(\(char)X
1950(*\))X
2037(&ifc\))X
2231(<)X
2296(0\))X
2383({)X
1064 1296(...)N
864 1392(})N
576 1536(After)N
775(this)X
919(call)X
2 f
1064(buf)X
1 f
1195(will)X
1349(contain)X
1615(one)X
2 f
1761(ifreq)X
1 f
1942(structure)X
2253(for)X
2377(each)X
2555(network)X
2848(to)X
2940(which)X
3166(the)X
3294(host)X
3457(is)X
3540(connected,)X
3916(and)X
2 f
576 1632(ifc.ifc_len)N
1 f
914(will)X
1058(have)X
1230(been)X
1402(modi\256ed)X
1706(to)X
1788(re\257ect)X
2009(the)X
2127(number)X
2392(of)X
2479(bytes)X
2668(used)X
2835(by)X
2935(the)X
2 f
3053(ifreq)X
1 f
3224(structures.)X
776 1756(For)N
909(each)X
1079(structure)X
1382(there)X
1565(exists)X
1769(a)X
1827(set)X
1938(of)X
2028(``interface)X
2387(\257ags'')X
2615(which)X
2834(tell)X
2959(whether)X
3241(the)X
3362(network)X
3648(correspond-)X
576 1852(ing)N
706(to)X
796(that)X
944(interface)X
1254(is)X
1335(up)X
1443(or)X
1537(down,)X
1762(point)X
1953(to)X
2042(point)X
2233(or)X
2327(broadcast,)X
2682(etc.)X
2843(The)X
2995(SIOCGIFFLAGS)X
2 f
3586(ioctl)X
1 f
3755(retrieves)X
576 1948(these)N
761(\257ags)X
932(for)X
1046(an)X
1142(interface)X
1444(speci\256ed)X
1749(by)X
1849(an)X
2 f
1945(ifreq)X
1 f
2116(structure)X
2417(as)X
2504(follows:)X
864 2092(struct)N
1062(ifreq)X
1234(*ifr;)X
864 2284(ifr)N
960(=)X
1025(ifc.ifc_req;)X
864 2476(for)N
978(\(n)X
1065(=)X
1130(ifc.ifc_len)X
1478(/)X
1520(sizeof)X
1732(\(struct)X
1957(ifreq\);)X
2178(--n)X
2292(>=)X
2402(0;)X
2484(ifr++\))X
2697({)X
1064 2572(/*)N
1084 2668(*)N
1144(We)X
1276(must)X
1451(be)X
1547(careful)X
1791(that)X
1931(we)X
2045(don't)X
2234(use)X
2361(an)X
2457(interface)X
1084 2764(*)N
1144(devoted)X
1418(to)X
1500(an)X
1596(address)X
1857(family)X
2086(other)X
2271(than)X
2429(those)X
2618(intended;)X
1084 2860(*)N
1144(if)X
1213(we)X
1327(were)X
1504(interested)X
1836(in)X
1918(NS)X
2040(interfaces,)X
2393(the)X
1084 2956(*)N
1144(AF_INET)X
1489(would)X
1709(be)X
1805(AF_NS.)X
1084 3052(*/)N
1064 3148(if)N
1133(\(ifr->ifr_addr.sa_family)X
1923(!=)X
2015(AF_INET\))X
1264 3244(continue;)N
1064 3340(if)N
1133(\(ioctl\(s,)X
1400(SIOCGIFFLAGS,)X
2004(\(char)X
2190(*\))X
2277(ifr\))X
2400(<)X
2465(0\))X
2552({)X
1264 3436(...)N
1064 3532(})N
1064 3628(/*)N
1084 3724(*)N
1144(Skip)X
1310(boring)X
1539(cases.)X
1084 3820(*/)N
1064 3916(if)N
1133(\(\(ifr->ifr_\257ags)X
1622(&)X
1704(IFF_UP\))X
2008(==)X
2118(0)X
2178(||)X
1144 4012(\(ifr->ifr_\257ags)N
1606(&)X
1688(IFF_LOOPBACK\))X
2321(||)X
1144 4108(\(ifr->ifr_\257ags)N
1606(&)X
1688(\(IFF_BROADCAST)X
2374(|)X
2410(IFF_POINTTOPOINT\)\))X
3218(==)X
3328(0\))X
1264 4204(continue;)N
776 4376(Once)N
968(the)X
1088(\257ags)X
1261(have)X
1435(been)X
1610(obtained,)X
1929(the)X
2050(broadcast)X
2381(address)X
2645(must)X
2823(be)X
2922(obtained.)X
3261(In)X
3351(the)X
3472(case)X
3634(of)X
3724(broadcast)X
576 4472(networks)N
896(this)X
1037(is)X
1116(done)X
1298(via)X
1422(the)X
1546(SIOCGIFBRDADDR)X
2 f
2274(ioctl)X
1 f
2416(,)X
2462(while)X
2666(for)X
2786(point-to-point)X
3256(networks)X
3576(the)X
3699(address)X
3965(of)X
576 4568(the)N
694(destination)X
1065(host)X
1218(is)X
1291(obtained)X
1587(with)X
1749(SIOCGIFDSTADDR.)X

33 p
%%Page: 33 33
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-33)X
864 720(struct)N
1062(sockaddr)X
1372(dst;)X
864 912(if)N
933(\(ifr->ifr_\257ags)X
1395(&)X
1477(IFF_POINTTOPOINT\))X
2258({)X
1064 1008(if)N
1133(\(ioctl\(s,)X
1400(SIOCGIFDSTADDR,)X
2129(\(char)X
2315(*\))X
2402(ifr\))X
2525(<)X
2590(0\))X
2677({)X
1264 1104(...)N
1064 1200(})N
1064 1296(bcopy\(\(char)N
1473(*\))X
1560(ifr->ifr_dstaddr,)X
2100(\(char)X
2286(*\))X
2373(&dst,)X
2568(sizeof)X
2780(\(ifr->ifr_dstaddr\)\);)X
864 1392(})N
922(else)X
1067(if)X
1136(\(ifr->ifr_\257ags)X
1598(&)X
1680(IFF_BROADCAST\))X
2366({)X
1064 1488(if)N
1133(\(ioctl\(s,)X
1400(SIOCGIFBRDADDR,)X
2142(\(char)X
2328(*\))X
2415(ifr\))X
2538(<)X
2603(0\))X
2690({)X
1264 1584(...)N
1064 1680(})N
1064 1776(bcopy\(\(char)N
1473(*\))X
1560(ifr->ifr_broadaddr,)X
2190(\(char)X
2376(*\))X
2463(&dst,)X
2658(sizeof)X
2870 0.1845(\(ifr->ifr_broadaddr\)\);)AX
864 1872(})N
776 2044(After)N
979(the)X
1110(appropriate)X
2 f
1509(ioctl)X
1 f
1651('s)X
1742(have)X
1927(obtained)X
2236(the)X
2367(broadcast)X
2708(or)X
2808(destination)X
3192(address)X
3466(\(now)X
3664(in)X
2 f
3760(dst)X
1 f
3853(\),)X
3934(the)X
2 f
576 2140(sendto)N
1 f
805(call)X
941(may)X
1099(be)X
1195(used:)X
1064 2284(sendto\(s,)N
1371(buf,)X
1518(bu\257en,)X
1758(0,)X
1838(\(struct)X
2063(sockaddr)X
2373(*\)&dst,)X
2635(sizeof)X
2847(\(dst\)\);)X
864 2380(})N
576 2524(In)N
671(the)X
797(above)X
1017(loop)X
1187(one)X
2 f
1331(sendto)X
1 f
1568(occurs)X
1806(for)X
1928(every)X
2135(interface)X
2445(to)X
2535(which)X
2759(the)X
2886(host)X
3048(is)X
3130(connected)X
3485(that)X
3634(supports)X
3934(the)X
576 2620(notion)N
802(of)X
891(broadcast)X
1221(or)X
1310(point-to-point)X
1776(addressing.)X
2181(If)X
2257(a)X
2315(process)X
2578(only)X
2742(wished)X
2991(to)X
3074(send)X
3242(broadcast)X
3571(messages)X
3895(on)X
3996(a)X
576 2716(given)N
785(network,)X
1099(code)X
1282(similar)X
1535(to)X
1628(that)X
1779(outlined)X
2072(above)X
2295(would)X
2526(be)X
2633(used,)X
2831(but)X
2964(the)X
3094(loop)X
3268(would)X
3500(need)X
3684(to)X
3778(\256nd)X
3934(the)X
576 2812(correct)N
820(destination)X
1191(address.)X
776 2936(Received)N
1103(broadcast)X
1439(messages)X
1770(contain)X
2034(the)X
2160(senders)X
2429(address)X
2698(and)X
2842(port,)X
3019(as)X
3114(datagram)X
3441(sockets)X
3705(are)X
3832(bound)X
576 3032(before)N
802(a)X
858(message)X
1150(is)X
1223(allowed)X
1497(to)X
1579(go)X
1679(out.)X
3 f
576 3224(5.10.)N
776(IP)X
876(Multicasting)X
1 f
776 3348(IP)N
872(multicasting)X
1292(is)X
1370(the)X
1494(transmission)X
1924(of)X
2017(an)X
2119(IP)X
2216(datagram)X
2541(to)X
2629(a)X
2691("host)X
2883(group",)X
3149(a)X
3211(set)X
3326(of)X
3419(zero)X
3584(or)X
3677(more)X
3868(hosts)X
576 3444(identi\256ed)N
901(by)X
1004(a)X
1063(single)X
1277(IP)X
1371(destination)X
1745(address.)X
2049(A)X
2130(multicast)X
2446(datagram)X
2768(is)X
2844(delivered)X
3166(to)X
3250(all)X
3352(members)X
3668(of)X
3757(its)X
3854(desti-)X
576 3540(nation)N
798(host)X
953(group)X
1162(with)X
1326(the)X
1446(same)X
1633("best-efforts")X
2087(reliability)X
2420(as)X
2509(regular)X
2759(unicast)X
3008(IP)X
3101(datagrams,)X
3473(i.e.,)X
3613(the)X
3733(datagram)X
576 3636(is)N
657(not)X
787(guaranteed)X
1168(to)X
1258(arrive)X
1474(intact)X
1680(at)X
1766(all)X
1873(members)X
2194(of)X
2288(the)X
2413(destination)X
2791(group)X
3005(or)X
3099(in)X
3188(the)X
3313(same)X
3505(order)X
3702(relative)X
3970(to)X
576 3732(other)N
761(datagrams.)X
776 3856(The)N
928(membership)X
1351(of)X
1446(a)X
1510(host)X
1671(group)X
1886(is)X
1967(dynamic;)X
2293(that)X
2441(is,)X
2542(hosts)X
2734(may)X
2900(join)X
3052(and)X
3196(leave)X
3394(groups)X
3640(at)X
3726(any)X
3870(time.)X
576 3952(There)N
787(is)X
863(no)X
966(restriction)X
1314(on)X
1417(the)X
1538(location)X
1819(or)X
1909(number)X
2177(of)X
2267(members)X
2583(in)X
2667(a)X
2725(host)X
2880(group.)X
3129(A)X
3209(host)X
3364(may)X
3524(be)X
3622(a)X
3680(member)X
3965(of)X
576 4048(more)N
761(than)X
919(one)X
1055(group)X
1262(at)X
1340(a)X
1396(time.)X
1598(A)X
1676(host)X
1829(need)X
2001(not)X
2123(be)X
2219(a)X
2275(member)X
2558(of)X
2645(a)X
2701(group)X
2908(to)X
2990(send)X
3157(datagrams)X
3507(to)X
3589(it.)X
776 4172(A)N
854(host)X
1007(group)X
1215(may)X
1374(be)X
1471(permanent)X
1831(or)X
1919(transient.)X
2256(A)X
2335(permanent)X
2695(group)X
2903(has)X
3031(a)X
3088(well-known,)X
3512(administratively)X
576 4268(assigned)N
879(IP)X
977(address.)X
1285(It)X
1361(is)X
1441(the)X
1566(address,)X
1854(not)X
1983(the)X
2108(membership)X
2531(of)X
2625(the)X
2750(group,)X
2984(that)X
3131(is)X
3211(permanent;)X
3599(at)X
3684(any)X
3827(time)X
3996(a)X
576 4364(permanent)N
938(group)X
1148(may)X
1309(have)X
1484(any)X
1623(number)X
1891(of)X
1982(members,)X
2320(even)X
2496(zero.)X
2699(Those)X
2919(IP)X
3014(multicast)X
3331(addresses)X
3663(that)X
3807(are)X
3930(not)X
576 4460(reserved)N
870(for)X
984(permanent)X
1343(groups)X
1581(are)X
1700(available)X
2010(for)X
2124(dynamic)X
2420(assignment)X
2800(to)X
2882(transient)X
3178(groups)X
3416(which)X
3632(exist)X
3803(only)X
3965(as)X
576 4556(long)N
738(as)X
825(they)X
983(have)X
1155(members.)X
776 4680(In)N
869(general,)X
1152(a)X
1214(host)X
1374(cannot)X
1615(assume)X
1878(that)X
2025(datagrams)X
2382(sent)X
2538(to)X
2627(any)X
2770(host)X
2930(group)X
3144(address)X
3412(will)X
3563(reach)X
3765(only)X
3934(the)X
576 4776(intended)N
876(hosts,)X
1084(or)X
1175(that)X
1319(datagrams)X
1673(received)X
1970(as)X
2061(a)X
2121(member)X
2408(of)X
2499(a)X
2559(transient)X
2859(host)X
3015(group)X
3225(are)X
3347(intended)X
3646(for)X
3763(the)X
3884(reci-)X
576 4872(pient.)N
807(Misdelivery)X
1225(must)X
1411(be)X
1518(detected)X
1817(at)X
1906(a)X
1973(level)X
2160(above)X
2383(IP,)X
2505(using)X
2709(higher-level)X
3128(identi\256ers)X
3479(or)X
3578(authentication)X
576 4968(tokens.)N
847(Information)X
1251(transmitted)X
1632(to)X
1715(a)X
1772(host)X
1926(group)X
2134(address)X
2396(should)X
2630(be)X
2727(encrypted)X
3065(or)X
3153(governed)X
3473(by)X
3574(administrative)X
576 5064(routing)N
827(controls)X
1105(if)X
1174(the)X
1292(sender)X
1522(is)X
1595(concerned)X
1946(about)X
2144(unwanted)X
2476(listeners.)X
776 5188(IP)N
886(multicasting)X
1320(is)X
1412(currently)X
1741(supported)X
2097(only)X
2279(on)X
2399(AF_INET)X
2764(sockets)X
3040(of)X
3147(type)X
3325(SOCK_DGRAM)X
3916(and)X
576 5284(SOCK_RAW,)N
1060(and)X
1200(only)X
1366(on)X
1470(subnetworks)X
1899(for)X
2017(which)X
2236(the)X
2357(interface)X
2662(driver)X
2877(has)X
3007(been)X
3182(modi\256ed)X
3489(to)X
3574(support)X
3837(multi-)X
576 5380(casting.)N
776 5504(The)N
921(next)X
1079(subsections)X
1468(describe)X
1756(how)X
1914(to)X
1996(send)X
2163(and)X
2299(receive)X
2552(multicast)X
2865(datagrams.)X

34 p
%%Page: 34 34
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-34)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
3 f
576 672(5.10.1.)N
836(Sending)X
1130(IP)X
1230(Multicast)X
1575(Datagrams)X
1 f
776 796(To)N
919(send)X
1120(a)X
1210(multicast)X
1557(datagram,)X
1930(specify)X
2216(an)X
2346(IP)X
2471(multicast)X
2818(address)X
3113(in)X
3229(the)X
3381(range)X
3615(224.0.0.0)X
3970(to)X
576 892(239.255.255.255)N
1136(as)X
1223(the)X
1341(destination)X
1712(address)X
1973(in)X
2055(a)X
2 f
2111(sendto)X
1 f
2320(\(2\))X
2434(call.)X
776 1016(The)N
925(de\256nitions)X
1287(required)X
1580(for)X
1699(the)X
1822(multicast-related)X
2386(socket)X
2616(options)X
2876(are)X
3000(found)X
3212(in)X
2 f
3299(<netinet/in.h>)X
1 f
3769(.)X
3834(All)X
3961(IP)X
576 1112(addresses)N
904(are)X
1023(passed)X
1257(in)X
1339(network)X
1622(byte-order.)X
776 1236(By)N
889(default,)X
1152(IP)X
1243(multicast)X
1556(datagrams)X
1906(are)X
2025(sent)X
2175(with)X
2338(a)X
2395(time-to-live)X
2794(\(TTL\))X
3016(of)X
3104(1,)X
3185(which)X
3402(prevents)X
3695(them)X
3876(from)X
576 1332(being)N
779(forwarded)X
1135(beyond)X
1396(a)X
1457(single)X
1673(subnetwork.)X
2112(A)X
2195(new)X
2354(socket)X
2584(option)X
2813(allows)X
3046(the)X
3168(TTL)X
3339(for)X
3457(subsequent)X
3837(multi-)X
576 1428(cast)N
721(datagrams)X
1071(to)X
1153(be)X
1249(set)X
1358(to)X
1440(any)X
1576(value)X
1770(from)X
1946(0)X
2006(to)X
2088(255,)X
2248(in)X
2330(order)X
2520(to)X
2602(control)X
2849(the)X
2967(scope)X
3170(of)X
3257(the)X
3375(multicasts:)X
864 1572(u_char)N
1103(ttl;)X
864 1668(setsockopt\(sock,)N
1416(IPPROTO_IP,)X
1900(IP_MULTICAST_TTL,)X
2696(&ttl,)X
2864(sizeof\(ttl\)\);)X
576 1812(Multicast)N
900(datagrams)X
1252(with)X
1416(a)X
1474(TTL)X
1643(of)X
1732(0)X
1794(will)X
1940(not)X
2064(be)X
2162(transmitted)X
2544(on)X
2646(any)X
2784(subnet,)X
3035(but)X
3160(may)X
3321(be)X
3420(delivered)X
3742(locally)X
3983(if)X
576 1908(the)N
702(sending)X
979(host)X
1140(belongs)X
1417(to)X
1507(the)X
1633(destination)X
2012(group)X
2227(and)X
2371(if)X
2448(multicast)X
2769(loopback)X
3091(has)X
3225(not)X
3354(been)X
3533(disabled)X
3827(on)X
3934(the)X
576 2004(sending)N
845(socket)X
1070(\(see)X
1220(below\).)X
1503(Multicast)X
1826(datagrams)X
2177(with)X
2340(TTL)X
2508(greater)X
2753(than)X
2912(one)X
3049(may)X
3208(be)X
3305(delivered)X
3625(to)X
3708(more)X
3894(than)X
576 2100(one)N
714(subnet)X
945(if)X
1016(there)X
1199(are)X
1320(one)X
1458(or)X
1547(more)X
1734(multicast)X
2049(routers)X
2294(attached)X
2584(to)X
2668(the)X
2788(\256rst-hop)X
3081(subnet.)X
3352(To)X
3463(provide)X
3729(meaning-)X
576 2196(ful)N
692(scope)X
902(control,)X
1176(the)X
1301(multicast)X
1621(routers)X
1871(support)X
2138(the)X
2264(notion)X
2496(of)X
2591(TTL)X
2766("thresholds",)X
3209(which)X
3433(prevent)X
3702(datagrams)X
576 2292(with)N
739(less)X
880(than)X
1039(a)X
1096(certain)X
1336(TTL)X
1504(from)X
1681(traversing)X
2023(certain)X
2263(subnets.)X
2564(The)X
2710(thresholds)X
3060(enforce)X
3323(the)X
3442(following)X
3773(conven-)X
576 2388(tion:)N
10 f
1564 2452(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)N
1 f
1564 2548(Scope)N
2686(Initial)X
2897(TTL)X
10 f
1564 2556(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)N
1564 2572(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)N
1 f
1564 2660(restricted)N
1883(to)X
1965(the)X
2083(same)X
2268(host)X
2885(0)X
1564 2756(restricted)N
1883(to)X
1965(the)X
2083(same)X
2268(subnet)X
2885(1)X
1564 2852(restricted)N
1883(to)X
1965(the)X
2083(same)X
2268(site)X
2845(32)X
1564 2948(restricted)N
1883(to)X
1965(the)X
2083(same)X
2268(region)X
2845(64)X
1564 3044(restricted)N
1883(to)X
1965(the)X
2083(same)X
2268(continent)X
2805(128)X
1564 3140(unrestricted)N
2805(255)X
10 f
1564 3156(iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii)N
2626(c)X
3092(c)Y
3012(c)Y
2932(c)Y
2852(c)Y
2772(c)Y
2692(c)Y
2612(c)Y
2532(c)Y
1 f
576 3300("Sites")N
821(and)X
961("regions")X
1287(are)X
1410(not)X
1537(strictly)X
1784(de\256ned,)X
2065(and)X
2206(sites)X
2373(may)X
2536(be)X
2637(further)X
2881(subdivided)X
3257(into)X
3406(smaller)X
3667(administra-)X
576 3396(tive)N
716(units,)X
911(as)X
998(a)X
1054(local)X
1230(matter.)X
776 3520(An)N
895(application)X
1272(may)X
1431(choose)X
1675(an)X
1772(initial)X
1979(TTL)X
2147(other)X
2333(than)X
2492(the)X
2611(ones)X
2779(listed)X
2974(above.)X
3228(For)X
3361(example,)X
3675(an)X
3773(applica-)X
576 3616(tion)N
727(might)X
940(perform)X
1226(an)X
1329("expanding-ring)X
1879(search")X
2145(for)X
2266(a)X
2329(network)X
2618(resource)X
2917(by)X
3023(sending)X
3298(a)X
3360(multicast)X
3679(query,)X
3908(\256rst)X
576 3712(with)N
745(a)X
808(TTL)X
982(of)X
1077(0,)X
1165(and)X
1309(then)X
1475(with)X
1645(larger)X
1861(and)X
2005(larger)X
2221(TTLs,)X
2447(until)X
2621(a)X
2685(reply)X
2878(is)X
2959(received,)X
3280(perhaps)X
3558(using)X
3759(the)X
3885(TTL)X
576 3808(sequence)N
891(0,)X
971(1,)X
1051(2,)X
1131(4,)X
1211(8,)X
1291(16,)X
1411(32.)X
776 3932(The)N
941(multicast)X
1274(router)X
2 f
1506(mrouted)X
1 f
1773(\(8\),)X
1927(refuses)X
2195(to)X
2297(forward)X
2592(any)X
2748(multicast)X
3081(datagram)X
3421(with)X
3604(a)X
3681(destination)X
576 4028(address)N
847(between)X
1145(224.0.0.0)X
1475(and)X
1621(224.0.0.255,)X
2051(inclusive,)X
2390(regardless)X
2746(of)X
2843(its)X
2948(TTL.)X
3165(This)X
3337(range)X
3546(of)X
3642(addresses)X
3979(is)X
576 4124(reserved)N
871(for)X
987(the)X
1107(use)X
1236(of)X
1325(routing)X
1579(protocols)X
1900(and)X
2039(other)X
2227(low-level)X
2553(topology)X
2860(discovery)X
3195(or)X
3285(maintenance)X
3714(protocols,)X
576 4220(such)N
743(as)X
830(gateway)X
1118(discovery)X
1450(and)X
1586(group)X
1793(membership)X
2209(reporting.)X
776 4344(The)N
923(address)X
1186(224.0.0.0)X
1508(is)X
1583(guaranteed)X
1958(not)X
2082(to)X
2166(be)X
2264(assigned)X
2562(to)X
2646(any)X
2784(group,)X
3013(and)X
3151(224.0.0.1)X
3474(is)X
3550(assigned)X
3849(to)X
3934(the)X
576 4440(permanent)N
944(group)X
1160(of)X
1256(all)X
1365(IP)X
1465(hosts)X
1658(\(including)X
2016(gateways\).)X
2411(This)X
2582(is)X
2664(used)X
2840(to)X
2931(address)X
3201(all)X
3310(multicast)X
3632(hosts)X
3825(on)X
3934(the)X
576 4536(directly)N
850(connected)X
1205(network.)X
1537(There)X
1754(is)X
1836(no)X
1945(multicast)X
2267(address)X
2537(\(or)X
2660(any)X
2805(other)X
2999(IP)X
3099(address\))X
3396(for)X
3520(all)X
3630(hosts)X
3824(on)X
3934(the)X
576 4632(total)N
757(Internet.)X
1086(The)X
1250(addresses)X
1597(of)X
1702(other)X
1905(well-known,)X
2346(permanent)X
2723(groups)X
2979(are)X
3116(published)X
3465(in)X
3565(the)X
3701("Assigned)X
576 4728(Numbers")N
923(RFC,)X
1113(which)X
1329(is)X
1402(available)X
1712(from)X
1888(the)X
2006(InterNIC.)X
776 4852(Each)N
963(multicast)X
1282(transmission)X
1712(is)X
1791(sent)X
1946(from)X
2128(a)X
2191(single)X
2409(network)X
2699(interface,)X
3028(even)X
3207(if)X
3283(the)X
3408(host)X
3568(has)X
3702(more)X
3894(than)X
576 4948(one)N
719(multicast-capable)X
1312(interface.)X
1661(\(If)X
1769(the)X
1894(host)X
2054(is)X
2134(also)X
2290(serving)X
2553(as)X
2646(a)X
2708(multicast)X
3027(router,)X
3265(a)X
3327(multicast)X
3646(may)X
3810(be)X
2 f
3912(for-)X
576 5044(warded)N
1 f
838(to)X
922(interfaces)X
1257(other)X
1445(than)X
1606(originating)X
1980(interface,)X
2305(provided)X
2613(that)X
2756(the)X
2877(TTL)X
3047(is)X
3123(greater)X
3370(than)X
3531(1.\))X
3661(The)X
3809(default)X
576 5140(interface)N
887(to)X
978(be)X
1083(used)X
1259(for)X
1382(multicasting)X
1806(is)X
1888(the)X
2015(primary)X
2298(network)X
2590(interface)X
2901(on)X
3010(the)X
3137(system.)X
3428(A)X
3514(socket)X
3747(option)X
3979(is)X
576 5236(available)N
886(to)X
968(override)X
1256(the)X
1374(default)X
1617(for)X
1731(subsequent)X
2107(transmissions)X
2562(from)X
2738(a)X
2794(given)X
2992(socket:)X
864 5380(struct)N
1062(in_addr)X
1327(addr;)X
864 5476(setsockopt\(sock,)N
1416(IPPROTO_IP,)X
1900(IP_MULTICAST_IF,)X
2620(&addr,)X
2865(sizeof\(addr\)\);)X
576 5620(where)N
795("addr")X
1026(is)X
1101(the)X
1221(local)X
1399(IP)X
1492(address)X
1755(of)X
1844(the)X
1964(desired)X
2218(outgoing)X
2525(interface.)X
2870(An)X
2991(address)X
3255(of)X
3345(INADDR_ANY)X
3894(may)X
576 5716(be)N
684(used)X
863(to)X
957(revert)X
1177(to)X
1271(the)X
1401(default)X
1656(interface.)X
2010(The)X
2167(local)X
2355(IP)X
2458(address)X
2730(of)X
2828(an)X
2935(interface)X
3248(can)X
3391(be)X
3498(obtained)X
3805(via)X
3934(the)X

35 p
%%Page: 35 35
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-35)X
576 672(SIOCGIFCONF)N
1125(ioctl.)X
1332(To)X
1446(determine)X
1792(if)X
1866(an)X
1968(interface)X
2276(supports)X
2573(multicasting,)X
3014(fetch)X
3201(the)X
3325(interface)X
3633(\257ags)X
3810(via)X
3934(the)X
576 768(SIOCGIFFLAGS)N
1165(ioctl)X
1332(and)X
1473(see)X
1601(if)X
1675(the)X
1798(IFF_MULTICAST)X
2436(\257ag)X
2580(is)X
2657(set.)X
2810(\(Normal)X
3106(applications)X
3517(should)X
3754(not)X
3880(need)X
576 864(to)N
662(use)X
793(this)X
932(option;)X
1182(it)X
1250(is)X
1328(intended)X
1629(primarily)X
1952(for)X
2071(multicast)X
2389(routers)X
2637(and)X
2778(other)X
2968(system)X
3215(services)X
3499(speci\256cally)X
3889(con-)X
576 960(cerned)N
815(with)X
981(internet)X
1250(topology.\))X
1625(The)X
1774(SIOCGIFCONF)X
2321(and)X
2460(SIOCGIFFLAGS)X
3047(ioctls)X
3243(are)X
3365(described)X
3696(in)X
3781(the)X
3902(pre-)X
576 1056(vious)N
769(section.)X
776 1180(If)N
856(a)X
918(multicast)X
1237(datagram)X
1562(is)X
1641(sent)X
1796(to)X
1884(a)X
1946(group)X
2159(to)X
2247(which)X
2469(the)X
2593(sending)X
2868(host)X
3027(itself)X
3213(belongs)X
3489(\(on)X
3623(the)X
3748(outgoing)X
576 1276(interface\),)N
932(a)X
995(copy)X
1178(of)X
1272(the)X
1397(datagram)X
1723(is,)X
1823(by)X
1930(default,)X
2200(looped)X
2445(back)X
2624(by)X
2730(the)X
2854(IP)X
2951(layer)X
3138(for)X
3258(local)X
3440(delivery.)X
3769(Another)X
576 1372(socket)N
801(option)X
1025(gives)X
1214(the)X
1332(sender)X
1562(explicit)X
1822(control)X
2069(over)X
2232(whether)X
2511(or)X
2598(not)X
2720(subsequent)X
3096(datagrams)X
3446(are)X
3565(looped)X
3803(back:)X
864 1516(u_char)N
1103(loop;)X
864 1612(setsockopt\(sock,)N
1416(IPPROTO_IP,)X
1900(IP_MULTICAST_LOOP,)X
2758(&loop,)X
3002(sizeof\(loop\)\);)X
576 1756(where)N
2 f
798(loop)X
1 f
965(is)X
1043(set)X
1157(to)X
1244(0)X
1310(to)X
1398(disable)X
1651(loopback,)X
1991(and)X
2133(set)X
2248(to)X
2336(1)X
2402(to)X
2490(enable)X
2726(loopback.)X
3086(This)X
3254(option)X
3484(improves)X
3808(perfor-)X
576 1852(mance)N
809(for)X
925(applications)X
1334(that)X
1476(may)X
1636(have)X
1810(no)X
1912(more)X
2099(than)X
2259(one)X
2397(instance)X
2682(on)X
2784(a)X
2842(single)X
3055(host)X
3210(\(such)X
3406(as)X
3495(a)X
3553(router)X
3767(demon\),)X
576 1948(by)N
677(eliminating)X
1062(the)X
1181(overhead)X
1497(of)X
1585(receiving)X
1905(their)X
2073(own)X
2232(transmissions.)X
2728(It)X
2798(should)X
3032(generally)X
3352(not)X
3476(be)X
3574(used)X
3743(by)X
3845(appli-)X
576 2044(cations)N
828(for)X
947(which)X
1168(there)X
1354(may)X
1517(be)X
1618(more)X
1808(than)X
1971(one)X
2112(instance)X
2400(on)X
2505(a)X
2566(single)X
2782(host)X
2940(\(such)X
3138(as)X
3229(a)X
3289(conferencing)X
3733(program\))X
576 2140(or)N
663(for)X
777(which)X
993(the)X
1111(sender)X
1341(does)X
1508(not)X
1630(belong)X
1868(to)X
1950(the)X
2068(destination)X
2439(group)X
2646(\(such)X
2840(as)X
2927(a)X
2983(time)X
3145(querying)X
3450(program\).)X
776 2264(A)N
855(multicast)X
1169(datagram)X
1489(sent)X
1639(with)X
1802(an)X
1899(initial)X
2106(TTL)X
2275(greater)X
2521(than)X
2681(1)X
2743(may)X
2903(be)X
3001(delivered)X
3322(to)X
3406(the)X
3526(sending)X
3797(host)X
3952(on)X
576 2360(a)N
642(different)X
949(interface)X
1261(from)X
1447(that)X
1597(on)X
1707(which)X
1933(it)X
2007(was)X
2162(sent,)X
2341(if)X
2420(the)X
2548(host)X
2711(belongs)X
2989(to)X
3080(the)X
3207(destination)X
3587(group)X
3803(on)X
3912(that)X
576 2456(other)N
761(interface.)X
1103(The)X
1248(loopback)X
1562(control)X
1809(option)X
2033(has)X
2160(no)X
2260(effect)X
2464(on)X
2564(such)X
2731(delivery.)X
3 f
576 2648(5.10.2.)N
836(Receiving)X
1190(IP)X
1290(Multicast)X
1635(Datagrams)X
1 f
776 2772(Before)N
1016(a)X
1073(host)X
1227(can)X
1360(receive)X
1614(IP)X
1706(multicast)X
2020(datagrams,)X
2391(it)X
2456(must)X
2632(become)X
2903(a)X
2960(member)X
3244(of)X
3332(one)X
3469(or)X
3557(more)X
3744(IP)X
3837(multi-)X
576 2868(cast)N
721(groups.)X
999(A)X
1077(process)X
1338(can)X
1470(ask)X
1597(the)X
1715(host)X
1868(to)X
1950(join)X
2094(a)X
2150(multicast)X
2463(group)X
2670(by)X
2770(using)X
2963(the)X
3081(following)X
3412(socket)X
3637(option:)X
864 3012(struct)N
1062(ip_mreq)X
1349(mreq;)X
864 3108(setsockopt\(sock,)N
1416(IPPROTO_IP,)X
1900(IP_ADD_MEMBERSHIP,)X
2784(&mreq,)X
3051(sizeof\(mreq\)\))X
576 3252(where)N
793("mreq")X
1044(is)X
1117(the)X
1235(following)X
1566(structure:)X
864 3396(struct)N
1062(ip_mreq)X
1349({)X
944 3492(struct)N
1142(in_addr)X
1407(imr_multiaddr;)X
1911(/*)X
2 f
1993(multicast)X
2306(group)X
2517(to)X
2599(join)X
1 f
2743(*/)X
944 3588(struct)N
1142(in_addr)X
1407(imr_interface;)X
1882(/*)X
2 f
1964(interface)X
2269(to)X
2351(join)X
2495(on)X
1 f
2595(*/)X
864 3684(})N
576 3828(Every)N
793(membership)X
1214(is)X
1292(associated)X
1647(with)X
1814(a)X
1875(single)X
2091(interface,)X
2418(and)X
2559(it)X
2628(is)X
2707(possible)X
2995(to)X
3083(join)X
3233(the)X
3357(same)X
3548(group)X
3761(on)X
3867(more)X
576 3924(than)N
737(one)X
876(interface.)X
1221("imr_interface")X
1743(should)X
1979(be)X
2078(INADDR_ANY)X
2627(to)X
2712(choose)X
2958(the)X
3079(default)X
3325(multicast)X
3641(interface,)X
3965(or)X
576 4020(one)N
752(of)X
879(the)X
1037(host's)X
1288(local)X
1505(addresses)X
1874(to)X
1997(choose)X
2281(a)X
2378(particular)X
2747(\(multicast-capable\))X
3428(interface.)X
3811(Up)X
3970(to)X
576 4116(IP_MAX_MEMBERSHIPS)N
1497(\(currently)X
1834(20\))X
1961(memberships)X
2408(may)X
2566(be)X
2662(added)X
2874(on)X
2974(a)X
3030(single)X
3241(socket.)X
776 4240(To)N
885(drop)X
1052(a)X
1108(membership,)X
1544(use:)X
864 4384(struct)N
1062(ip_mreq)X
1349(mreq;)X
864 4480(setsockopt\(sock,)N
1416(IPPROTO_IP,)X
1900(IP_DROP_MEMBERSHIP,)X
2823(&mreq,)X
3090(sizeof\(mreq\)\);)X
576 4624(where)N
795("mreq")X
1048(contains)X
1338(the)X
1459(same)X
1647(values)X
1875(as)X
1965(used)X
2135(to)X
2220(add)X
2359(the)X
2480(membership.)X
2939(The)X
3087(memberships)X
3537(associated)X
3890(with)X
576 4720(a)N
637(socket)X
867(are)X
991(also)X
1145(dropped)X
1433(when)X
1632(the)X
1755(socket)X
1985(is)X
2063(closed)X
2293(or)X
2385(the)X
2508(process)X
2774(holding)X
3043(the)X
3165(socket)X
3394(is)X
3471(killed.)X
3717(However,)X
576 4816(more)N
762(than)X
921(one)X
1058(socket)X
1284(may)X
1443(claim)X
1642(a)X
1699(membership)X
2117(in)X
2201(a)X
2259(particular)X
2589(group,)X
2818(and)X
2956(the)X
3076(host)X
3231(will)X
3377(remain)X
3622(a)X
3680(member)X
3965(of)X
576 4912(that)N
716(group)X
923(until)X
1089(the)X
1207(last)X
1338(claim)X
1536(is)X
1609(dropped.)X
776 5036(The)N
943(memberships)X
1412(associated)X
1784(with)X
1968(a)X
2046(socket)X
2293(do)X
2415(not)X
2559(necessarily)X
2958(determine)X
3321(which)X
3560(datagrams)X
3933(are)X
576 5132(received)N
875(on)X
981(that)X
1127(socket.)X
1397(Incoming)X
1729(multicast)X
2047(packets)X
2313(are)X
2437(accepted)X
2744(by)X
2849(the)X
2972(kernel)X
3198(IP)X
3294(layer)X
3480(if)X
3554(any)X
3695(socket)X
3925(has)X
576 5228(claimed)N
852(a)X
910(membership)X
1328(in)X
1412(the)X
1532(destination)X
1905(group)X
2114(of)X
2203(the)X
2323(datagram;)X
2666(however,)X
2985(delivery)X
3270(of)X
3359(a)X
3417(multicast)X
3733(datagram)X
576 5324(to)N
659(a)X
716(particular)X
1045(socket)X
1270(is)X
1343(based)X
1546(on)X
1646(the)X
1764(destination)X
2135(port)X
2284(\(or)X
2398(protocol)X
2685(type,)X
2863(for)X
2977(raw)X
3118(sockets\),)X
3421(just)X
3556(as)X
3643(with)X
3805(unicast)X
576 5420(datagrams.)N
946(To)X
1055(receive)X
1309(multicast)X
1623(datagrams)X
1974(sent)X
2124(to)X
2207(a)X
2264(particular)X
2593(port,)X
2763(it)X
2828(is)X
2902(necessary)X
3236(to)X
3319(bind)X
3482(to)X
3565(that)X
3706(local)X
3883(port,)X
576 5516(leaving)N
835(the)X
956(local)X
1135(address)X
1399(unspeci\256ed)X
1787(\(i.e.,)X
1955(INADDR_ANY\).)X
2571(To)X
2683(receive)X
2939(multicast)X
3255(datagrams)X
3608(sent)X
3760(to)X
3844(a)X
3902(par-)X
576 5612(ticular)N
801(group)X
1008(and)X
1144(port,)X
1313(bind)X
1476(to)X
1559(the)X
1678(local)X
1855(port,)X
2025(with)X
2188(the)X
2307(local)X
2484(address)X
2746(set)X
2856(to)X
2939(the)X
3058(multicast)X
3372(group)X
3580(address.)X
3862(Once)X
576 5708(bound)N
796(to)X
878(a)X
934(multicast)X
1247(address,)X
1528(the)X
1646(socket)X
1871(cannot)X
2105(be)X
2201(used)X
2368(for)X
2482(sending)X
2751(data.)X

36 p
%%Page: 36 36
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-36)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
776 672(More)N
970(than)X
1128(one)X
1264(process)X
1525(may)X
1684(bind)X
1847(to)X
1930(the)X
2049(same)X
2235(SOCK_DGRAM)X
2807(UDP)X
2988(port)X
3138(or)X
3226(the)X
3345(same)X
3531(multicast)X
3845(group)X
576 768(and)N
712(port)X
861(if)X
930(the)X
2 f
1048(bind)X
1 f
1223(call)X
1359(is)X
1432(preceded)X
1743(by:)X
864 912(int)N
968(on)X
1068(=)X
1133(1;)X
864 1008(setsockopt\(sock,)N
1416(SOL_SOCKET,)X
1958(SO_REUSEPORT,)X
2597(&on,)X
2779(sizeof\(on\)\);)X
576 1152(All)N
716(processes)X
1062(sharing)X
1336(the)X
1472(port)X
1639(must)X
1832(enable)X
2080(this)X
2233(option.)X
2515(Every)X
2746(incoming)X
3087(multicast)X
3419(or)X
3525(broadcast)X
3872(UDP)X
576 1248(datagram)N
900(destined)X
1192(to)X
1279(the)X
1402(shared)X
1636(port)X
1789(is)X
1866(delivered)X
2189(to)X
2275(all)X
2379(sockets)X
2639(bound)X
2863(to)X
2949(the)X
3071(port.)X
3244(For)X
3379(backwards)X
3747(compati-)X
576 1344(bility)N
764(reasons,)X
1045(this)X
1180(does)X
1347(not)X
1469(apply)X
1668(to)X
1751(incoming)X
2074(unicast)X
2322(datagrams.)X
2713(Unicast)X
2979(datagrams)X
3330(are)X
3450(never)X
3650(delivered)X
3970(to)X
576 1440(more)N
761(than)X
919(one)X
1055(socket,)X
1300(regardless)X
1646(of)X
1733(how)X
1891(many)X
2089(sockets)X
2345(are)X
2464(bound)X
2684(to)X
2766(the)X
2884(datagram's)X
3261(destination)X
3632(port.)X
776 1564(A)N
868(\256nal)X
1044(multicast-related)X
1617(extension)X
1958(is)X
2045(independent)X
2471(of)X
2572(IP:)X
2719(two)X
2874(new)X
3043(ioctls,)X
3271(SIOCADDMULTI)X
3916(and)X
576 1660(SIOCDELMULTI,)N
1210(are)X
1331(available)X
1643(to)X
1727(add)X
1865(or)X
1954(delete)X
2168(link-level)X
2497(\(e.g.,)X
2682(Ethernet\))X
3003(multicast)X
3318(addresses)X
3648(accepted)X
3952(by)X
576 1756(a)N
646(particular)X
988(interface.)X
1344(The)X
1503(address)X
1778(to)X
1874(be)X
1984(added)X
2210(or)X
2311(deleted)X
2577(is)X
2664(passed)X
2912(as)X
3013(a)X
3083(sockaddr)X
3407(structure)X
3722(of)X
3823(family)X
576 1852(AF_UNSPEC,)N
1064(within)X
1288(the)X
1406(standard)X
1698(ifreq)X
1870(structure.)X
776 1976(These)N
990(ioctls)X
1185(are)X
1306(for)X
1422(the)X
1542(use)X
1671(of)X
1760(protocols)X
2081(other)X
2269(than)X
2430(IP,)X
2544(and)X
2683(require)X
2934(superuser)X
3265(privileges.)X
3644(A)X
3725(link-level)X
576 2072(multicast)N
893(address)X
1158(added)X
1374(via)X
1496(SIOCADDMULTI)X
2130(is)X
2207(not)X
2333(automatically)X
2793(deleted)X
3048(when)X
3245(the)X
3366(socket)X
3594(used)X
3764(to)X
3849(add)X
3988(it)X
576 2168(goes)N
747(away;)X
963(it)X
1031(must)X
1210(be)X
1310(explicitly)X
1636(deleted.)X
1932(It)X
2005(is)X
2082(inadvisable)X
2471(to)X
2557(delete)X
2773(a)X
2833(link-level)X
3164(address)X
3429(that)X
3574(may)X
3737(be)X
3838(in)X
3925(use)X
576 2264(by)N
676(IP.)X
3 f
576 2456(5.10.3.)N
836(Sample)X
1109(Multicast)X
1454(Program)X
1 f
776 2580(The)N
921(following)X
1253(program)X
1546(sends)X
1745(or)X
1833(receives)X
2118(multicast)X
2432(packets.)X
2734(If)X
2809(invoked)X
3088(with)X
3251(one)X
3388(argument,)X
3732(it)X
3797(sends)X
3996(a)X
576 2676(packet)N
810(containing)X
1172(the)X
1294(current)X
1546(time)X
1712(to)X
1798(an)X
1898(arbitrarily-chosen)X
2492(multicast)X
2808(group)X
3018(and)X
3157(UDP)X
3340(port.)X
3532(If)X
3609(invoked)X
3890(with)X
576 2772(no)N
677(arguments,)X
1052(it)X
1117(receives)X
1403(and)X
1541(prints)X
1745(these)X
1932(packets.)X
2235(Start)X
2408(it)X
2474(as)X
2563(a)X
2621(sender)X
2853(on)X
2955(just)X
3092(one)X
3230(host)X
3385(and)X
3523(as)X
3612(a)X
3670(receiver)X
3952(on)X
576 2868(all)N
676(the)X
794(other)X
979(hosts.)X
864 3012(#include)N
1160(<sys/types.h>)X
864 3108(#include)N
1160(<sys/socket.h>)X
864 3204(#include)N
1160(<netinet/in.h>)X
864 3300(#include)N
1160(<arpa/inet.h>)X
864 3396(#include)N
1160(<time.h>)X
864 3492(#include)N
1160(<stdio.h>)X
864 3684(#de\256ne)N
1120(EXAMPLE_PORT)X
1822(60123)X
864 3780(#de\256ne)N
1120(EXAMPLE_GROUP)X
1869("224.0.0.250")X
864 3972(main\(argc\))N
944 4068(int)N
1048(argc;)X
864 4164({)N
944 4260(struct)N
1142(sockaddr_in)X
1554(addr;)X
944 4356(int)N
1048(addrlen,)X
1329(fd,)X
1436(cnt;)X
944 4452(struct)N
1142(ip_mreq)X
1429(mreq;)X
944 4548(char)N
1103(message[50];)X
944 4740(fd)N
1031(=)X
1096(socket\(AF_INET,)X
1693(SOCK_DGRAM,)X
2284(0\);)X
944 4836(if)N
1013(\(fd)X
1127(<)X
1192(0\))X
1279({)X
1024 4932 0.2188(perror\("socket"\);)AN
1024 5028(exit\(1\);)N
944 5124(})N

37 p
%%Page: 37 37
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-37)X
944 720(bzero\(&addr,)N
1395(sizeof\(addr\)\);)X
944 816(addr.sin_family)N
1469(=)X
1534(AF_INET;)X
944 912(addr.sin_addr.s_addr)N
1637(=)X
1702(htonl\(INADDR_ANY\);)X
944 1008(addr.sin_port)N
1389(=)X
1454(htons\(EXAMPLE_PORT\);)X
944 1104(addrlen)N
1205(=)X
1270(sizeof\(addr\);)X
944 1200(if)N
1013(\(argc)X
1199(>)X
1264(1\))X
1351({)X
1489(/*)X
1571(Send)X
1751(*/)X
1024 1296(addr.sin_addr.s_addr)N
1717(=)X
1782(inet_addr\(EXAMPLE_GROUP\);)X
1024 1392(while)N
1222(\(1\))X
1336({)X
1104 1488(time_t)N
1328(t)X
1370(=)X
1435(time\(0\);)X
1104 1584(sprintf\(message,)N
1652("time)X
1847(is)X
1920(%-24.24s",)X
2298(ctime\(&t\)\);)X
1104 1680(cnt)N
1222(=)X
1287(sendto\(fd,)X
1630(message,)X
1942(sizeof\(message\),)X
2500(0,)X
1264 1776(\(struct)N
1489(sockaddr)X
1799(*\)&addr,)X
2111(addrlen\);)X
1104 1872(if)N
1173(\(cnt)X
1318(<)X
1383(0\))X
1470({)X
1184 1968(perror\("sendto"\);)N
1184 2064(exit\(1\);)N
1104 2160(})N
1104 2256(sleep\(5\);)N
1024 2352(})N
944 2448(})N
1002(else)X
1147({)X
1425(/*)X
1507(Receive)X
1786(*/)X
1024 2544(if)N
1093(\(bind\(fd,)X
1396(\(struct)X
1621(sockaddr)X
1931(*\)&addr,)X
2243(sizeof\(addr\)\))X
2679(<)X
2744(0\))X
2831({)X
1104 2640(perror\("bind"\);)N
1104 2736(exit\(1\);)N
1024 2832(})N
1024 3024(mreq.imr_multiaddr.s_addr)N
1925(=)X
1990(inet_addr\(EXAMPLE_GROUP\);)X
1024 3120 0.1458(mreq.imr_interface.s_addr)AN
1896(=)X
1961(htonl\(INADDR_ANY\);)X
1024 3216(if)N
1093(\(setsockopt\(fd,)X
1592(IPPROTO_IP,)X
2076(IP_ADD_MEMBERSHIP,)X
1264 3312(&mreq,)N
1531(sizeof\(mreq\)\))X
1989(<)X
2054(0\))X
2141({)X
1104 3408(perror\("setsockopt)N
1719(mreq"\);)X
1104 3504(exit\(1\);)N
1024 3600(})N
1024 3792(while)N
1222(\(1\))X
1336({)X
1104 3888(cnt)N
1222(=)X
1287(recvfrom\(fd,)X
1716(message,)X
2028(sizeof\(message\),)X
2586(0,)X
1424 3984(\(struct)N
1649(sockaddr)X
1959(*\)&addr,)X
2271(&addrlen\);)X
1104 4080(if)N
1173(\(cnt)X
1318(<=)X
1428(0\))X
1515({)X
1344 4176(if)N
1413(\(cnt)X
1558(==)X
1668(0\))X
1755({)X
1464 4272(break;)N
1344 4368(})N
1264 4464 0.2639(perror\("recvfrom"\);)AN
1264 4560(exit\(1\);)N
1104 4656(})N
1104 4752(printf\("%s:)N
1482(message)X
1774(=)X
1839(\\"%s\\"\\n",)X
1264 4848(inet_ntoa\(addr.sin_addr\),)N
2095(message\);)X
1024 4944(})N
944 5040(})N
864 5136(})N
3 f
576 5376(5.11.)N
776(NS)X
898(Packet)X
1150(Sequences)X
1 f
776 5500(The)N
935(semantics)X
1285(of)X
1386(NS)X
1522(connections)X
1939(demand)X
2227(that)X
2381(the)X
2513(user)X
2681(both)X
2857(be)X
2967(able)X
3136(to)X
3233(look)X
3410(inside)X
3636(the)X
3769(network)X
576 5596(header)N
818(associated)X
1175(with)X
1344(any)X
1487(incoming)X
1816(packet)X
2053(and)X
2196(be)X
2298(able)X
2458(to)X
2546(specify)X
2804(what)X
2986(should)X
3225(go)X
3331(in)X
3419(certain)X
3664(\256elds)X
3863(of)X
3956(an)X
576 5692(outgoing)N
888(packet.)X
1166(Using)X
1386(different)X
1692(calls)X
1868(to)X
2 f
1959(setsockopt)X
1 f
2293(,)X
2342(it)X
2415(is)X
2497(possible)X
2788(to)X
2879(indicate)X
3162(whether)X
3450(prototype)X
3786(headers)X

38 p
%%Page: 38 38
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-38)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
576 672(will)N
735(be)X
846(associated)X
1211(by)X
1326(the)X
1459(user)X
1628(with)X
1805(each)X
1988(outgoing)X
2307(packet)X
2551(\(SO_HEADERS_ON_OUTPUT\),)X
3682(to)X
3778(indicate)X
576 768(whether)N
856(the)X
975(headers)X
1242(received)X
1536(by)X
1637(the)X
1757(system)X
2001(should)X
2236(be)X
2334(delivered)X
2655(to)X
2739(the)X
2859(user)X
3015(\(SO_HEADERS_ON_INPUT\),)X
576 864(or)N
674(to)X
767(indicate)X
1052(default)X
1306(information)X
1715(that)X
1866(should)X
2110(be)X
2216(associated)X
2576(with)X
2748(all)X
2858(outgoing)X
3172(packets)X
3443(on)X
3553(a)X
3619(given)X
3827(socket)X
576 960(\(SO_DEFAULT_HEADERS\).)N
776 1084(The)N
921(contents)X
1208(of)X
1295(a)X
1351(SPP)X
1503(header)X
1738(\(minus)X
1980(the)X
2098(IDP)X
2247(header\))X
2509(are:)X
864 1228(struct)N
1062(sphdr)X
1260({)X
1140 1324(u_char)N
1420(sp_cc;)X
2572(/*)X
2654(connection)X
3026(control)X
3273(*/)X
864 1420(#de\256ne)N
1140(SP_SP)X
1420(0x80)X
2572(/*)X
2654(system)X
2896(packet)X
3126(*/)X
864 1516(#de\256ne)N
1140(SP_SA)X
1420(0x40)X
2572(/*)X
2654(send)X
2821(acknowledgement)X
3425(*/)X
864 1612(#de\256ne)N
1140(SP_OB)X
1420(0x20)X
2572(/*)X
2654(attention)X
2954(\(out)X
3103(of)X
3190(band)X
3366(data\))X
3547(*/)X
864 1708(#de\256ne)N
1140(SP_EM)X
1420(0x10)X
2572(/*)X
2654(end)X
2790(of)X
2877(message)X
3169(*/)X
1140 1900(u_char)N
1420(sp_dt;)X
2572(/*)X
2654(datastream)X
3022(type)X
3180(*/)X
1140 1996(u_short)N
1420(sp_sid;)X
2572(/*)X
2654(source)X
2884(connection)X
3256(identi\256er)X
3565(*/)X
1140 2092(u_short)N
1420(sp_did;)X
2572(/*)X
2654(destination)X
3025(connection)X
3397(identi\256er)X
3706(*/)X
1140 2188(u_short)N
1420(sp_seq;)X
2572(/*)X
2654(sequence)X
2969(number)X
3234(*/)X
1140 2284(u_short)N
1420(sp_ack;)X
2572(/*)X
2654(acknowledge)X
3098(number)X
3363(*/)X
1140 2380(u_short)N
1420(sp_alo;)X
2572(/*)X
2654(allocation)X
2990(number)X
3255(*/)X
864 2476(};)N
576 2620(Here,)N
776(the)X
897(items)X
1093(of)X
1183(interest)X
1442(are)X
1564(the)X
2 f
1685(datastream)X
2068(type)X
1 f
2225(and)X
2364(the)X
2 f
2486(connection)X
2862(control)X
1 f
3117(\256elds.)X
3354(The)X
3503(semantics)X
3843(of)X
3934(the)X
576 2716(datastream)N
947(type)X
1108(are)X
1230(de\256ned)X
1489(by)X
1592(the)X
1713(application\(s\))X
2177(in)X
2262(question;)X
2578(the)X
2699(value)X
2896(of)X
2986(this)X
3123(\256eld)X
3287(is,)X
3382(by)X
3484(default,)X
3749(zero,)X
3930(but)X
576 2812(it)N
648(can)X
788(be)X
892(used)X
1067(to)X
1157(indicate)X
1439(things)X
1662(such)X
1837(as)X
1932(Xerox's)X
2219(Bulk)X
2403(Data)X
2584(Transfer)X
2886(Protocol)X
3186(\(in)X
3304(which)X
3529(case)X
3697(it)X
3770(is)X
3852(set)X
3970(to)X
576 2908(one\).)N
785(The)X
936(connection)X
1314(control)X
1567(\256eld)X
1735(is)X
1814(a)X
1876(mask)X
2071(of)X
2164(the)X
2288(\257ags)X
2465(de\256ned)X
2727(just)X
2867(below)X
3088(it.)X
3197(The)X
3347(user)X
3506(may)X
3669(set)X
3783(or)X
3875(clear)X
576 3004(the)N
708(end-of-message)X
1251(bit)X
1369(to)X
1465(indicate)X
1753(that)X
1907(a)X
1977(given)X
2189(message)X
2495(is)X
2582(the)X
2714(last)X
2859(of)X
2960(a)X
3030(given)X
3242(substream)X
3601(type,)X
3793(or)X
3894(may)X
576 3100(set/clear)N
872(the)X
998(attention)X
1305(bit)X
1416(as)X
1510(an)X
1613(alternate)X
1917(way)X
2078(to)X
2167(indicate)X
2448(that)X
2595(a)X
2658(packet)X
2895(should)X
3135(be)X
3238(sent)X
3394(out-of-band.)X
3840(As)X
3956(an)X
576 3196(example,)N
888(to)X
970(associate)X
1280(prototype)X
1607(headers)X
1873(with)X
2035(outgoing)X
2339(SPP)X
2491(packets,)X
2772(consider:)X
864 3340(#include)N
1160(<sys/types.h>)X
864 3436(#include)N
1160(<sys/socket.h>)X
864 3532(#include)N
1160(<netns/ns.h>)X
864 3628(#include)N
1160(<netns/sp.h>)X
884 3724(...)N
864 3820(struct)N
1062(sockaddr_ns)X
1483(sns,)X
1625(to;)X
864 3916(int)N
968(s,)X
1039(on)X
1139(=)X
1204(1;)X
864 4012(struct)N
1062(databuf)X
1323({)X
1064 4108(struct)N
1262(sphdr)X
1460(proto_spp;)X
1864(/*)X
1946(prototype)X
2273(header)X
2508(*/)X
1064 4204(char)N
1223(buf[534];)X
1864(/*)X
1946(max.)X
2124(possible)X
2406(data)X
2560(by)X
2660(Xerox)X
2881(std.)X
3014(*/)X
864 4300(})N
922(buf;)X
884 4396(...)N
864 4492(s)N
915(=)X
980(socket\(AF_NS,)X
1496(SOCK_SEQPACKET,)X
2251(0\);)X
884 4588(...)N
864 4684(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&sns,)X
1930(sizeof)X
2142(\(sns\)\);)X
864 4780(setsockopt\(s,)N
1300(NSPROTO_SPP,)X
1876(SO_HEADERS_ON_OUTPUT,)X
2939(&on,)X
3121(sizeof\(on\)\);)X
884 4876(...)N
864 4972(buf.proto_spp.sp_dt)N
1524(=)X
1589(1;)X
1664(/*)X
1746(bulk)X
1908(data)X
2062(*/)X
864 5068(buf.proto_spp.sp_cc)N
1534(=)X
1599(SP_EM;)X
2064(/*)X
2146(end-of-message)X
2675(*/)X
864 5164(strcpy\(buf.buf,)N
1361("hello)X
1574(world\\n"\);)X
864 5260(sendto\(s,)N
1171(\(char)X
1357(*\))X
1444(&buf,)X
1653(sizeof\(struct)X
2070(sphdr\))X
2295(+)X
2360(strlen\("hello)X
2778(world\\n"\),)X
944 5356(\(struct)N
1169(sockaddr)X
1479(*\))X
1566(&to,)X
1730(sizeof\(to\)\);)X
884 5452(...)N
576 5596(Note)N
760(that)X
908(one)X
1052(must)X
1235(be)X
1339(careful)X
1591(when)X
1793(writing)X
2052(headers;)X
2348(if)X
2425(the)X
2551(prototype)X
2887(header)X
3131(is)X
3213(not)X
3344(written)X
3600(with)X
3771(the)X
3898(data)X
576 5692(with)N
748(which)X
974(it)X
1048(is)X
1131(to)X
1223(be)X
1328(associated,)X
1707(the)X
1834(kernel)X
2064(will)X
2217(treat)X
2389(the)X
2516(\256rst)X
2669(few)X
2819(bytes)X
3017(of)X
3113(the)X
3240(data)X
3403(as)X
3499(the)X
3626(header,)X
3890(with)X

39 p
%%Page: 39 39
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-39)X
576 672(unpredictable)N
1033(results.)X
1302(To)X
1411(turn)X
1561(off)X
1676(the)X
1795(above)X
2008(association,)X
2405(and)X
2542(to)X
2625(indicate)X
2900(that)X
3041(packet)X
3272(headers)X
3539(received)X
3833(by)X
3934(the)X
576 768(system)N
818(should)X
1051(be)X
1147(passed)X
1381(up)X
1481(to)X
1563(the)X
1681(user,)X
1855(one)X
1991(might)X
2197(use:)X
864 912(#include)N
1160(<sys/types.h>)X
864 1008(#include)N
1160(<sys/socket.h>)X
864 1104(#include)N
1160(<netns/ns.h>)X
864 1200(#include)N
1160(<netns/sp.h>)X
884 1296(...)N
864 1392(struct)N
1062(sockaddr)X
1372(sns;)X
864 1488(int)N
968(s,)X
1039(on)X
1139(=)X
1204(1,)X
1284(off)X
1398(=)X
1463(0;)X
884 1584(...)N
864 1680(s)N
915(=)X
980(socket\(AF_NS,)X
1496(SOCK_SEQPACKET,)X
2251(0\);)X
884 1776(...)N
864 1872(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&sns,)X
1930(sizeof)X
2142(\(sns\)\);)X
864 1968(setsockopt\(s,)N
1300(NSPROTO_SPP,)X
1876(SO_HEADERS_ON_OUTPUT,)X
2939(&off,)X
3135(sizeof\(off\)\);)X
864 2064(setsockopt\(s,)N
1300(NSPROTO_SPP,)X
1876(SO_HEADERS_ON_INPUT,)X
2859(&on,)X
3041(sizeof\(on\)\);)X
776 2236(Output)N
1022(is)X
1099(handled)X
1377(somewhat)X
1726(differently)X
2089(in)X
2175(the)X
2298(IDP)X
2452(world.)X
2704(The)X
2854(header)X
3094(of)X
3186(an)X
3287(IDP-level)X
3624(packet)X
3859(looks)X
576 2332(like:)N
864 2476(struct)N
1062(idp)X
1184({)X
1082 2572(u_short)N
1574(idp_sum;)X
2726(/*)X
2808(Checksum)X
3166(*/)X
1082 2668(u_short)N
1574(idp_len;)X
2726(/*)X
2808(Length,)X
3075(in)X
3157(bytes,)X
3366(including)X
3688(header)X
3923(*/)X
1082 2764(u_char)N
1574(idp_tc;)X
2726(/*)X
2808(Transport)X
3140(Control)X
3404(\(i.e.,)X
3569(hop)X
3709(count\))X
3934(*/)X
1082 2860(u_char)N
1574(idp_pt;)X
2726(/*)X
2808(Packet)X
3042(Type)X
3227(\(i.e.,)X
3392(level)X
3568(2)X
3628(protocol\))X
3942(*/)X
1082 2956(struct)N
1280(ns_addr)X
1574(idp_dna;)X
2726(/*)X
2808(Destination)X
3197(Network)X
3498(Address)X
3781(*/)X
1082 3052(struct)N
1280(ns_addr)X
1574(idp_sna;)X
2726(/*)X
2808(Source)X
3051(Network)X
3352(Address)X
3635(*/)X
864 3148(};)N
576 3292(The)N
722(primary)X
997(\256eld)X
1160(of)X
1248(interest)X
1505(in)X
1588(an)X
1685(IDP)X
1835(header)X
2071(is)X
2145(the)X
2 f
2264(packet)X
2495(type)X
1 f
2650(\256eld.)X
2853(The)X
2999(standard)X
3292(values)X
3518(for)X
3633(this)X
3769(\256eld)X
3933(are)X
576 3388(\(as)N
690(de\256ned)X
946(in)X
1028(<)X
2 f
1073(netns/ns.h)X
1 f
1395(>\):)X
864 3532(#de\256ne)N
1120(NSPROTO_RI)X
1850(1)X
2426(/*)X
2508(Routing)X
2785(Information)X
3188(*/)X
864 3628(#de\256ne)N
1120(NSPROTO_ECHO)X
1850(2)X
2426(/*)X
2508(Echo)X
2693(Protocol)X
2984(*/)X
864 3724(#de\256ne)N
1120(NSPROTO_ERROR)X
1850(3)X
2426(/*)X
2508(Error)X
2698(Protocol)X
2989(*/)X
864 3820(#de\256ne)N
1120(NSPROTO_PE)X
1850(4)X
2426(/*)X
2508(Packet)X
2742(Exchange)X
3079(*/)X
864 3916(#de\256ne)N
1120(NSPROTO_SPP)X
1850(5)X
2426(/*)X
2508(Sequenced)X
2876(Packet)X
3110(*/)X
576 4060(For)N
713(SPP)X
871(connections,)X
1300(the)X
1424(contents)X
1717(of)X
1810(this)X
1951(\256eld)X
2119(are)X
2244(automatically)X
2706(set)X
2821(to)X
2909(NSPROTO_SPP;)X
3494(for)X
3615(IDP)X
3771(packets,)X
576 4156(this)N
711(value)X
905(defaults)X
1179(to)X
1261(zero,)X
1440(which)X
1656(means)X
1881(``unknown''.)X
776 4280(Setting)N
1022(the)X
1140(value)X
1334(of)X
1421(that)X
1561(\256eld)X
1723(with)X
1885(SO_DEFAULT_HEADERS)X
2821(is)X
2894(easy:)X
864 4424(#include)N
1160(<sys/types.h>)X
864 4520(#include)N
1160(<sys/socket.h>)X
864 4616(#include)N
1160(<netns/ns.h>)X
864 4712(#include)N
1160(<netns/idp.h>)X
884 4808(...)N
864 4904(struct)N
1062(sockaddr)X
1372(sns;)X
864 5000(struct)N
1062(idp)X
1184(proto_idp;)X
1864(/*)X
1946(prototype)X
2273(header)X
2508(*/)X
864 5096(int)N
968(s,)X
1039(on)X
1139(=)X
1204(1;)X
884 5192(...)N

40 p
%%Page: 40 40
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-40)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
864 720(s)N
915(=)X
980(socket\(AF_NS,)X
1496(SOCK_DGRAM,)X
2087(0\);)X
884 816(...)N
864 912(bind\(s,)N
1104(\(struct)X
1329(sockaddr)X
1639(*\))X
1726(&sns,)X
1930(sizeof)X
2142(\(sns\)\);)X
864 1008(proto_idp.idp_pt)N
1419(=)X
1484(NSPROTO_PE;)X
2064(/*)X
2146(packet)X
2376(exchange)X
2700(*/)X
864 1104(setsockopt\(s,)N
1300(NSPROTO_IDP,)X
1873(SO_DEFAULT_HEADERS,)X
2829(\(char)X
3015(*\))X
3102(&proto_idp,)X
944 1200(sizeof\(proto_idp\)\);)N
884 1296(...)N
776 1468(Using)N
1136(SO_HEADERS_ON_OUTPUT)X
2328(is)X
2550(somewhat)X
3044(more)X
3378(dif\256cult.)X
3840(When)X
576 1564(SO_HEADERS_ON_OUTPUT)N
1621(is)X
1696(turned)X
1923(on)X
2025(for)X
2141(an)X
2239(IDP)X
2390(socket,)X
2637(the)X
2756(socket)X
2982(becomes)X
3284(\(for)X
3426(all)X
3527(intents)X
3761(and)X
3898(pur-)X
576 1660(poses\))N
808(a)X
871(raw)X
1019(socket.)X
1291(In)X
1385(this)X
1527(case,)X
1714(all)X
1822(the)X
1948(\256elds)X
2149(of)X
2244(the)X
2370(prototype)X
2705(header)X
2948(\(except)X
3213(the)X
3339(length)X
3567(and)X
3711(checksum)X
576 1756(\256elds,)N
798(which)X
1023(are)X
1151(computed)X
1496(by)X
1605(the)X
1732(kernel\))X
1989(must)X
2173(be)X
2278(\256lled)X
2471(in)X
2562(correctly)X
2877(in)X
2968(order)X
3167(for)X
3290(the)X
3417(socket)X
3651(to)X
3741(send)X
3916(and)X
576 1852(receive)N
834(data)X
993(in)X
1080(a)X
1141(sensible)X
1424(manner.)X
1730(To)X
1844(be)X
1945(more)X
2135(speci\256c,)X
2425(the)X
2548(source)X
2783(address)X
3050(must)X
3231(be)X
3333(set)X
3448(to)X
3536(that)X
3682(of)X
3775(the)X
3899(host)X
576 1948(sending)N
850(the)X
973(data;)X
1154(the)X
1277(destination)X
1653(address)X
1919(must)X
2099(be)X
2200(set)X
2313(to)X
2399(that)X
2543(of)X
2634(the)X
2756(host)X
2913(for)X
3031(whom)X
3255(the)X
3377(data)X
3535(is)X
3612(intended;)X
3934(the)X
576 2044(packet)N
816(type)X
984(must)X
1169(be)X
1275(set)X
1394(to)X
1486(whatever)X
1811(value)X
2015(is)X
2098(desired;)X
2382(and)X
2528(the)X
2656(hopcount)X
2984(must)X
3169(be)X
3275(set)X
3395(to)X
3488(some)X
3688(reasonable)X
576 2140(value)N
781(\(almost)X
1052(always)X
1306(zero\).)X
1543(It)X
1623(should)X
1867(also)X
2027(be)X
2134(noted)X
2343(that)X
2494(simply)X
2741(sending)X
3020(data)X
3184(using)X
2 f
3387(write)X
1 f
3581(will)X
3735(not)X
3867(work)X
576 2236(unless)N
799(a)X
2 f
858(connect)X
1 f
1131(or)X
2 f
1221(sendto)X
1 f
1453(call)X
1592(is)X
1668(used,)X
1858(in)X
1943(spite)X
2117(of)X
2207(the)X
2328(fact)X
2472(that)X
2615(it)X
2682(is)X
2758(the)X
2879(destination)X
3253(address)X
3517(in)X
3603(the)X
3725(prototype)X
576 2332(header)N
824(that)X
977(is)X
1063(used,)X
1263(not)X
1398(the)X
1529(one)X
1678(given)X
1889(in)X
1984(either)X
2200(of)X
2300(those)X
2502(calls.)X
2722(For)X
2866(almost)X
3112(all)X
3225(IDP)X
3387(applications)X
3807(,)X
3859(using)X
576 2428(SO_DEFAULT_HEADERS)N
1512(is)X
1585(easier)X
1793(and)X
1929(more)X
2114(desirable)X
2424(than)X
2582(writing)X
2833(headers.)X
3 f
576 2620(5.12.)N
776(Three-way)X
1166(Handshake)X
1 f
776 2744(The)N
930(semantics)X
1275(of)X
1371(SPP)X
1532(connections)X
1945(indicates)X
2260(that)X
2410(a)X
2476(three-way)X
2828(handshake,)X
3217(involving)X
3553(changes)X
3842(in)X
3934(the)X
576 2840(datastream)N
958(type,)X
1150(should)X
1397(\320)X
1511(but)X
1647(is)X
1734(not)X
1870(absolutely)X
2233(required)X
2535(to)X
2631(\320)X
2745(take)X
2913(place)X
3117(before)X
3357(a)X
3427(SPP)X
3593(connection)X
3979(is)X
576 2936(closed.)N
849(Almost)X
1112(all)X
1220(SPP)X
1380(connections)X
1791(are)X
1918 0.2417(``well-behaved'')AX
2488(in)X
2579(this)X
2723(manner;)X
3015(when)X
3218(communicating)X
3745(with)X
3916(any)X
576 3032(process,)N
859(it)X
925(is)X
1000(best)X
1151(to)X
1235(assume)X
1493(that)X
1634(the)X
1753(three-way)X
2096(handshake)X
2456(is)X
2530(required)X
2819(unless)X
3040(it)X
3105(is)X
3179(known)X
3418(for)X
3533(certain)X
3773(that)X
3914(it)X
3979(is)X
576 3128(not)N
704(required.)X
1038(In)X
1131(a)X
1193(three-way)X
1541(close,)X
1752(the)X
1876(closing)X
2133(process)X
2400(indicates)X
2711(that)X
2857(it)X
2927(wishes)X
3171(to)X
3259(close)X
3450(the)X
3574(connection)X
3952(by)X
576 3224(sending)N
848(a)X
907(zero-length)X
1296(packet)X
1529(with)X
1694(end-of-message)X
2226(set)X
2338(and)X
2477(with)X
2642(datastream)X
3013(type)X
3174(254.)X
3357(The)X
3505(other)X
3693(side)X
3845(of)X
3934(the)X
576 3320(connection)N
956(indicates)X
1269(that)X
1418(it)X
1491(is)X
1573(OK)X
1718(to)X
1809(close)X
2003(by)X
2112(sending)X
2390(a)X
2455(zero-length)X
2850(packet)X
3089(with)X
3260(end-of-message)X
3798(set)X
3916(and)X
576 3416(datastream)N
955(type)X
1123(255.)X
1313(Finally,)X
1589(the)X
1717(closing)X
1978(process)X
2249(replies)X
2493(with)X
2665(a)X
2731(zero-length)X
3127(packet)X
3367(with)X
3539(substream)X
3894(type)X
576 3512(255;)N
740(at)X
820(this)X
957(point,)X
1163(the)X
1283(connection)X
1657(is)X
1732(considered)X
2102(closed.)X
2369(The)X
2516(following)X
2849(code)X
3023(fragments)X
3367(are)X
3489(simpli\256ed)X
3831(exam-)X
576 3608(ples)N
727(of)X
816(how)X
976(one)X
1114(might)X
1321(handle)X
1556(this)X
1692(three-way)X
2035(handshake)X
2395(at)X
2474(the)X
2593(user)X
2748(level;)X
2947(in)X
3030(the)X
3149(future,)X
3382(support)X
3643(for)X
3758(this)X
3894(type)X
576 3704(of)N
665(close)X
852(will)X
998(probably)X
1305(be)X
1403(provided)X
1710(as)X
1799(part)X
1946(of)X
2035(the)X
2156(C)X
2232(library)X
2469(or)X
2559(as)X
2649(part)X
2797(of)X
2887(the)X
3008(kernel.)X
3272(The)X
3420(\256rst)X
3567(code)X
3742(fragment)X
576 3800(below)N
794(illustrates)X
1127(how)X
1287(a)X
1345(process)X
1607(might)X
1814(handle)X
2049(three-way)X
2392(handshake)X
2752(if)X
2822(it)X
2887(sees)X
3042(that)X
3183(the)X
3302(process)X
3564(it)X
3629(is)X
3703(communi-)X
576 3896(cating)N
792(with)X
954(wants)X
1161(to)X
1243(close)X
1428(the)X
1546(connection:)X
864 4040(#include)N
1160(<sys/types.h>)X
864 4136(#include)N
1160(<sys/socket.h>)X
864 4232(#include)N
1160(<netns/ns.h>)X
864 4328(#include)N
1160(<netns/sp.h>)X
884 4424(...)N
864 4520(#ifndef)N
1116(SPPSST_END)X
864 4616(#de\256ne)N
1120(SPPSST_END)X
1614(254)X
864 4712(#de\256ne)N
1120(SPPSST_ENDREPLY)X
1867(255)X
864 4808(#endif)N
864 4904(struct)N
1062(sphdr)X
1260(proto_sp;)X
864 5000(int)N
968(s;)X
884 5096(...)N

41 p
%%Page: 41 41
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-41)X
864 720(read\(s,)N
1101(buf,)X
1248(BUFSIZE\);)X
864 816(if)N
933(\(\(\(struct)X
1212(sphdr)X
1410(*\)buf\)->sp_dt)X
1876(==)X
1986(SPPSST_END\))X
2507({)X
1064 912(/*)N
1084 1008(*)N
1144(SPPSST_END)X
1638(indicates)X
1943(that)X
2083(the)X
2201(other)X
2386(side)X
2535(wants)X
2742(to)X
1084 1104(*)N
1144(close.)X
1084 1200(*/)N
1064 1296(proto_sp.sp_dt)N
1557(=)X
1622(SPPSST_ENDREPLY;)X
1064 1392(proto_sp.sp_cc)N
1567(=)X
1632(SP_EM;)X
1064 1488(setsockopt\(s,)N
1500(NSPROTO_SPP,)X
2076(SO_DEFAULT_HEADERS,)X
3032(\(char)X
3218(*\)&proto_sp,)X
1144 1584(sizeof\(proto_sp\)\);)N
1064 1680(write\(s,)N
1327(buf,)X
1474(0\);)X
1064 1776(/*)N
1084 1872(*)N
1144(Write)X
1347(a)X
1403(zero-length)X
1789(packet)X
2019(with)X
2181(datastream)X
2549(type)X
2707(=)X
2772(SPPSST_ENDREPLY)X
1084 1968(*)N
1144(to)X
1226(indicate)X
1500(that)X
1640(the)X
1758(close)X
1943(is)X
2016(OK)X
2152(with)X
2314(us.)X
2445(The)X
2590(packet)X
2820(that)X
2960(we)X
1084 2064(*)N
1144(don't)X
1333(see)X
1456(\(because)X
1758(we)X
1872(don't)X
2061(look)X
2223(for)X
2337(it\))X
2428(is)X
2501(another)X
2762(packet)X
1084 2160(*)N
1144(from)X
1320(the)X
1438(other)X
1623(side)X
1772(of)X
1859(the)X
1977(connection,)X
2369(with)X
2531(SPPSST_ENDREPLY)X
1084 2256(*)N
1144(on)X
1244(it)X
1308(it,)X
1392(too.)X
1554(Once)X
1744(that)X
1884(packet)X
2114(is)X
2187(sent,)X
2356(the)X
2474(connection)X
2846(is)X
1084 2352(*)N
1144(considered)X
1512(closed;)X
1759(note)X
1917(that)X
2057(we)X
2171(really)X
2374(ought)X
2576(to)X
2658(retransmit)X
1084 2448(*)N
1144(the)X
1262(close)X
1447(for)X
1561(some)X
1750(time)X
1912(if)X
1981(we)X
2095(do)X
2195(not)X
2317(get)X
2435(a)X
2491(reply.)X
1084 2544(*/)N
1064 2640(close\(s\);)N
864 2736(})N
884 2832(...)N
576 2976(To)N
685(indicate)X
959(to)X
1041(another)X
1302(process)X
1563(that)X
1703(we)X
1817(would)X
2037(like)X
2177(to)X
2259(close)X
2444(the)X
2562(connection,)X
2954(the)X
3072(following)X
3403(code)X
3575(would)X
3795(suf\256ce:)X
864 3120(#include)N
1160(<sys/types.h>)X
864 3216(#include)N
1160(<sys/socket.h>)X
864 3312(#include)N
1160(<netns/ns.h>)X
864 3408(#include)N
1160(<netns/sp.h>)X
884 3504(...)N
864 3600(#ifndef)N
1116(SPPSST_END)X
864 3696(#de\256ne)N
1120(SPPSST_END)X
1614(254)X
864 3792(#de\256ne)N
1120(SPPSST_ENDREPLY)X
1867(255)X
864 3888(#endif)N
864 3984(struct)N
1062(sphdr)X
1260(proto_sp;)X
864 4080(int)N
968(s;)X
884 4176(...)N
864 4272(proto_sp.sp_dt)N
1357(=)X
1422(SPPSST_END;)X
864 4368(proto_sp.sp_cc)N
1367(=)X
1432(SP_EM;)X
864 4464(setsockopt\(s,)N
1300(NSPROTO_SPP,)X
1876(SO_DEFAULT_HEADERS,)X
2832(\(char)X
3018(*\)&proto_sp,)X
944 4560(sizeof\(proto_sp\)\);)N
864 4656(write\(s,)N
1127(buf,)X
1274(0\);)X
1464(/*)X
1546(send)X
1713(the)X
1831(end)X
1967(request)X
2219(*/)X
864 4752(proto_sp.sp_dt)N
1357(=)X
1422(SPPSST_ENDREPLY;)X
864 4848(setsockopt\(s,)N
1300(NSPROTO_SPP,)X
1876(SO_DEFAULT_HEADERS,)X
2832(\(char)X
3018(*\)&proto_sp,)X
944 4944(sizeof\(proto_sp\)\);)N
864 5040(/*)N
884 5136(*)N
944(We)X
1076(assume)X
1332(\(perhaps)X
1629(unwisely\))X
1965(that)X
2105(the)X
2223(other)X
2408(side)X
2557(will)X
2701(send)X
2868(the)X
2986(ENDREPLY,)X
884 5232(*)N
944(so)X
1035(we'll)X
1220(just)X
1355(send)X
1522(our)X
1649(\256nal)X
1811(ENDREPLY)X
2249(as)X
2336(if)X
2405(we'd)X
2586(seen)X
2749(theirs)X
2947(already)X
884 5328(*/)N
864 5424(write\(s,)N
1127(buf,)X
1274(0\);)X
864 5520(close\(s\);)N
884 5616(...)N

42 p
%%Page: 42 42
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-42)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
3 f
576 672(5.13.)N
776(Packet)X
1028(Exchange)X
1 f
776 796(The)N
930(Xerox)X
1160(standard)X
1461(protocols)X
1788(include)X
2053(a)X
2118(protocol)X
2414(that)X
2563(is)X
2645(both)X
2816(reliable)X
3086(and)X
3231(datagram-oriented.)X
3890(This)X
576 892(protocol)N
864(is)X
938(known)X
1177(as)X
1265(Packet)X
1500(Exchange)X
1838(\(PEX)X
2037(or)X
2125(PE\))X
2266(and,)X
2423(like)X
2564(SPP,)X
2737(is)X
2811(layered)X
3069(on)X
3170(top)X
3293(of)X
3381(IDP.)X
3570(PEX)X
3741(is)X
3814(impor-)X
576 988(tant)N
718(for)X
834(a)X
892(number)X
1159(of)X
1248(things:)X
1487(Courier)X
1754(remote)X
1999(procedure)X
2344(calls)X
2514(may)X
2675(be)X
2774(expedited)X
3109(through)X
3381(the)X
3502(use)X
3632(of)X
3722(PEX,)X
3916(and)X
576 1084(many)N
779(Xerox)X
1005(servers)X
1258(are)X
1382(located)X
1639(by)X
1744(doing)X
1951(a)X
2012(PEX)X
2188 0.1648(``BroadcastForServers'')AX
2994(operation.)X
3362(Although)X
3689(there)X
3875(is)X
3952(no)X
576 1180(implementation)N
1099(of)X
1187(PEX)X
1359(in)X
1442(the)X
1561(kernel,)X
1803(it)X
1868(may)X
2027(be)X
2124(simulated)X
2456(at)X
2535(the)X
2654(user)X
2809(level)X
2986(with)X
3149(some)X
3339(clever)X
3557(coding)X
3796(and)X
3934(the)X
576 1276(use)N
703(of)X
790(one)X
926(peculiar)X
2 f
1205(getsockopt)X
1 f
1548(.)X
1608(A)X
1686(PEX)X
1857(packet)X
2087(looks)X
2280(like:)X
864 1420(/*)N
884 1516(*)N
944(The)X
1089 0.2589(packet-exchange)AX
1650(header)X
1885(shown)X
2114(here)X
2273(is)X
2346(not)X
2468(de\256ned)X
884 1612(*)N
944(as)X
1031(part)X
1176(of)X
1263(any)X
1399(of)X
1486(the)X
1604(system)X
1846(include)X
2102(\256les.)X
884 1708(*/)N
864 1804(struct)N
1062(pex)X
1198({)X
1082 1900(struct)N
1280(idp)X
1422(p_idp;)X
2574(/*)X
2656(idp)X
2778(header)X
3013(*/)X
1082 1996(u_short)N
1422(ph_id[2];)X
2574(/*)X
2656(unique)X
2894(transaction)X
3266(ID)X
3371(for)X
3485(pex)X
3621(*/)X
1082 2092(u_short)N
1422(ph_client;)X
2574(/*)X
2656(client)X
2854(type)X
3012(\256eld)X
3174(for)X
3288(pex)X
3424(*/)X
864 2188(};)N
576 2332(The)N
2 f
722(ph_id)X
1 f
925(\256eld)X
1088(is)X
1162(used)X
1331(to)X
1415(hold)X
1579(a)X
1637(``unique)X
1931(id'')X
2069(that)X
2211(is)X
2286(used)X
2455(in)X
2539(duplicate)X
2855(suppression;)X
3277(the)X
2 f
3397(ph_client)X
1 f
3717(\256eld)X
3881(indi-)X
576 2428(cates)N
763(the)X
887(PEX)X
1064(client)X
1268(type)X
1432(\(similar)X
1707(to)X
1795(the)X
1919(packet)X
2155(type)X
2319(\256eld)X
2486(in)X
2573(the)X
2696(IDP)X
2850(header\).)X
3157(PEX)X
3333(reliability)X
3669(stems)X
3876(from)X
576 2524(the)N
694(fact)X
835(that)X
975(it)X
1039(is)X
1112(an)X
1208(idempotent)X
1588(\(``I)X
1716(send)X
1883(a)X
1939(packet)X
2169(to)X
2251(you,)X
2411(you)X
2552(send)X
2720(a)X
2777(packet)X
3008(to)X
3091(me''\))X
3291(protocol.)X
3619(Processes)X
3952(on)X
576 2620(each)N
745(side)X
895(of)X
983(the)X
1102(connection)X
1475(may)X
1634(use)X
1762(the)X
1881(unique)X
2120(id)X
2203(to)X
2286(determine)X
2628(if)X
2698(they)X
2857(have)X
3030(seen)X
3194(a)X
3251(given)X
3450(packet)X
3681(before)X
3907(\(the)X
576 2716(unique)N
817(id)X
902(\256eld)X
1067(differs)X
1300(on)X
1404(each)X
1576(packet)X
1810(sent\))X
1990(so)X
2085(that)X
2229(duplicates)X
2578(may)X
2740(be)X
2840(detected,)X
3152(and)X
3292(to)X
3378(indicate)X
3656(which)X
3876(mes-)X
576 2812(sage)N
741(a)X
799(given)X
999(packet)X
1231(is)X
1306(in)X
1390(response)X
1693(to.)X
1817(If)X
1892(a)X
1949(packet)X
2180(with)X
2343(a)X
2400(given)X
2599(unique)X
2838(id)X
2921(is)X
2995(sent)X
3145(and)X
3282(no)X
3383(response)X
3685(is)X
3759(received)X
576 2908(in)N
670(a)X
738(given)X
948(amount)X
1220(of)X
1319(time,)X
1513(the)X
1643(packet)X
1885(is)X
1970(retransmitted)X
2425(until)X
2603(it)X
2679(is)X
2764(decided)X
3047(that)X
3200(no)X
3313(response)X
3627(will)X
3784(ever)X
3956(be)X
576 3004(received.)N
914(To)X
1028(simulate)X
1324(PEX,)X
1520(one)X
1660(must)X
1839(be)X
1939(able)X
2097(to)X
2183(generate)X
2480(unique)X
2722(ids)X
2839(--)X
2917(something)X
3274(that)X
3418(is)X
3495(hard)X
3662(to)X
3748(do)X
3852(at)X
3934(the)X
576 3100(user)N
730(level)X
906(with)X
1068(any)X
1204(real)X
1345(guarantee)X
1678(that)X
1818(the)X
1936(id)X
2018(is)X
2091(really)X
2294(unique.)X
2573(Therefore,)X
2932(a)X
2989(means)X
3215(\(via)X
2 f
3361(getsockopt)X
1 f
3704(\))X
3752(has)X
3880(been)X
576 3196(provided)N
896(for)X
1025(getting)X
1282(unique)X
1535(ids)X
1663(from)X
1854(the)X
1987(kernel.)X
2263(The)X
2422(following)X
2767(code)X
2953(fragment)X
3277(indicates)X
3596(how)X
3768(to)X
3864(get)X
3996(a)X
576 3292(unique)N
814(id:)X
864 3436(long)N
1026(uniqueid;)X
864 3532(int)N
968(s,)X
1039(idsize)X
1246(=)X
1311(sizeof\(uniqueid\);)X
884 3628(...)N
864 3724(s)N
915(=)X
980(socket\(AF_NS,)X
1496(SOCK_DGRAM,)X
2087(0\);)X
884 3820(...)N
864 3916(/*)N
946(get)X
1064(id)X
1146(from)X
1322(the)X
1440(kernel)X
1661(--)X
1735(only)X
1897(on)X
1997(IDP)X
2146(sockets)X
2402(*/)X
864 4012(getsockopt\(s,)N
1309(NSPROTO_PE,)X
1846(SO_SEQNO,)X
2295(\(char)X
2481(*\)&uniqueid,)X
2930(&idsize\);)X
884 4108(...)N
576 4252(The)N
723(retransmission)X
1212(and)X
1350(duplicate)X
1666(suppression)X
2066(code)X
2240(required)X
2530(to)X
2614(simulate)X
2908(PEX)X
3082(fully)X
3256(is)X
3332(left)X
3462(as)X
3552(an)X
3651(exercise)X
3938(for)X
576 4348(the)N
694(reader.)X
3 f
576 4540(5.14.)N
776(Inetd)X
1 f
776 4664(One)N
937(of)X
1031(the)X
1156(daemons)X
1469(provided)X
1782(with)X
1952(4.4BSD)X
2235(is)X
2 f
2316(inetd)X
1 f
(,)S
2524(the)X
2650(so)X
2749(called)X
2969(``internet)X
3296 0.2500(super-server.'')AX
3796(Having)X
576 4760(one)N
713(daemon)X
988(listen)X
1181(for)X
1295(requests)X
1578(for)X
1692(many)X
1890(daemons)X
2195(instead)X
2442(of)X
2529(having)X
2767(each)X
2935(daemon)X
3209(listen)X
3402(for)X
3516(its)X
3611(own)X
3769(requests)X
576 4856(reduces)N
850(the)X
976(number)X
1249(of)X
1344(idle)X
1492(daemons)X
1805(and)X
1949(simplies)X
2243(their)X
2418(implementation.)X
2 f
2988(Inetd)X
1 f
3194(handles)X
3468(two)X
3617(types)X
3815(of)X
3911(ser-)X
576 4952(vices:)N
793(standard)X
1095(and)X
1241(TCPMUX.)X
1644(A)X
1732(standard)X
2034(service)X
2292(has)X
2429(a)X
2495(well-known)X
2908(port)X
3067(assigned)X
3373(to)X
3465(it)X
3539(and)X
3685(is)X
3768(listed)X
3970(in)X
2 f
576 5048(/etc/services)N
1 f
1018(\(see)X
2 f
1180(services)X
1 f
1439(\(5\)\);)X
1614(it)X
1690(may)X
1860(be)X
1968(a)X
2036(service)X
2296(that)X
2448(implements)X
2853(an)X
2962(of\256cial)X
3222(Internet)X
3505(standard)X
3810(or)X
3910(is)X
3996(a)X
576 5144(BSD-speci\256c)N
1028(service.)X
1321(TCPMUX)X
1679(services)X
1963(are)X
2087(nonstandard)X
2504(and)X
2644(do)X
2748(not)X
2874(have)X
3050(a)X
3110(well-known)X
3517(port)X
3670(assigned)X
3970(to)X
576 5240(them.)N
812(They)X
1013(are)X
1148(invoked)X
1442(from)X
2 f
1634(inetd)X
1 f
1843(when)X
2053(a)X
2126(program)X
2435(connects)X
2753(to)X
2852(the)X
2987("tcpmux")X
3330(well-known)X
3750(port)X
3916(and)X
576 5336(speci\256es)N
872(the)X
990(service)X
1238(name.)X
1472(This)X
1634(is)X
1707(useful)X
1923(for)X
2037(adding)X
2275(locally-developed)X
2870(servers.)X
2 f
776 5460(Inetd)N
1 f
961(is)X
1034(invoked)X
1312(at)X
1390(boot)X
1552(time,)X
1734(and)X
1870(determines)X
2242(from)X
2418(the)X
2536(\256le)X
2 f
2658(/etc/inetd.conf)X
1 f
3134(the)X
3252(servers)X
3500(for)X
3614(which)X
3831(it)X
3896(is)X
3970(to)X
576 5556(listen.)N
818(Once)X
1017(this)X
1161(information)X
1568(has)X
1704(been)X
1885(read)X
2053(and)X
2198(a)X
2263(pristine)X
2532(environment)X
2966(created,)X
2 f
3247(inetd)X
1 f
3435(proceeds)X
3749(to)X
3839(create)X
576 5652(one)N
712(socket)X
937(for)X
1051(each)X
1219(service)X
1467(it)X
1531(is)X
1604(to)X
1686(listen)X
1879(for,)X
2013(binding)X
2277(the)X
2395(appropriate)X
2781(port)X
2930(number)X
3195(to)X
3277(each)X
3445(socket.)X
2 f
776 5776(Inetd)N
1 f
964(then)X
1125(performs)X
1438(a)X
2 f
1497(select)X
1 f
1703(on)X
1806(all)X
1910(these)X
2099(sockets)X
2359(for)X
2477(read)X
2640(availability,)X
3044(waiting)X
3308(for)X
3426(somebody)X
3779(wishing)X
576 5872(a)N
640(connection)X
1020(to)X
1110(the)X
1236(service)X
1492(corresponding)X
1979(to)X
2069(that)X
2217(socket.)X
2 f
2490(Inetd)X
1 f
2683(then)X
2849(performs)X
3166(an)X
2 f
3269(accept)X
1 f
3506(on)X
3613(the)X
3738(socket)X
3970(in)X

43 p
%%Page: 43 43
10 s 10 xH 0 xS 1 f 1 i
576 384(Advanced)N
922(4.4BSD)X
1197(IPC)X
1341(Tutorial)X
3677(PSD:21-43)X
576 672(question,)N
2 f
896(fork)X
1 f
1025(s,)X
2 f
1105(dup)X
1 f
(s)S
1285(the)X
1412(new)X
1575(socket)X
1809(to)X
1900(\256le)X
2031(descriptors)X
2412(0)X
2481(and)X
2626(1)X
2695(\(stdin)X
2906(and)X
3051(stdout\),)X
3323(closes)X
3549(other)X
3744(open)X
3930(\256le)X
576 768(descriptors,)N
968(and)X
2 f
1104(exec)X
1 f
1248(s)X
1299(the)X
1417(appropriate)X
1803(server.)X
776 892(Servers)N
1037(making)X
1297(use)X
1424(of)X
2 f
1511(inetd)X
1 f
1691(are)X
1810(considerably)X
2240(simpli\256ed,)X
2599(as)X
2 f
2686(inetd)X
1 f
2866(takes)X
3051(care)X
3206(of)X
3293(the)X
3411(majority)X
3702(of)X
3789(the)X
3908(IPC)X
576 988(work)N
762(required)X
1051(in)X
1134(establishing)X
1537(a)X
1593(connection.)X
2005(The)X
2150(server)X
2367(invoked)X
2645(by)X
2 f
2745(inetd)X
1 f
2925(expects)X
3186(the)X
3304(socket)X
3529(connected)X
3875(to)X
3957(its)X
576 1084(client)N
774(on)X
874(\256le)X
996(descriptors)X
1368(0)X
1428(and)X
1564(1,)X
1644(and)X
1780(may)X
1938(immediately)X
2358(perform)X
2637(any)X
2773(operations)X
3128(such)X
3296(as)X
2 f
3384(read)X
1 f
3531(,)X
2 f
3572(write)X
1 f
3736(,)X
2 f
3777(send)X
1 f
3924(,)X
3965(or)X
2 f
576 1180(recv)N
1 f
715(.)X
785(Indeed,)X
1054(servers)X
1312(may)X
1480(use)X
1617(buffered)X
1920(I/O)X
2057(as)X
2154(provided)X
2469(by)X
2579(the)X
2707(``stdio'')X
2999(conventions,)X
3435(as)X
3531(long)X
3702(as)X
3798(as)X
3894(they)X
576 1276(remember)N
922(to)X
1004(use)X
2 f
1131(f\257ush)X
1 f
1324(when)X
1518(appropriate.)X
776 1400(One)N
933(call)X
1072(which)X
1291(may)X
1452(be)X
1551(of)X
1641(interest)X
1900(to)X
1985(individuals)X
2363(writing)X
2617(servers)X
2868(under)X
2 f
3074(inetd)X
1 f
3258(is)X
3335(the)X
2 f
3457(getpeername)X
1 f
3896(call,)X
576 1496(which)N
797(returns)X
1045(the)X
1168(address)X
1434(of)X
1526(the)X
1649(peer)X
1813(\(process\))X
2132(connected)X
2482(on)X
2586(the)X
2708(other)X
2897(end)X
3037(of)X
3128(the)X
3250(socket.)X
3519(For)X
3654(example,)X
3970(to)X
576 1592(log)N
709(the)X
838(Internet)X
1119(address)X
1391(in)X
1485(``dot)X
1673(notation'')X
2021(\(e.g.,)X
2216(``128.32.0.4''\))X
2723(of)X
2822(a)X
2890(client)X
3100(connected)X
3458(to)X
3552(a)X
3620(server)X
3849(under)X
2 f
576 1688(inetd)N
1 f
(,)S
776(the)X
894(following)X
1225(code)X
1397(might)X
1603(be)X
1699(used:)X
864 1832(struct)N
1062(sockaddr_in)X
1474(name;)X
864 1928(int)N
968(namelen)X
1260(=)X
1325(sizeof)X
1537(\(name\);)X
884 2024(...)N
864 2120(if)N
933 0.2232(\(getpeername\(0,)AX
1478(\(struct)X
1703(sockaddr)X
2013(*\)&name,)X
2356(&namelen\))X
2737(<)X
2802(0\))X
2889({)X
1064 2216(syslog\(LOG_ERR,)N
1695("getpeername:)X
2181(%m"\);)X
1064 2312(exit\(1\);)N
864 2408(})N
922(else)X
1064 2504(syslog\(LOG_INFO,)N
1727("Connection)X
2149(from)X
2325(%s",)X
2496(inet_ntoa\(name.sin_addr\)\);)X
884 2600(...)N
576 2744(While)N
800(the)X
2 f
926(getpeername)X
1 f
1369(call)X
1513(is)X
1594(especially)X
1943(useful)X
2167(when)X
2369(writing)X
2628(programs)X
2959(to)X
3050(run)X
3186(with)X
2 f
3357(inetd)X
1 f
(,)S
3566(it)X
3639(can)X
3780(be)X
3885(used)X
576 2840(under)N
779(other)X
964(circumstances.)X
1479(Be)X
1588(warned,)X
1865(however,)X
2182(that)X
2 f
2322(getpeername)X
1 f
2757(will)X
2901(fail)X
3028(on)X
3128(UNIX)X
3349(domain)X
3609(sockets.)X
776 2964(Standard)N
1088(TCP)X
1261(services)X
1547(are)X
1673(assigned)X
1976(unique)X
2221(well-known)X
2631(port)X
2787(numbers)X
3090(in)X
3179(the)X
3304(range)X
3511(of)X
3606(0)X
3674(to)X
3764(1023)X
3952(by)X
576 3060(the)N
703(Internet)X
982(Assigned)X
1309(Numbers)X
1632(Authority)X
1972 0.2188(\(IANA@ISI.EDU\).)AX
2653(The)X
2807(limited)X
3062(number)X
3336(of)X
3432(ports)X
3620(in)X
3710(this)X
3853(range)X
576 3156(are)N
696(assigned)X
993(to)X
1076(of\256cial)X
1324(Internet)X
1595(protocols.)X
1954(The)X
2101(TCPMUX)X
2456(service)X
2706(allows)X
2937(you)X
3079(to)X
3163(add)X
3301(locally-developed)X
3898(pro-)X
576 3252(tocols)N
789(without)X
1055(needing)X
1331(an)X
1429(of\256cial)X
1678(TCP)X
1846(port)X
1997(assignment.)X
2419(The)X
2566(TCPMUX)X
2921(protocol)X
3209(described)X
3538(in)X
3621(RFC-1078)X
3979(is)X
576 3348(simple:)N
776 3472(``A)N
913(TCP)X
1084(client)X
1287(connects)X
1593(to)X
1680(a)X
1741(foreign)X
1998(host)X
2156(on)X
2261(TCP)X
2432(port)X
2586(1.)X
2691(It)X
2765(sends)X
2969(the)X
3093(service)X
3347(name)X
3547(followed)X
776 3568(by)N
882(a)X
943 0.2768(carriage-return)AX
1447(line-feed)X
1758(<CRLF>.)X
2112(The)X
2262(service)X
2515(name)X
2714(is)X
2792(never)X
2996(case)X
3160(sensitive.)X
3485(The)X
3635(server)X
776 3664(replies)N
1023(with)X
1198(a)X
1267(single)X
1491(character)X
1820(indicating)X
2173(positive)X
2460(\("+"\))X
2659(or)X
2760(negative)X
3066(\(")X
9 f
3126(-)X
1 f
3170("\))X
3264(acknowledgment,)X
776 3760(immediately)N
1203(followed)X
1515(by)X
1622(an)X
1725(optional)X
2013(message)X
2311(of)X
2404(explanation,)X
2824(terminated)X
3193(with)X
3361(a)X
3423(<CRLF>.)X
3778(If)X
776 3856(the)N
894(reply)X
1079(was)X
1224(positive,)X
1517(the)X
1635(selected)X
1914(protocol)X
2201(begins;)X
2452(otherwise)X
2784(the)X
2902(connection)X
3274(is)X
3347(closed.'')X
576 3980(In)N
671(4.4BSD,)X
974(the)X
1101(TCPMUX)X
1463(service)X
1720(is)X
1802(built)X
1977(into)X
2 f
2130(inetd)X
1 f
(,)S
2339(that)X
2488(is,)X
2 f
2590(inetd)X
1 f
2779(listens)X
3012(on)X
3121(TCP)X
3296(port)X
3454(1)X
3523(for)X
3646(requests)X
3938(for)X
576 4076(TCPMUX)N
929(services)X
1208(listed)X
1401(in)X
2 f
1483(inetd.conf)X
1 f
1801(.)X
2 f
1861(inetd)X
1 f
(\(8\))S
2135(describes)X
2454(the)X
2572(format)X
2806(of)X
2893(TCPMUX)X
3246(entries)X
3480(for)X
2 f
3594(inetd.conf)X
1 f
3912(.)X
776 4200(The)N
928(following)X
1266(is)X
1346(an)X
1449(example)X
1748(TCPMUX)X
2108(server)X
2332(and)X
2475(its)X
2 f
2577(inetd.conf)X
1 f
2923(entry.)X
3156(More)X
3358(sophisticated)X
3804(servers)X
576 4296(may)N
734(want)X
910(to)X
992(do)X
1092(additional)X
1432(processing)X
1795(before)X
2021(returning)X
2335(the)X
2453(positive)X
2726(or)X
2813(negative)X
3105(acknowledgement.)X
864 4440(#include)N
1160(<sys/types.h>)X
864 4536(#include)N
1160(<stdio.h>)X
864 4728(main\(\))N
864 4824({)N
1024 4920(time_t)N
1248(t;)X
1024 5112(printf\("+Go\\r\\n"\);)N
1024 5208(f\257ush\(stdout\);)N
1024 5304(time\(&t\);)N
1024 5400(printf\("%d)N
1389(=)X
1454(%s",)X
1625(t,)X
1687(ctime\(&t\)\);)X
1024 5496(f\257ush\(stdout\);)N
864 5592(})N

44 p
%%Page: 44 44
10 s 10 xH 0 xS 1 f 1 i
576 384(PSD:21-44)N
3009(Advanced)X
3355(4.4BSD)X
3630(IPC)X
3774(Tutorial)X
576 672(The)N
2 f
721(inetd.conf)X
1 f
1059(entry)X
1244(is:)X
864 816(tcpmux/current_time)N
1556(stream)X
1790(tcp)X
1908(nowait)X
2146(nobody)X
2406(/d/curtime)X
2755(curtime)X
576 960(Here's)N
811(the)X
929(portion)X
1180(of)X
1267(the)X
1385(client)X
1583(code)X
1755(that)X
1895(handles)X
2160(the)X
2278(TCPMUX)X
2631(handshake:)X
864 1104(char)N
1023(line[BUFSIZ];)X
864 1200(FILE)N
1053(*fp;)X
884 1296(...)N
864 1488(/*)N
946(Use)X
1091(stdio)X
1266(for)X
1380(reading)X
1641(data)X
1795(from)X
1971(the)X
2089(server)X
2306(*/)X
864 1584(fp)N
951(=)X
1016(fdopen\(sock,)X
1453("r"\);)X
864 1680(if)N
933(\(fp)X
1047(==)X
1157(NULL\))X
1418({)X
944 1776(fprintf\(stderr,)N
1399("Can't)X
1630(create)X
1843(\256le)X
1965(pointer\\n"\);)X
944 1872(exit\(1\);)N
864 1968(})N
864 2160(/*)N
946(Send)X
1126(service)X
1374(request)X
1626(*/)X
864 2256(sprintf\(line,)N
1260("%s\\r\\n",)X
1575("current_time"\);)X
864 2352(if)N
933(\(write\(sock,)X
1339(line,)X
1499(strlen\(line\)\))X
1898(<)X
1963(0\))X
2050({)X
944 2448 0.2333(perror\("write"\);)AN
944 2544(exit\(1\);)N
864 2640(})N
864 2832(/*)N
946(Get)X
1082(ACK/NAK)X
1467(response)X
1768(from)X
1944(the)X
2062(server)X
2279(*/)X
864 2928(if)N
933(\(fgets\(line,)X
1303(sizeof\(line\),)X
1709(fp\))X
1823(==)X
1933(NULL\))X
2194({)X
944 3024(if)N
1013 0.3472(\(feof\(fp\)\))AX
1338({)X
1024 3120(die\(\);)N
944 3216(})N
1002(else)X
1147({)X
1024 3312(fprintf\(stderr,)N
1479("Error)X
1702(reading)X
1963(response\\n"\);)X
1024 3408(exit\(1\);)N
944 3504(})N
864 3600(})N
864 3792(/*)N
946(Delete)X
1176(<CR>)X
1392(*/)X
864 3888(if)N
933(\(\(lp)X
1069(=)X
1134(index\(line,)X
1499(')X
1526 3808('\)\))N
1627(!=)X
1719(NULL\))X
1980({)X
944 3984(*lp)N
1066(=)X
1131(')X
1198(';)X
864 4080(})N
864 4272(switch)N
1093(\(line[0]\))X
1381({)X
944 4368(case)N
1103('+':)X
1104 4464(printf\("Got)N
1482(ACK:)X
1693(%s\\n",)X
1926(&line[1]\);)X
1104 4560(break;)N
944 4656(case)N
1103('-':)X
1104 4752(printf\("Got)N
1482(NAK:)X
1698(%s\\n",)X
1931(&line[1]\);)X
1104 4848(exit\(0\);)N
944 4944(default:)N
1104 5040(printf\("Got)N
1482(unknown)X
1800(response:)X
2123(%s\\n",)X
2356(line\);)X
1104 5136(exit\(1\);)N
864 5232(})N
864 5424(/*)N
946(Get)X
1082(rest)X
1218(of)X
1305(data)X
1459(from)X
1635(the)X
1753(server)X
1970(*/)X
864 5520(while)N
1062(\(\(fgets\(line,)X
1459(sizeof\(line\),)X
1865(fp\)\))X
2006(!=)X
2098(NULL\))X
2359({)X
944 5616(fputs\(line,)N
1291(stdout\);)X
864 5712(})N

44 p
%%Trailer
xt

xs
